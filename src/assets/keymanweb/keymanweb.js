var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,g){d!=Array.prototype&&d!=Object.prototype&&(d[a]=g.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,a,g,k){if(a){g=$jscomp.global;d=d.split(".");for(k=0;k<d.length-1;k++){var e=d[k];e in g||(g[e]={});g=g[e]}d=d[d.length-1];k=g[d];a=a(k);a!=k&&null!=a&&$jscomp.defineProperty(g,d,{configurable:!0,writable:!0,value:a})}};$jscomp.underscoreProtoCanBeSet=function(){var d={a:!0},a={};try{return a.__proto__=d,a.a}catch(g){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(d,a){d.__proto__=a;if(d.__proto__!==a)throw new TypeError(d+" is not extensible");return d}:null;$jscomp.polyfill("Object.setPrototypeOf",function(d){return d||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("Array.prototype.fill",function(d){return d?d:function(a,d,k){var e=this.length||0;0>d&&(d=Math.max(0,e+d));if(null==k||k>e)k=e;k=Number(k);0>k&&(k=Math.max(0,e+k));for(d=Number(d||0);d<k;d++)this[d]=a;return this}},"es6","es3");var com;
(function(d){(function(a){var d=function(){return function(){}}();a.KeyEvent=d;d=function(){return function(a,e){this.keyboard=a;this.touchEnabled=e}}();a.AttachmentInfo=d;d=function(){return function(){}}();a.LegacyKeyEvent=d;d=function(){return function(){}}();a.KeyInformation=d;d=function(){return function(a,e){this.cmd=a;this.state=e}}();a.StyleCommand=d})(d.keyman||(d.keyman={}))})(com||(com={}));
function finallyConstructor(d){var a=this.constructor;return this.then(function(g){return a.resolve(d()).then(function(){return g})},function(g){return a.resolve(d()).then(function(){return a.reject(g)})})}var setTimeoutFunc=setTimeout;function noop(){}function bind(d,a){return function(){d.apply(a,arguments)}}
function Promise(d){if(!(this instanceof Promise))throw new TypeError("Promises must be constructed via new");if("function"!==typeof d)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];doResolve(d,this)}
function handle(d,a){for(;3===d._state;)d=d._value;0===d._state?d._deferreds.push(a):(d._handled=!0,Promise._immediateFn(function(){var g=1===d._state?a.onFulfilled:a.onRejected;if(null===g)(1===d._state?resolve:reject)(a.promise,d._value);else{try{var k=g(d._value)}catch(e){reject(a.promise,e);return}resolve(a.promise,k)}}))}
function resolve(d,a){try{if(a===d)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"===typeof a||"function"===typeof a)){var g=a.then;if(a instanceof Promise){d._state=3;d._value=a;finale(d);return}if("function"===typeof g){doResolve(bind(g,a),d);return}}d._state=1;d._value=a;finale(d)}catch(k){reject(d,k)}}function reject(d,a){d._state=2;d._value=a;finale(d)}
function finale(d){2===d._state&&0===d._deferreds.length&&Promise._immediateFn(function(){d._handled||Promise._unhandledRejectionFn(d._value)});for(var a=0,g=d._deferreds.length;a<g;a++)handle(d,d._deferreds[a]);d._deferreds=null}function Handler(d,a,g){this.onFulfilled="function"===typeof d?d:null;this.onRejected="function"===typeof a?a:null;this.promise=g}
function doResolve(d,a){var g=!1;try{d(function(d){g||(g=!0,resolve(a,d))},function(d){g||(g=!0,reject(a,d))})}catch(k){g||(g=!0,reject(a,k))}}Promise.prototype["catch"]=function(d){return this.then(null,d)};Promise.prototype.then=function(d,a){var g=new this.constructor(noop);handle(this,new Handler(d,a,g));return g};Promise.prototype["finally"]=finallyConstructor;
Promise.all=function(d){return new Promise(function(a,g){function k(b,c){try{if(c&&("object"===typeof c||"function"===typeof c)){var h=c.then;if("function"===typeof h){h.call(c,function(c){k(b,c)},g);return}}e[b]=c;0===--f&&a(e)}catch(q){g(q)}}if(!d||"undefined"===typeof d.length)throw new TypeError("Promise.all accepts an array");var e=Array.prototype.slice.call(d);if(0===e.length)return a([]);for(var f=e.length,l=0;l<e.length;l++)k(l,e[l])})};
Promise.resolve=function(d){return d&&"object"===typeof d&&d.constructor===Promise?d:new Promise(function(a){a(d)})};Promise.reject=function(d){return new Promise(function(a,g){g(d)})};Promise.race=function(d){return new Promise(function(a,g){for(var k=0,e=d.length;k<e;k++)d[k].then(a,g)})};Promise._immediateFn="function"===typeof setImmediate&&function(d){setImmediate(d)}||function(d){setTimeoutFunc(d,0)};
Promise._unhandledRejectionFn=function(d){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",d)};var globalNS=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw Error("unable to locate global object");}();"Promise"in globalNS?globalNS.Promise.prototype["finally"]||(globalNS.Promise.prototype["finally"]=finallyConstructor):globalNS.Promise=Promise;
(function(d){d=d.keyman||(d.keyman={});(d.environment||(d.environment={})).VERSION="11.0"})(com||(com={}));var __extends=this&&this.__extends||function(){var d=function(a,g){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var f in e)e.hasOwnProperty(f)&&(a[f]=e[f])};return d(a,g)};return function(a,g){function k(){this.constructor=a}d(a,g);a.prototype=null===g?Object.create(g):(k.prototype=g.prototype,new k)}}();
(function(d){(function(a){var g=function(){function a(){this._DisableInput=!1;this._IgnoreNextSelChange=0;this._SelectionControl=this._Selection=null;this.modStateFlags=0}a.prototype.setFocusTimer=function(){this.focusing=!0;this.focusTimer=window.setTimeout(function(){this.focusing=!1}.bind(this),1E3)};return a}();a.CommonDOMStates=g;var k=function(){function a(f){this.setFocus=function(b){}.bind(this);this.flashCaret=function(){}.bind(this);this.setBlur=function(b){}.bind(this);this._ControlFocus=
function(b){var c=this.keyman.util.device,h=this.keyman.osk;b=this.keyman._GetEventObject(b);b=this.keyman.util.eventTarget(b);if(null==b||c.touchable&&(null==b.className||0>b.className.indexOf("keymanweb-input")))return!0;b.nodeName.toLowerCase();if(b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLInputElement){var q=b.type.toLowerCase();if("text"!=q&&"search"!=q)return!0}else if(!(!c.touchable&&b.isContentEditable||b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLTextAreaElement))return!0;
e.states.activeElement=b;3==b.nodeType&&(b=b.parentNode);q=b;(null==b.className||0>b.className.indexOf("keymanweb-input"))&&this instanceof e&&this.scrollBody(b);b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLIFrameElement&&(this.keyman.domManager._AttachToIframe(b),b=b.contentWindow.document);var f=a.states.lastActiveElement;a.states.lastActiveElement=b;this.keyman.uiManager.justActivated?this._BlurKeyboardSettings():this._FocusKeyboardSettings(f?!1:!0);if(this._CommonFocusHelper(b))return!0;
b._KeymanWebSelectionStart=b._KeymanWebSelectionEnd=null;b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLElement&&this.keyman.domManager._SetTargDir(b);this.doControlFocused(q,a.states.lastActiveElement);c.touchable?h._Enabled=1:h.ready&&(this.keyman.keyboardManager.isCJK()&&(h._Enabled=1),h._Enabled?h._Show():h._Hide(!1));return!0}.bind(this);this._ControlBlur=function(b){b=this.keyman._GetEventObject(b);var c=this.keyman.util.eventTarget(b);if(null==c)return!0;a.states.activeElement=
null;this instanceof e&&this.hideCaret();3==c.nodeType&&(c=c.parentNode);c.ownerDocument&&(c instanceof c.ownerDocument.defaultView.HTMLIFrameElement&&(c=c.contentWindow.document),c instanceof c.ownerDocument.defaultView.HTMLInputElement||c instanceof c.ownerDocument.defaultView.HTMLTextAreaElement)&&(c._KeymanWebSelectionStart=c.value._kmwCodeUnitToCodePoint(c.selectionStart),c._KeymanWebSelectionEnd=c.value._kmwCodeUnitToCodePoint(c.selectionEnd));this._BlurKeyboardSettings();a.states.lastActiveElement=
c;this.keyman.uiManager.justActivated=!1;var h=this.keyman.uiManager.isActivating;h||this.keyman.keyboardManager.notifyKeyboard(0,c,0);this.doControlBlurred(c,b,h);this.keyman.osk.ready&&!h&&this.keyman.osk._Hide(!1);this.doChangeEvent(c);this.keyman.interface.resetContext();return!0}.bind(this);this._SelectionChange=function(){a.states._IgnoreNextSelChange&&a.states._IgnoreNextSelChange--;return!0}.bind(this);this._KeyDown=function(b){var c=this.keyman.keyboardManager.activeKeyboard,h=this.keyman.osk,
q=this.keyman.util,f=this.keyman["interface"];a.states._KeyPressToSwallow=0;if(a.states._DisableInput||null==c)return!0;var e=q.eventTarget(b);if(q.device.touchable){if(e&&"undefined"!=typeof e.kmwInput&&0==e.kmwInput)return!0}else if(e&&0<=e.className.indexOf("kmw-disabled"))return!0;if(!h.ready)return!0;e=this._GetKeyEventProperties(b,!0);if(null==e)return!0;switch(e.Lcode){case 8:f.clearDeadkeys();break;case 16:case 17:case 18:case 20:case 144:case 145:return this.keyman.keyboardManager.notifyKeyboard(e.Lcode,
e.Ltarg,1),q.device.touchable?!0:h._UpdateVKShift(e,e.Lcode-15,1)}e.LmodifierChange&&(this.keyman.keyboardManager.notifyKeyboard(0,e.Ltarg,1),h._UpdateVKShift(e,0,1));!window.event&&this.keyman.keyMapManager.browserMap.FF["k"+e.Lcode]&&(e.Lcode=this.keyman.keyMapManager.browserMap.FF["k"+e.Lcode]);if(c.KM){if(8==e.Lcode)return a.states._KeyPressToSwallow=1,f.processKeystroke(q.physicalDevice,e.Ltarg,e)||this.keyman.interface.defaultBackspace(),!1;a.states._KeyPressToSwallow=0;l=l||f.processKeystroke(q.physicalDevice,
e.Ltarg,e)}else{var l=0,d=this.keyman.keyMapManager.languageMap[h._BaseLayout];d&&d["k"+e.Lcode]&&(e.Lcode=d["k"+e.Lcode]);"undefined"!=typeof c.KM||e.Lmodifiers&96||(d={Lcode:this.keyman.keyMapManager._USKeyCodeToCharCode(e),Ltarg:e.Ltarg,Lmodifiers:0,LisVirtualKey:0},f.processKeystroke(q.physicalDevice,d.Ltarg,d)&&(l=1));l=l||f.processKeystroke(q.physicalDevice,e.Ltarg,e);8==e.Lcode&&!l&&null!=e.Ltarg.className&&0<=e.Ltarg.className.indexOf("keymanweb-input")&&this.keyman.interface.defaultBackspace()}!l&&
96<=e.Lcode&&111>=e.Lcode&&!c.KM&&(f.output(0,e.Ltarg,String._kmwFromCharCode(106>e.Lcode?e.Lcode-48:e.Lcode-64)),l=1);if(l)return b&&b.preventDefault&&(b.preventDefault(),b.stopPropagation()),a.states._KeyPressToSwallow=b?this._GetEventKeyCode(b):0,!1;a.states._KeyPressToSwallow=0;return 8==e.Lcode&&null!=e.Ltarg.className&&0<=e.Ltarg.className.indexOf("keymanweb-input")?!1:"undefined"!=typeof e.Ltarg.base&&(b=h.defaultKeyOutput("",e.Lcode,e.Lmodifiers,!1,e.Ltarg))?(f.output(0,e.Ltarg,b),!1):!0}.bind(this);
this._KeyPress=function(b){if(a.states._DisableInput||null==this.keyman.keyboardManager.activeKeyboard)return!0;var c=this._GetKeyEventProperties(b);if(null==c||c.LisVirtualKey)return!0;if(!this.keyman.keyboardManager.activeKeyboard.KM){if(!a.states._KeyPressToSwallow||32>c.Lcode||this.keyman._BrowserIsSafari&&63232<c.Lcode&&63744>c.Lcode)return!0;if(b=this.keyman._GetEventObject(b))b.returnValue=!1;return!1}if(a.states._KeyPressToSwallow||this.keyman["interface"].processKeystroke(this.keyman.util.physicalDevice,
c.Ltarg,c))return a.states._KeyPressToSwallow=0,b&&b.preventDefault&&(b.preventDefault(),b.stopPropagation()),!1;a.states._KeyPressToSwallow=0;return!0}.bind(this);this._KeyUp=function(b){var c=this.keyman.keyboardManager,a=this.keyman.osk;b=this._GetKeyEventProperties(b,!1);if(null==b||!a.ready)return!0;switch(b.Lcode){case 13:if(b.Ltarg instanceof b.Ltarg.ownerDocument.defaultView.HTMLTextAreaElement)break;if(b.Ltarg.base&&b.Ltarg.base instanceof b.Ltarg.base.ownerDocument.defaultView.HTMLTextAreaElement)break;
b.Ltarg instanceof b.Ltarg.ownerDocument.defaultView.HTMLInputElement&&(c=b.Ltarg,"search"==c.type||"submit"==c.type?c.form.submit():this.keyman.domManager.moveToNext(!1));return!0;case 16:case 17:case 18:case 20:case 144:case 145:return c.notifyKeyboard(b.Lcode,b.Ltarg,0),this.keyman.util.device.touchable?!0:a._UpdateVKShift(b,b.Lcode-15,1)}b.LmodifierChange&&(c.notifyKeyboard(0,b.Ltarg,0),a._UpdateVKShift(b,0,1));return!1}.bind(this);this.keyman=f}a.prototype.getText=function(a){return""};a.prototype.setText=
function(a,b,c){};a.prototype.getTextBeforeCaret=function(a){return""};a.prototype.setTextBeforeCaret=function(a,b){};a.prototype.getTextCaret=function(a){return 0};a.prototype.setTextCaret=function(a,b){};a.prototype.hideCaret=function(){};a.prototype.updateInput=function(a){};a.prototype.doControlFocused=function(a,b){var c={};c.target=a;c.activeControl=b;return this.keyman.util.callEvent("kmw.controlfocused",c)};a.prototype.doControlBlurred=function(a,b,c){var h={};h.target=a;h.event=b;h.isActivating=
c;return this.keyman.util.callEvent("kmw.controlblurred",h)};a.prototype._BlurKeyboardSettings=function(f,b){var c=this.keyman.keyboardManager.activeKeyboard?this.keyman.keyboardManager.activeKeyboard.KI:"",h=this.keyman.keyboardManager.getActiveLanguage();void 0!==f&&void 0!==b&&(c=f,h=b);(f=a.states.lastActiveElement)&&null!=f._kmwAttachment.keyboard?(f._kmwAttachment.keyboard=c,f._kmwAttachment.languageCode=h):(this.keyman.globalKeyboard=c,this.keyman.globalLanguageCode=h)};a.prototype._FocusKeyboardSettings=
function(f){var b=a.states.lastActiveElement;b&&null!=b._kmwAttachment.keyboard?this.keyman.keyboardManager.setActiveKeyboard(b._kmwAttachment.keyboard,b._kmwAttachment.languageCode):f||this.keyman.keyboardManager.setActiveKeyboard(this.keyman.globalKeyboard,this.keyman.globalLanguageCode)};a.prototype._CommonFocusHelper=function(f){var b=this.keyman.uiManager;if(f.ownerDocument&&f instanceof f.ownerDocument.defaultView.HTMLIFrameElement&&(!this.keyman.domManager._IsIEEditableIframe(f,1)||!this.keyman.domManager._IsMozillaEditableIframe(f,
1)))return a.states._DisableInput=!0;a.states._DisableInput=!1;b.justActivated||(this.keyman["interface"]._DeadKeys=[],this.keyman.keyboardManager.notifyKeyboard(0,f,1));b.justActivated||a.states._SelectionControl==f||(b.isActivating=!1);b.justActivated=!1;a.states._SelectionControl=f;return!1};a.prototype._GetEventKeyCode=function(a){return a.keyCode?a.keyCode:a.which?a.which:null};a.prototype._GetKeyEventProperties=function(f,b){b=new d.keyman.KeyEvent;f=this.keyman._GetEventObject(f);b.Ltarg=this.keyman.util.eventTarget(f);
if(null==b.Ltarg||!0===f.cancelBubble)return null;3==b.Ltarg.nodeType&&(b.Ltarg=b.Ltarg.parentNode);b.Lcode=this._GetEventKeyCode(f);if(null==b.Lcode)return null;var c=this.keyman.osk,h=this.keyman.keyboardManager.activeKeyboard;if(h&&h.KM&&b.Lcode!=c.keyCodes.K_SPACE){var q=c.defaultKeyOutput("K_xxxx",b.Lcode,f.getModifierState("Shift")?16:0,!1,null);q&&(b.Lcode=q.charCodeAt(0))}q=a.states.modStateFlags;var e=!1,l=!1;switch(b.Lcode){case c.keyCodes.K_CTRL:case c.keyCodes.K_LCTRL:case c.keyCodes.K_RCTRL:case c.keyCodes.K_CONTROL:case c.keyCodes.K_LCONTROL:case c.keyCodes.K_RCONTROL:e=
!0;break;case c.keyCodes.K_LMENU:case c.keyCodes.K_RMENU:case c.keyCodes.K_ALT:case c.keyCodes.K_LALT:case c.keyCodes.K_RALT:l=!0}var n=0|(f.getModifierState("Shift")?16:0);f.getModifierState("Control")&&(n|=0!=f.location&&e?1==f.location?c.modifierCodes.LCTRL:c.modifierCodes.RCTRL:q&3);f.getModifierState("Alt")&&(n|=0!=f.location&&l?1==f.location?c.modifierCodes.LALT:c.modifierCodes.RALT:q&12);b.Lstates=0;f.getModifierState("CapsLock")?b.Lstates=c.modifierCodes.CAPS:b.Lstates=c.modifierCodes.NO_CAPS;
f.getModifierState("NumLock")?b.Lstates|=c.modifierCodes.NUM_LOCK:b.Lstates|=c.modifierCodes.NO_NUM_LOCK;f.getModifierState("ScrollLock")||f.getModifierState("Scroll")?b.Lstates|=c.modifierCodes.SCROLL_LOCK:b.Lstates|=c.modifierCodes.NO_SCROLL_LOCK;n|=b.Lstates;b.LmodifierChange=a.states.modStateFlags!=n;a.states.modStateFlags=n;h&&h.KM&&f.getModifierState("CapsLock")&&(65<=b.Lcode&&90>=b.Lcode||97<=b.Lcode&&122>=b.Lcode)&&(n^=16,b.Lcode^=32);h=c.modifierCodes.RALT|c.modifierCodes.LCTRL;(q&h)==h&&
(n&h)!=h&&(n&=~h);n&c.modifierCodes.RALT&&(n&=~c.modifierCodes.LCTRL);this.keyman.keyboardManager.isChiral()?(b.Lmodifiers=n&c.modifierBitmasks.CHIRAL,c.emulatesAltGr()&&(b.Lmodifiers&c.modifierBitmasks.ALT_GR_SIM)==c.modifierBitmasks.ALT_GR_SIM&&(b.Lmodifiers^=c.modifierBitmasks.ALT_GR_SIM,b.Lmodifiers|=c.modifierCodes.RALT)):b.Lmodifiers=n&16|(n&(c.modifierCodes.LCTRL|c.modifierCodes.RCTRL)?32:0)|(n&(c.modifierCodes.LALT|c.modifierCodes.RALT)?64:0);b.LisVirtualKeyCode="undefined"!=typeof f.charCode&&
null!=f.charCode&&(0==f.charCode||0!=(b.Lmodifiers&111));b.LisVirtualKey=b.LisVirtualKeyCode||"keypress"!=f.type;return b};a.prototype.doChangeEvent=function(f){if(a.states.changed){if("function"==typeof Event)var b=new Event("change",{bubbles:!0,cancelable:!1});else b=document.createEvent("HTMLEvents"),b.initEvent("change",!0,!1);f.base&&f.base.kmw_ip&&(f=f.base);f.dispatchEvent(b)}a.states.changed=!1};a.states=new g;return a}();a.DOMEventHandlers=k;var e=function(f){function e(b){b=f.call(this,
b)||this;b.setFocus=function(b){var c=this.keyman.osk,f=this.keyman.util;k.states.setFocusTimer();if(a.Util.instanceof(b,"TouchEvent"))var e=b.touches[0];else e={clientX:0,clientY:0},e.target=k.states.lastActiveElement?k.states.lastActiveElement.kmw_ip:this.keyman.domManager.sortedInputs[0].kmw_ip;b=e.clientX;var l=e.clientY,d=e.target;var g=a.Util.instanceof(d,"HTMLSpanElement")?d.parentNode:null!=d.className&&0<=d.className.indexOf("keymanweb-input")?d.firstChild:d;e=g.parentNode;k.states.activeElement!=
e&&(this.hideCaret(),k.states.activeElement=e,e.focus());this.keyman.domManager._SetTargDir(e);c.ready&&!c._Visible&&c._Show();if(a.Util.instanceof(d,"HTMLDivElement"))l=f._GetAbsoluteX(g.firstChild),"rtl"==e.dir?(l+=g.firstChild.offsetWidth,c=b>l?0:1E5):c=b<l?0:1E5,this.setTextCaret(e,c),this.scrollInput(e);else{var u;g=g.childNodes[1];d=0;var p=this.getText(e)._kmwLength();c=this.getTextCaret(e);var t=document.body.scrollTop;if(e.base instanceof e.base.ownerDocument.defaultView.HTMLTextAreaElement){var z=
Math.round(e.base.offsetHeight/e.base.rows);for(u=0;16>u;u++){var x=f._GetAbsoluteY(g)-t;if(x>l&&c>d&&c!=p)p=c,c=Math.round((c+d)/2);else if(x<l-z&&c<p&&c!=d)d=c,c=Math.round((c+p)/2);else break;this.setTextCaret(e,c)}for(;f._GetAbsoluteY(g)-t>l&&c>d;)this.setTextCaret(e,--c);for(;f._GetAbsoluteY(g)-t<l-z&&c<p;)this.setTextCaret(e,++c)}x="rtl"==e.dir?function(b,c){return b<c}:function(b,c){return b>c};for(u=0;16>u;u++){l=f._GetAbsoluteX(g);if(x(l,b)&&c>d&&c!=p)p=c,c=Math.round((c+d)/2);else if(!x(l,
b)&&c<p&&c!=d)d=c,c=Math.round((c+p)/2);else break;this.setTextCaret(e,c)}for(;x(f._GetAbsoluteX(g),b)&&c>d;)this.setTextCaret(e,--c);for(;!x(f._GetAbsoluteX(g),b)&&c<p;)this.setTextCaret(e,++c)}this._BlurKeyboardSettings();k.states.lastActiveElement=e;this._FocusKeyboardSettings(!1);this._CommonFocusHelper(e)}.bind(b);b.flashCaret=function(){if(this.keyman.util.device.touchable&&null!=k.states.activeElement){var b=this.caret.style;b.visibility="visible"!=b.visibility?"visible":"hidden"}}.bind(b);
b.setBlur=function(b){this.keyman.interface.resetContext();if("relatedTarget"in b&&b.relatedTarget&&(b=b.relatedTarget,this.doChangeEvent(b),"DIV"!=b.nodeName||-1==b.className.indexOf("keymanweb-input"))){this.cancelInput();return}k.states.focusing||this.cancelInput()}.bind(b);b.dragInput=function(b){b.preventDefault();b.stopPropagation();var c=a.Util.instanceof(b,"TouchEvent")?b.targetTouches[0].target:b.target;if(null!=c){if(null==c.className||0>c.className.indexOf("keymanweb-input"))c=c.parentNode;
if(null==c.className||0>c.className.indexOf("keymanweb-input"))c=c.parentNode;if(!(null==c.className||0>c.className.indexOf("keymanweb-input"))){if(a.Util.instanceof(b,"TouchEvent")){var f=b.touches[0].screenX;var e=b.touches[0].screenY}else f=b.screenX,e=b.screenY;if("undefined"==typeof this.firstTouch||null==this.firstTouch)this.firstTouch={x:f,y:e};else{var l=this.firstTouch.x,d=this.firstTouch.y;b=c.firstChild;if("TEXTAREA"==c.base.nodeName){if(f=parseInt(b.style.top,10),isNaN(f)&&(f=0),l=d-e,
-4>l||4<l)b.style.top=(f<l?f-l:0)+"px",this.firstTouch.y=e}else{e=parseInt(b.style.left,10);isNaN(e)&&(e=0);var g=l-f;if(-4>g||4<g)l=0,d=this.keyman.util._GetAbsoluteX(c)+c.offsetWidth-b.offsetWidth-32,"rtl"==c.base.dir?l=16:d-=24,e-=g,e>l&&(e=l),e<d&&(e=d),b.style.left=e+"px",this.firstTouch.x=f}}this.setScrollBar(c)}}}.bind(b);b.initCaret();return b}__extends(e,f);e.prototype.initCaret=function(){this.caret=document.createElement("DIV");var b=this.caret.style;b.position="absolute";b.height="16px";
b.width="2px";b.backgroundColor="blue";b.border="none";b.left=b.top="0px";b.display="block";b.visibility="hidden";b.zIndex="9998";this.caretTimerId=window.setInterval(this.flashCaret,500)};e.prototype.getText=function(b){return null==b?"":b.textContent};e.prototype.setText=function(b,c,a){if(b&&0<b.childNodes.length){var h=b.firstChild,f=0;if(3<=h.childNodes.length){var e=h.childNodes[0];h=h.childNodes[2];if(null===c){var l=e.textContent;c=h.textContent;c=l+c}0>a&&(a=0);f=c._kmwLength();if(null===
a||a>f)a=f;l=c._kmwSubstr(0,a);c=c._kmwSubstr(a);e.textContent=l;h.textContent=c}}this.updateBaseElement(b,f)};e.prototype.getTextBeforeCaret=function(b){return b&&1<b.childNodes.length&&(b=b.firstChild,0<b.childNodes.length)?b.childNodes[0].textContent:""};e.prototype.setTextBeforeCaret=function(b,c){if(b&&0<b.childNodes.length){var a=b.firstChild,f=0;1<a.childNodes.length&&(f=a.childNodes[0],a=a.childNodes[2],"TEXTAREA"!=b.base.nodeName&&(c=c.replace(/\s+$/," ")),f.textContent=c,f=c.length,f+=a.textContent.length)}this.updateBaseElement(b,
f);this.scrollInput(b)};e.prototype.getTextCaret=function(b){return this.getTextBeforeCaret(b)._kmwLength()};e.prototype.setTextCaret=function(b,c){this.setText(b,null,c);this.showCaret(b)};e.prototype.hideCaret=function(){var b=k.states.lastActiveElement;if(b&&null!=b.className&&0<=b.className.indexOf("keymanweb-input")){if(b.base instanceof b.base.ownerDocument.defaultView.HTMLTextAreaElement||b.base instanceof b.base.ownerDocument.defaultView.HTMLInputElement)b.base.value=this.getText(b);this.setText(b,
null,1E5);var c=b.firstChild.style;"TEXTAREA"==b.base.nodeName?c.top="0":c.left="rtl"==b.base.dir?b.offsetWidth-b.firstChild.offsetWidth-8+"px":"0";this.caret.parentNode&&this.caret.parentNode.removeChild(this.caret);this.caret.style.visibility="hidden";1<b.childNodes.length&&(b.childNodes[1].style.visibility="hidden")}};e.prototype.showCaret=function(b){if(b&&b.firstChild&&!(3>b.firstChild.childNodes.length)){var c=b.firstChild,a=this.caret.style,f=c.childNodes[1];this.caret.parentNode!=c&&c.appendChild(this.caret);
a.left=f.offsetLeft+"px";a.top=f.offsetTop+"px";a.height=f.offsetHeight-1+"px";a.visibility="hidden";this.scrollBody(b);this.setScrollBar(b)}};e.prototype.updateInput=function(b){var c=this.keyman.util,a=b.style,f=b.base,e=window.getComputedStyle(f,null),l=parseInt(e.marginLeft,10),d=parseInt(e.marginTop,10),g=c._GetAbsoluteX(f),k=c._GetAbsoluteY(f),p=b.offsetParent;p&&(g-=c._GetAbsoluteX(p),k-=c._GetAbsoluteY(p));isNaN(l)&&(l=0);isNaN(d)&&(d=0);a.left=g-l+"px";a.top=k-d+"px";"undefined"!=typeof e.MozBoxSizing&&
(a.left=g+"px",a.top=k+"px");l=f.offsetWidth;f=f.offsetHeight;d=parseInt(e.paddingLeft,10);g=parseInt(e.paddingRight,10);k=parseInt(e.paddingTop,10);p=parseInt(e.paddingBottom,10);var t=parseInt(e.borderLeft,10),z=parseInt(e.borderRight,10),x=parseInt(e.borderTop,10),C=parseInt(e.borderBottom,10),v="undefined";"undefined"!=typeof e.boxSizing?v=e.boxSizing:"undefined"!=typeof e.MozBoxSizing&&(v=e.MozBoxSizing);"content-box"==v&&(isNaN(d)||(l-=d),isNaN(g)||(l-=g),isNaN(t)||(l-=t),isNaN(z)||(l-=z),isNaN(k)||
(f-=k),isNaN(p)||(f-=p),isNaN(x)||(f-=x),isNaN(C)||(f-=C));"Android"==c.device.OS&&("undefined"!=typeof e.MozBoxSizing?(a.paddingTop=k+1+"px",a.paddingLeft=d+"px","TEXTAREA"==b.base.nodeName?a.marginTop="1px":a.marginLeft="1px",l--,f--):(l++,f++));a.width=l+"px";a.height=f+"px"};e.prototype.updateBaseElement=function(b,c){var a=b.base.ownerDocument.defaultView;b.base instanceof a.HTMLInputElement||b.base instanceof a.HTMLTextAreaElement?b.base.value=this.getText(b):b.base.textContent=this.getText(b);
b.style.backgroundColor=0==c?"transparent":window.getComputedStyle(b.base,null).backgroundColor;"iOS"==this.keyman.util.device.OS&&(b.base.style.visibility=0==c?"visible":"hidden")};e.prototype.cancelInput=function(){k.states.activeElement=null;this.hideCaret();this.keyman.osk.hideNow()};e.prototype.setScrollBar=function(b){var c=b.childNodes[0],a=b.childNodes[1].style;(c.offsetWidth>b.offsetWidth||0>c.offsetLeft)&&"TEXTAREA"!=b.base.nodeName?(a.height="4px",a.width=b.offsetWidth/c.offsetWidth*100+
"%",a.left=-c.offsetLeft/c.offsetWidth*100+"%",a.top="0",a.visibility="visible"):c.offsetHeight>b.offsetHeight||0>c.offsetTop?(a.width="4px",a.height=b.offsetHeight/c.offsetHeight*100+"%",a.top=-c.offsetTop/c.offsetHeight*100+"%",a.left="0",a.visibility="visible"):a.visibility="hidden"};e.prototype.scrollInput=function(b){if(b&&b.firstChild&&null!=b.className&&!(0>b.className.indexOf("keymanweb-input"))){var c=b.firstChild;if(!(3>c.childNodes.length)){var a=this.keyman.util,f=c.childNodes[1],e=a._GetAbsoluteX(f);
f=a._GetAbsoluteY(f);var l=a._GetAbsoluteX(b);a=a._GetAbsoluteY(b);var d=parseInt(c.style.left,10),g=parseInt(c.style.top,10),k=0,p=0;isNaN(d)&&(d=0);isNaN(g)&&(g=0);b.base instanceof b.base.ownerDocument.defaultView.HTMLTextAreaElement?(e=Math.round(b.offsetHeight/b.base.rows),f<a&&(p=f-a),f>a+b.offsetHeight-e&&(p=f-a-b.offsetHeight+e),0!=p&&(c.style.top=(g<p?g-p:0)+"px")):(e<l+8&&(k=e-l-12),e>l+b.offsetWidth-12&&(k=e-l-b.offsetWidth+12),0!=k&&(c.style.left=(d<k?d-k:0)+"px"));this.showCaret(b)}}};
e.prototype.scrollBody=function(b){var c=this.keyman.osk,a=this.keyman.util;if(b&&null!=b.className&&!(0>b.className.indexOf("keymanweb-input"))&&c.ready){b=b.firstChild.childNodes[1];a=a._GetAbsoluteY(b);var f=window.pageYOffset;a<f?c=a-f:(c=a-f-(window.innerHeight-c._Box.offsetHeight-b.offsetHeight-2),0>c&&(c=0));0!=c&&window.scrollTo(0,c+window.pageYOffset)}};return e}(k);a.DOMTouchHandlers=e})(d.keyman||(d.keyman={}))})(com||(com={}));
String.kmwFromCharCode=function(d){var a=[],g;for(g=0;g<arguments.length;g++){var k=Number(arguments[g]);if(!isFinite(k)||0>k||1114111<k||Math.floor(k)!==k)throw new RangeError("Invalid code point "+k);65536>k?a.push(k):(k-=65536,a.push((k>>10)+55296),a.push(k%1024+56320))}return String.fromCharCode.apply(void 0,a)};
String.prototype.kmwCharCodeAt=function(d){var a=String(this),g=0;if(0>d||d>=a.length)return NaN;for(var k=0;k<d;k++)if(g=a.kmwNextChar(g),null===g)return NaN;d=a.charCodeAt(g);return 55296<=d&&56319>=d&&a.length>g+1&&(a=a.charCodeAt(g+1),56320<=a&&57343>=a)?(d-55296<<10)+(a-56320)+65536:d};String.prototype.kmwIndexOf=function(d,a){var g=String(this);d=g.indexOf(d,a);if(0>d)return d;for(var k=a=0;null!==k&&k<d;k=g.kmwNextChar(k))a++;return a};
String.prototype.kmwLastIndexOf=function(d,a){var g=String(this);d=g.lastIndexOf(d,a);if(0>d)return d;for(var k=a=0;null!==k&&k<d;k=g.kmwNextChar(k))a++;return a};String.prototype.kmwLength=function(){var d=String(this);if(0==d.length)return 0;for(var a=0,g=0;null!==g;a++)g=d.kmwNextChar(g);return a};String.prototype.kmwSlice=function(d,a){var g=String(this);d=g.kmwCodePointToCodeUnit(d);a=g.kmwCodePointToCodeUnit(a);return null===d||null===a?"":g.slice(d,a)};
String.prototype.kmwSubstr=function(d,a){var g=String(this);0>d&&(d=g.kmwLength()+d);0>d&&(d=0);var k=g.kmwCodePointToCodeUnit(d),e=k;if(null===k)return"";if(2>arguments.length)e=g.length;else for(var f=0;f<a;f++)e=g.kmwNextChar(e);return null===e?g.substring(k):g.substring(k,e)};
String.prototype.kmwSubstring=function(d,a){var g=String(this);if("undefined"==typeof a)d=g.kmwCodePointToCodeUnit(d),a=g.length;else{if(d>a){var k=d;d=a;a=k}d=g.kmwCodePointToCodeUnit(d);a=g.kmwCodePointToCodeUnit(a)}if(isNaN(d)||null===d)d=0;if(isNaN(a)||null===a)a=g.length;return g.substring(d,a)};
String.prototype.kmwNextChar=function(d){var a=String(this);if(null===d||0>d||d>=a.length-1)return null;var g=a.charCodeAt(d);return 55296<=g&&56319>=g&&a.length>d+1&&(g=a.charCodeAt(d+1),56320<=g&&57343>=g)?d==a.length-2?null:d+2:d+1};String.prototype.kmwPrevChar=function(d){var a=String(this);if(null==d||0>=d||d>a.length)return null;var g=a.charCodeAt(d-1);return 56320<=g&&57343>=g&&1<d&&(a=a.charCodeAt(d-2),55296<=a&&56319>=a)?d-2:d-1};
String.prototype.kmwCodePointToCodeUnit=function(d){if(null===d)return null;var a=String(this),g=0;if(0>d){g=a.length;for(var k=0;k>d;k--)g=a.kmwPrevChar(g);return g}if(d==a.kmwLength())return a.length;for(k=0;k<d;k++)g=a.kmwNextChar(g);return g};String.prototype.kmwCodeUnitToCodePoint=function(d){var a=String(this);return null===d?null:0==d?0:0>d?a.substr(d).kmwLength():a.substr(0,d).kmwLength()};String.prototype.kmwCharAt=function(d){var a=String(this);return 0<=d?a.kmwSubstr(d,1):""};
String.prototype.kmwBMPNextChar=function(d){var a=String(this);return 0>d||d>=a.length-1?null:d+1};String.prototype.kmwBMPPrevChar=function(d){var a=String(this);return 0>=d||d>a.length?null:d-1};String.prototype.kmwBMPCodePointToCodeUnit=function(d){return d};String.prototype.kmwBMPCodeUnitToCodePoint=function(d){return d};String.prototype.kmwBMPLength=function(){return String(this).length};
String.prototype.kmwBMPSubstr=function(d,a){var g=String(this);return-1<d?g.substr(d,a):g.substr(g.length+d,-d)};
String.kmwEnableSupplementaryPlane=function(d){var a=String.prototype;String._kmwFromCharCode=d?String.kmwFromCharCode:String.fromCharCode;a._kmwCharAt=d?a.kmwCharAt:a.charAt;a._kmwCharCodeAt=d?a.kmwCharCodeAt:a.charCodeAt;a._kmwIndexOf=d?a.kmwIndexOf:a.indexOf;a._kmwLastIndexOf=d?a.kmwLastIndexOf:a.lastIndexOf;a._kmwSlice=d?a.kmwSlice:a.slice;a._kmwSubstring=d?a.kmwSubstring:a.substring;a._kmwSubstr=d?a.kmwSubstr:a.kmwBMPSubstr;a._kmwLength=d?a.kmwLength:a.kmwBMPLength;a._kmwNextChar=d?a.kmwNextChar:
a.kmwBMPNextChar;a._kmwPrevChar=d?a.kmwPrevChar:a.kmwBMPPrevChar;a._kmwCodePointToCodeUnit=d?a.kmwCodePointToCodeUnit:a.kmwBMPCodePointToCodeUnit;a._kmwCodeUnitToCodePoint=d?a.kmwCodeUnitToCodePoint:a.kmwBMPCodeUnitToCodePoint};
(function(d){(function(a){var d=function(){function d(e){this.inputList=[];this.sortedInputs=[];this.nonKMWTouchHandler=function(f){a.DOMEventHandlers.states.focusing=!1;clearTimeout(a.DOMEventHandlers.states.focusTimer);this.keyman.osk.hideNow()}.bind(this);this._EnablementMutationObserverCore=function(a){for(var f=0;f<a.length;f++){var b=a[f],c=b.oldValue?0<=b.oldValue.indexOf("kmw-disabled"):!1,h=0<=b.target.className.indexOf("kmw-disabled");c&&!h?this._EnableControl(b.target):!c&&h&&this._DisableControl(b.target);
!h&&"readonly"==b.attributeName&&(c=b.oldValue?null!=b.oldValue:!1,h=b.target,h instanceof h.ownerDocument.defaultView.HTMLInputElement||h instanceof h.ownerDocument.defaultView.HTMLTextAreaElement)&&(h=h.readOnly,c&&!h?this._EnableControl(b.target):!c&&h&&this._DisableControl(b.target))}}.bind(this);this._AutoAttachObserverCore=function(a){for(var f=[],b=[],c=0;c<a.length;c++){for(var h=a[c],e=0;e<h.addedNodes.length;e++)f=f.concat(this._GetDocumentEditables(h.addedNodes[e]));for(e=0;e<h.removedNodes.length;e++)b=
b.concat(this._GetDocumentEditables(h.removedNodes[e]))}for(a=0;a<f.length;a++)this.isKMWInput(f[a])&&this._MutationAdditionObserved(f[a]);for(a=0;a<b.length;a++)this.isKMWInput(b[a])&&this._MutationRemovalObserved(b[a]);if(f.length||b.length)if(!this.keyman.util.device.touchable)this.listInputs();else if(this.keyman.util.device.touchable){var m=this;window.setTimeout(function(){m.listInputs();for(var b=0;b<this.sortedInputs.length;b++)this.sortedInputs[b].kmw_ip&&this.keyman.touchAliasing.updateInput(this.sortedInputs[b].kmw_ip)}.bind(this),
1)}}.bind(this);this._MutationAdditionObserved=function(a){if(a instanceof a.ownerDocument.defaultView.HTMLIFrameElement&&!this.keyman.util.device.touchable){var f=this,b=function(){f.attachToControl(a)};a.addEventListener("load",b);"complete"==a.contentDocument.readyState&&window.setTimeout(b,1)}else this.attachToControl(a)};this._MutationRemovalObserved=function(a){this.keyman.util.device.touchable&&this.disableTouchElement(a);this.disableInputElement(a);this.clearElementAttachment(a)};this.enableControl=
function(a){this.isAttached(a)||console.warn("KeymanWeb is not attached to element "+a);var f=a.className;0<=f.indexOf("kmw-disabled")&&(a.className=f.replace("kmw-disabled","").trim())};this._WindowLoad=function(a){document.body.scrollTop=0;"undefined"!=typeof document.documentElement&&(document.documentElement.scrollTop=0)}.bind(this);this._WindowUnload=function(){this.keyman.uiManager.doUnload();this.keyman.osk.ready&&this.keyman.osk._Unload();this.clearLastActiveElement()}.bind(this);this.init=
function(a){var e,b=this.keyman.osk;var c=this.keyman.util;var h=c.device,f=function(b){if(0==b.length)return b;"/"!=b.substr(b.length-1,1)&&(b+="/");return"http"==b.replace(/^(http)s?:.*/,"$1")||"file"==b.replace(/^(file):.*/,"$1")?b:"//"==b.substr(0,2)?this.keyman.protocol+b:"/"==b.substr(0,1)?this.keyman.rootPath+b.substr(1):this.keyman.srcPath+b}.bind(this);var m=this.keyman.options;if("object"==typeof a&&null!==a)for(e in m)a.hasOwnProperty(e)&&(m[e]=a[e]);""!=m.root&&(this.keyman.rootPath=f(m.root));
""==m.resources&&(m.resources=this.keyman.srcPath);m.resources=f(m.resources);m.keyboards=f(m.keyboards);m.fonts=f(m.fonts);""==m.attachType&&(m.attachType="auto");this.keyman.setDefaultDeviceOptions(m);if(this.keyman.initialized)return Promise.resolve();var d=this.keyman,g=this;if("complete"!==document.readyState)return new Promise(function(b){window.setTimeout(function(){g.init(a).then(function(){b()})},50)});this.keyman._MasterDocument=window.document;"Android"==h.OS&&(m=h.getDPI(),h.formFactor=
screen.height<4*m||screen.width<4*m?"phone":"tablet");this.keyman.setInitialized(1);b.prepare();c.prepareWait();this.keyman.keyboardManager.registerDeferredStubs();this.initializeUI();this.keyman.keyboardManager.registerDeferredKeyboards();if(this.keyman.isEmbedded)return this.keyman.keyboardManager.setDefaultKeyboard()||console.error("No keyboard stubs exist - cannot initialize keyboard!"),Promise.resolve();this.keyman.appliedFont=this.keyman.baseFont=this.getBaseFont();h.touchable&&this.keyman.handleRotationEvents();
"manual"!=this.keyman.options.attachType&&this._SetupDocument(document.documentElement);this.listInputs();h.touchable&&(b._Box.addEventListener("touchend",function(b){b.stopPropagation()},!1),c=document.createElement("DIV"),m=c.style,m.width="100%",m.height=screen.width/2+"px",document.body.appendChild(c),"Android"==h.OS&&0<navigator.userAgent.indexOf("Chrome")?(this.keyman.hideOskWhileScrolling=function(c){if("undefined"!=typeof b._Box&&"undefined"!=typeof b._Box.style){e=c.target.parentNode;if("undefined"!=
typeof e&&null!=e&&(0<=e.className.indexOf("keymanweb-input")||0<=e.className.indexOf("kmw-key-")||"undefined"!=typeof e.parentNode&&(e=e.parentNode,0<=e.className.indexOf("keymanweb-input")||0<=e.className.indexOf("kmw-key-"))))return;b.hideNow()}},this.keyman.util.attachDOMEvent(document.body,"touchstart",this.keyman.hideOskWhileScrolling,!1)):(this.keyman.conditionallyHideOsk=function(){d.hideOnRelease&&!b.lgList&&b.hideNow();d.hideOnRelease=!1},this.keyman.hideOskIfOnBody=function(b){d.touchY=
b.touches[0].screenY;d.hideOnRelease=!0},this.keyman.cancelHideIfScrolling=function(b){b=b.touches[0].screenY;var c=d.touchY;if(5<b-c||5>c-b)d.hideOnRelease=!1},this.keyman.util.attachDOMEvent(document.body,"touchstart",this.keyman.hideOskIfOnBody,!1),this.keyman.util.attachDOMEvent(document.body,"touchmove",this.keyman.cancelHideIfScrolling,!1),this.keyman.util.attachDOMEvent(document.body,"touchend",this.keyman.conditionallyHideOsk,!1)));this.keyman.keyboardManager.restoreCurrentKeyboard();MutationObserver?
(h=document.querySelector("body"),"manual"!=this.keyman.options.attachType&&(c={childList:!0,subtree:!0},this.attachmentObserver=new MutationObserver(this._AutoAttachObserverCore),this.attachmentObserver.observe(h,c)),c={subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["class","readonly"]},this.enablementObserver=new MutationObserver(this._EnablementMutationObserverCore),this.enablementObserver.observe(h,c)):console.warn("Your browser is outdated and does not support MutationObservers, a web feature needed by KeymanWeb to support dynamically-added elements.");
this.keyman.setInitialized(2);return Promise.resolve()}.bind(this);this.keyman=e;e.util.device.touchable&&(this.touchHandlers=new a.DOMTouchHandlers(e));this.nonTouchHandlers=new a.DOMEventHandlers(e)}d.prototype.shutdown=function(){this.enablementObserver&&this.enablementObserver.disconnect();this.attachmentObserver&&this.attachmentObserver.disconnect();for(var a=0,f=this.inputList;a<f.length;a++)this.disableInputElement(f[a])};d.prototype.getHandlers=function(a){return(a=a.base?a.base._kmwAttachment:
a._kmwAttachment)?a.touchEnabled?this.touchHandlers:this.nonTouchHandlers:this.keyman.touchAliasing};d.prototype.enableTouchElement=function(a){if("iframe"==a.tagName.toLowerCase())return!1;if(this.isKMWDisabled(a))return this.setupNonKMWTouchElement(a),!1;a.kmwInput=!0;a.removeEventListener("touchstart",this.nonKMWTouchHandler);if(a.kmw_ip){if(-1!=this.inputList.indexOf(a.kmw_ip))return!1;this.inputList.push(a.kmw_ip);console.log("Unexpected state - this element's simulated input DIV should have been removed from the page!");
return!0}var f=document.createElement("div");f.base=f.base=a;f._kmwAttachment=a._kmwAttachment;this.enableInputElement(f,!0);a.kmw_ip=f;a.disabled=!0;f.className="keymanweb-input";f.dir=f.base.dir;var e=document.createElement("div");var b=window.getComputedStyle(f.base,null);a=f.style;a.overflow="hidden";a.position="absolute";a.border="hidden";a.border="none";a.borderRadius="5px";var c=document.createElement("div");var h=c.style;h.position="absolute";h.height=h.width="4px";h.left=h.top="0";h.display=
"block";h.visibility="hidden";h.backgroundColor="#808080";h.borderRadius="2px";h=document.createElement("span");var q=document.createElement("span");var m=document.createElement("span");h.innerHTML=q.innerHTML=m.innerHTML="";h.className=q.className=m.className="keymanweb-font";e.appendChild(h);e.appendChild(m);e.appendChild(q);f.appendChild(e);f.appendChild(c);e=e.style;e.position="absolute";c=h.style;var d=q.style;m=m.style;c.border=d.border="none";c.height=d.height="100%";c.fontFamily=d.fontFamily=
e.fontFamily=b.fontFamily;"input"!=f.base.nodeName.toLowerCase()||isNaN(parseInt(b.height,10))||(c.lineHeight=d.lineHeight=b.height);m.border="1px solid red";m.visibility="hidden";m.marginLeft=m.marginRight="-1px";a.padding="8px";e.padding="0px 2px";e.backgroundColor="Android"==this.keyman.util.device.OS&&"transparent"==b.backgroundColor?"#fff":b.backgroundColor;f.tabIndex=0;f.style.msTouchAction="none";var g=this.touchHandlers;f.addEventListener("touchstart",g.setFocus);f.onmspointerdown=function(b){b.preventDefault();
b.stopPropagation();return g.setFocus(b)};f.addEventListener("touchend",function(b){b.stopPropagation()});f.onmspointerup=function(b){b.stopPropagation()};f.addEventListener("touchmove",g.dragInput,!1);f.onmspointermove=g.dragInput;f.onblur=g.setBlur;"textarea"==f.base.nodeName.toLowerCase()?h.style.whiteSpace=q.style.whiteSpace="pre-wrap":h.style.whiteSpace=q.style.whiteSpace="pre";f.base.parentNode.appendChild(f);g.updateInput(f);a=f.style;a.color=b.color;a.fontFamily=b.fontFamily;a.fontSize=b.fontSize;
a.fontWeight=b.fontWeight;a.textDecoration=b.textDecoration;a.padding=b.padding;a.margin=b.margin;a.border=b.border;a.borderRadius=b.borderRadius;"webkitTapHighlightColor"in a&&(a.webkitTapHighlightColor="rgba(0,0,0,0)");f.base instanceof f.base.ownerDocument.defaultView.HTMLTextAreaElement?(2==f.base.rows&&(h=parseInt(b.height,10)-parseInt(b.paddingTop,10)-parseInt(b.paddingBottom,10),b=parseInt(b.fontSize,10),b=Math.round(h/b),b>f.base.rows+1&&(f.base.rows=b)),e.width=a.width,e.minHeight=a.height):
(e.minWidth=a.width,e.height=a.height);f.base.style.visibility="hidden";(function(b){b._kmwResizeHandler=function(a){window.setTimeout(function(){g.updateInput(b)},1)};b.base.addEventListener("resize",b._kmwResizeHandler,!1);b.base.addEventListener("orientationchange",b._kmwResizeHandler,!1)})(f);g.setText(f,f.base instanceof f.base.ownerDocument.defaultView.HTMLTextAreaElement||f.base instanceof f.base.ownerDocument.defaultView.HTMLInputElement?f.base.value:f.base.textContent,null);return!0};d.prototype.disableTouchElement=
function(a){if("iframe"!=a.tagName.toLowerCase()){if(a.kmw_ip){var f=this.inputList.indexOf(a.kmw_ip);-1!=f&&this.inputList.splice(f,1);a.style.visibility="visible";a.disabled=!1;a.removeEventListener("resize",a.kmw_ip._kmwResizeHandler);this.disableInputElement(a.kmw_ip);a.parentNode&&a.parentNode.removeChild(a.kmw_ip);delete a.kmw_ip}this.setupNonKMWTouchElement(a)}};d.prototype.setupNonKMWTouchElement=function(a){this.keyman.util.attachDOMEvent(a,"touchstart",this.nonKMWTouchHandler,!1);this.isAttached(a)&&
(a._kmwAttachment.touchEnabled=!1)};d.prototype.enableInputElement=function(a,f){f=f?a.base:a;this.isKMWDisabled(f)||(a instanceof a.ownerDocument.defaultView.HTMLIFrameElement?this._AttachToIframe(a):(f.className=f.className?f.className+" keymanweb-font":"keymanweb-font",this.inputList.push(a),this.keyman.util.attachDOMEvent(f,"focus",this.getHandlers(a)._ControlFocus),this.keyman.util.attachDOMEvent(f,"blur",this.getHandlers(a)._ControlBlur),a.onkeypress=this.getHandlers(a)._KeyPress,a.onkeydown=
this.getHandlers(a)._KeyDown,a.onkeyup=this.getHandlers(a)._KeyUp))};d.prototype.disableInputElement=function(a,f){var e=f?a.base:a;if(a instanceof a.ownerDocument.defaultView.HTMLIFrameElement)this._DetachFromIframe(a);else{0<e.className.indexOf("keymanweb-font")&&!f&&(e.className=e.className.replace("keymanweb-font","").trim());var b=this.inputList.indexOf(a);-1<b&&this.inputList.splice(b,1);f||(this.keyman.util.detachDOMEvent(e,"focus",this.getHandlers(a)._ControlFocus),this.keyman.util.detachDOMEvent(e,
"blur",this.getHandlers(a)._ControlBlur));a.onkeypress=null;a.onkeydown=null;a.onkeyup=null}f&&(this.inputList.push(e),e.onkeypress=this.getHandlers(a)._KeyPress,e.onkeydown=this.getHandlers(a)._KeyDown,e.onkeyup=this.getHandlers(a)._KeyUp);f=this.getLastActiveElement();if(f==a||f==a.kmw_ip)this.clearLastActiveElement(),this.keyman.keyboardManager.setActiveKeyboard(this.keyman.globalKeyboard,this.keyman.globalLanguageCode),this.keyman.osk._Hide()};d.prototype.isKMWDisabled=function(a){var f=a.className;
return a.readOnly||f&&0<=f.indexOf("kmw-disabled")?!0:!1};d.prototype.attachToControl=function(a){var f=this.keyman.util.device.touchable;if(!this.isAttached(a)||a instanceof a.ownerDocument.defaultView.HTMLIFrameElement)this.isKMWInput(a)?(this.setupElementAttachment(a),this.isKMWDisabled(a)?f&&this.setupNonKMWTouchElement(a):f?this.enableTouchElement(a):this.enableInputElement(a)):f&&this.setupNonKMWTouchElement(a)};d.prototype.detachFromControl=function(a){this.isAttached(a)&&(this.isKMWInput(a)&&
(this.isKMWDisabled(a)||this._DisableControl(a)),this.clearElementAttachment(a))};d.prototype.isAttached=function(a){return a._kmwAttachment?!0:!1};d.prototype.isKMWInput=function(a){var f=this.keyman.util.device.touchable;if(a instanceof a.ownerDocument.defaultView.HTMLTextAreaElement)return!0;if(a instanceof a.ownerDocument.defaultView.HTMLInputElement){if("text"==a.type||"search"==a.type)return!0}else if(a instanceof a.ownerDocument.defaultView.HTMLIFrameElement&&!f)try{if(a.contentWindow.document)return!0}catch(l){}else if(a.isContentEditable&&
!f)return!0;return!1};d.prototype.setupElementAttachment=function(e){e._kmwAttachment||(e._kmwAttachment=new a.AttachmentInfo(null,this.keyman.util.device.touchable))};d.prototype.clearElementAttachment=function(a){a._kmwAttachment=null};d.prototype._AttachToIframe=function(a){var f=this.keyman.util;try{var e=a.contentWindow.document;e&&("on"==e.designMode.toLowerCase()?(f.attachDOMEvent(e,"focus",this.getHandlers(a)._ControlFocus),f.attachDOMEvent(e,"blur",this.getHandlers(a)._ControlBlur),f.attachDOMEvent(e,
"keydown",this.getHandlers(a)._KeyDown),f.attachDOMEvent(e,"keypress",this.getHandlers(a)._KeyPress),f.attachDOMEvent(e,"keyup",this.getHandlers(a)._KeyUp)):this._SetupDocument(e))}catch(b){}};d.prototype._DetachFromIframe=function(a){var f=this.keyman.util;try{var e=a.contentWindow.document;e&&("on"==e.designMode.toLowerCase()?(f.detachDOMEvent(e,"focus",this.getHandlers(a)._ControlFocus),f.detachDOMEvent(e,"blur",this.getHandlers(a)._ControlBlur),f.detachDOMEvent(e,"keydown",this.getHandlers(a)._KeyDown),
f.detachDOMEvent(e,"keypress",this.getHandlers(a)._KeyPress),f.detachDOMEvent(e,"keyup",this.getHandlers(a)._KeyUp)):this._ClearDocument(e))}catch(b){}};d.prototype._GetDocumentEditables=function(a){var f=this.keyman.util,e=[];if(a.ownerDocument&&a instanceof a.ownerDocument.defaultView.HTMLElement){var b=a.ownerDocument.defaultView;a instanceof b.HTMLInputElement||a instanceof b.HTMLTextAreaElement?e.push(a):a instanceof b.HTMLIFrameElement&&e.push(a)}a.getElementsByTagName&&(e=e.concat(f.arrayFromNodeList(a.getElementsByTagName("INPUT")),
f.arrayFromNodeList(a.getElementsByTagName("TEXTAREA")),f.arrayFromNodeList(a.getElementsByTagName("IFRAME"))));a.querySelectorAll&&(e=e.concat(f.arrayFromNodeList(a.querySelectorAll("[contenteditable]"))));a.ownerDocument&&a instanceof a.ownerDocument.defaultView.HTMLElement&&a.isContentEditable&&e.push(a);return e};d.prototype._SetupDocument=function(a){a=this._GetDocumentEditables(a);for(var f=0;f<a.length;f++)this.attachToControl(a[f])};d.prototype._ClearDocument=function(a){a=this._GetDocumentEditables(a);
for(var f=0;f<a.length;f++)this.detachFromControl(a[f])};d.prototype._SetTargDir=function(a){var f=this.keyman.keyboardManager.isRTL()?"rtl":"ltr";a&&(this.keyman.util.device.touchable?0==a.textContent.length&&(a.base.dir=a.dir=f,this.getHandlers(a).setTextCaret(a,1E4)):a instanceof a.ownerDocument.defaultView.HTMLInputElement||a instanceof a.ownerDocument.defaultView.HTMLTextAreaElement?0==a.value.length&&(a.dir=f):"string"==typeof a.textContent&&0==a.textContent.length&&(a.dir=f))};d.prototype._DisableControl=
function(a){this.isAttached(a)&&(this.keyman.util.device.touchable?(this.disableTouchElement(a),this.setupNonKMWTouchElement(a),window.setTimeout(function(){this.listInputs();for(var f=0;f<this.sortedInputs.length;f++)this.sortedInputs[f].kmw_ip&&this.getHandlers(a).updateInput(this.sortedInputs[f].kmw_ip)}.bind(this),1)):this.listInputs(),this.disableInputElement(a))};d.prototype._EnableControl=function(a){if(this.isAttached(a))if(this.keyman.util.device.touchable){this.enableTouchElement(a);var f=
this.keyman;window.setTimeout(function(){f.domManager.listInputs();for(var e=0;e<this.sortedInputs.length;e++)this.sortedInputs[e].kmw_ip&&this.getHandlers(a).updateInput(this.sortedInputs[e].kmw_ip)}.bind(this),1)}else this.enableInputElement(a)};d.prototype.listInputs=function(){var a,f=[],d=document.getElementsByTagName("input"),b=document.getElementsByTagName("textarea"),c=this.keyman.util;for(a=0;a<d.length;a++)switch(d[a].type){case "text":case "search":case "email":case "url":0>d[a].className.indexOf("kmw-disabled")&&
f.push({ip:d[a],x:c._GetAbsoluteX(d[a]),y:c._GetAbsoluteY(d[a])})}for(a=0;a<b.length;a++)0>b[a].className.indexOf("kmw-disabled")&&f.push({ip:b[a],x:c._GetAbsoluteX(b[a]),y:c._GetAbsoluteY(b[a])});f.sort(function(a,b){return a.y!=b.y?a.y-b.y:a.x-b.x});d=[];for(a=0;a<f.length;a++)d.push(f[a].ip);this.sortedInputs=d};d.prototype.disableControl=function(a){this.isAttached(a)||console.warn("KeymanWeb is not attached to element "+a);var f=a.className;0>f.indexOf("kmw-disabled")&&(a.className=f?f+" kmw-disabled":
"kmw-disabled")};d.prototype.setKeyboardForControl=function(a,f,d){null!==f&&void 0!==f?0>f.indexOf("Keyboard_")&&""!=f&&(f="Keyboard_"+f):d=null;if(a instanceof a.ownerDocument.defaultView.HTMLIFrameElement)console.warn("'keymanweb.setKeyboardForControl' cannot set keyboard on iframes.");else if(this.isAttached(a)){a._kmwAttachment.keyboard=f;a._kmwAttachment.languageCode=d;var b=this.getLastActiveElement();!b||b!=a&&b!=a.kmw_ip||(null!=f&&null!=d?this.keyman.keyboardManager.setActiveKeyboard(f,
d):this.keyman.keyboardManager.setActiveKeyboard(this.keyman.globalKeyboard,this.keyman.globalLanguageCode))}else console.error("KeymanWeb is not attached to element "+a)};d.prototype.getKeyboardForControl=function(a){if(this.isAttached(a))return a._kmwAttachment.keyboard;console.error("KeymanWeb is not attached to element "+a);return null};d.prototype.getLanguageForControl=function(a){if(this.isAttached(a))return a._kmwAttachment.languageCode;console.error("KeymanWeb is not attached to element "+
a);return null};d.prototype.focusLastActiveElement=function(){var a=this.getLastActiveElement();a&&(this.keyman.uiManager.justActivated=!0,a.ownerDocument&&a instanceof a.ownerDocument.defaultView.HTMLIFrameElement&&this.keyman.domManager._IsMozillaEditableIframe(a,0)?a.ownerDocument.defaultView.focus():a.focus&&a.focus())};d.prototype.getLastActiveElement=function(){return a.DOMEventHandlers.states.lastActiveElement};d.prototype.clearLastActiveElement=function(){a.DOMEventHandlers.states.lastActiveElement=
null};d.prototype.getActiveElement=function(){return a.DOMEventHandlers.states.activeElement};d.prototype._setActiveElement=function(e){a.DOMEventHandlers.states.activeElement=e};d.prototype.setActiveElement=function(e,f){"string"==typeof e&&(e=document.getElementById(e));this.isAttached(e)||this.keyman.isEmbedded?(e=e.kmw_ip?e.kmw_ip:e,this.keyman.isEmbedded||this.keyman.touchAliasing._BlurKeyboardSettings(),a.DOMEventHandlers.states.activeElement!=e&&this.keyman.interface.resetContext(),a.DOMEventHandlers.states.activeElement=
a.DOMEventHandlers.states.lastActiveElement=e,this.keyman.isEmbedded||this.keyman.touchAliasing._FocusKeyboardSettings(!1),1<arguments.length&&f&&(this.keyman.util.device.touchable?this.keyman.touchAliasing.setFocus():this.focusLastActiveElement())):console.warn("Cannot set an element KMW is not attached to as the active element.")};d.prototype.initActiveElement=function(e){null==a.DOMEventHandlers.states.activeElement&&(a.DOMEventHandlers.states.activeElement=e)};d.prototype.moveToNext=function(e){var f,
d=this.sortedInputs,b=this.getActiveElement(),c=this.keyman.util.device.touchable;if(0!=d.length){c&&(b=b.base);for(f=0;f<d.length&&d[f]!=b;f++);f=e?f-1:f+1;f=f>=d.length?f-d.length:f;f=0>f?f+d.length:f;c?(a.DOMEventHandlers.states.focusing=!0,e=d[f].kmw_ip,"undefined"==typeof e?d[f].focus():(this.keyman.domManager.setActiveElement(e),this.touchHandlers.setTextCaret(e,1E4),this.touchHandlers.scrollInput(e),e.focus())):d[f].focus()}};d.prototype.moveToElement=function(a){"string"==typeof a&&(a=document.getElementById(a));
this.keyman.util.device.touchable&&a.kmw_ip?a.kmw_ip.focus():a.focus()};d.prototype._IsIEEditableIframe=function(a,f){var e,b=a&&(e=a.tagName)&&"body"==e.toLowerCase()&&(e=a.ownerDocument)&&e.parentWindow;return!f&&b||f&&(!b||a.isContentEditable)};d.prototype._IsMozillaEditableIframe=function(a,f){var e;a=a&&(e=a.defaultView)&&e.frameElement;return!f&&a||f&&(!a||"on"==e.document.designMode.toLowerCase())};d.prototype.getBaseFont=function(){var a=this.keyman.util,f=document.getElementsByTagName("input"),
d=document.getElementsByTagName("textarea"),b=0;if(0==f.length&&0==d.length)b=0;else if(0<f.length&&0==d.length)b=1;else if(0==f.length&&0<d.length)b=2;else{var c=f[0],h=d[0];c.offsetTop<h.offsetTop?b=1:c.offsetTop>h.offsetTop?b=2:c.offsetLeft<h.offsetLeft?b=1:c.offsetLeft>h.offsetLeft&&(b=2)}switch(b){case 0:case 1:a.getStyleValue(f[0],"font-family");case 2:var q=a.getStyleValue(d[0],"font-family")}if("undefined"==typeof q||"monospace"==q)q="Arial,sans-serif";return q};d.prototype.initializeUI=function(){this.keyman.ui&&
this.keyman.ui.initialize instanceof Function?(this.keyman.ui.initialize(),this.keyman.osk._Show()):window.setTimeout(this.initializeUI.bind(this),1E3)};return d}();a.DOMManager=d})(d.keyman||(d.keyman={}))})(com||(com={}));
(function(d){(function(a){var d=function(){function a(){this.touchable=!!("ontouchstart"in window);this.OS="";this.formFactor="desktop";this.dyLandscape=this.dyPortrait=0;this.version="0";this.orientation=window.orientation;this.browser=""}a.prototype.getDPI=function(){var a=document.createElement("DIV"),f=a.style,d=96;if("complete"!==document.readyState)return d;a.id="calculateDPI";f.position="absolute";f.display="block";f.visibility="hidden";f.left="10px";f.top="10px";f.width="1in";f.height="10px";
document.body.appendChild(a);d="undefined"==typeof window.devicePixelRatio?a.offsetWidth:a.offsetWidth*window.devicePixelRatio;document.body.removeChild(a);return d};a.prototype.detect=function(){var d=a._GetIEVersion();if(navigator&&navigator.userAgent){var f=navigator.userAgent;if(0<=f.indexOf("iPad"))this.OS="iOS",this.formFactor="tablet",this.dyPortrait=this.dyLandscape=0;else if(0<=f.indexOf("iPhone"))this.OS="iOS",this.formFactor="phone",this.dyPortrait=this.dyLandscape=25;else if(0<=f.indexOf("Android")){this.OS=
"Android";this.formFactor="phone";this.dyPortrait=75;this.dyLandscape=25;try{this.version=f.match(/(?:Android\s+)(\d+\.\d+\.\d+)/)[1]}catch(l){}}else 0<=f.indexOf("Linux")?this.OS="Linux":0<=f.indexOf("Macintosh")?this.OS="MacOSX":0<=f.indexOf("Windows NT")&&(this.OS="Windows",0<=f.indexOf("Touch")&&(this.formFactor="phone"),"number"==typeof navigator.msMaxTouchPoints&&0<navigator.msMaxTouchPoints&&(this.touchable=!0))}"tablet"==this.formFactor&&400>Math.min(screen.width,screen.height)&&(this.formFactor=
"phone");"phone"==this.formFactor&&720<Math.max(screen.width,screen.height)&&"iOS"!=this.OS&&(this.formFactor="tablet");"iOS"!=this.OS||"ongesturestart"in window||"Win32"==navigator.platform||(this.OS="Android");this.browser="web";if(999>d)this.browser="ie";else{if("iOS"==this.OS||"macosx"==this.OS.toLowerCase())this.browser="safari";/Firefox|Chrome|OPR|Safari|Edge/.test(navigator.userAgent)&&(0<=navigator.userAgent.indexOf("Firefox")&&"onmozorientationchange"in screen?this.browser="firefox":0<=navigator.userAgent.indexOf("OPR")?
this.browser="opera":0<=navigator.userAgent.indexOf(" Edge/")?this.browser="edge":0<=navigator.userAgent.indexOf("Chrome")?this.browser="chrome":0<=navigator.userAgent.indexOf("Safari")&&(this.browser="safari"))}};a._GetIEVersion=function(){var a="";"userAgent"in navigator&&(a=navigator.userAgent);if("selection"in document){var f=navigator.appVersion;var d=f.indexOf("MSIE ");if(0<=d){if("BackCompat"==document.compatMode)return 6;f=f.substr(d+5);d=f.indexOf(".");if(0<d)return parseInt(f.substr(0,d),
10)}}d=a.indexOf("Trident/");if(0>d)return 999;a=a.substr(d+8);d=a.indexOf(".");return 0<d?parseInt(a.substr(0,d),10)+4:999};return a}();a.Device=d})(d.keyman||(d.keyman={}))})(com||(com={}));
(function(d){(function(a){var d=function(){function a(a,d,b,c){this.Pelem=a;this.Peventname=d.toLowerCase();this.Phandler=b;this.PuseCapture=c}a.prototype.equals=function(a){return this.Pelem==a.Pelem&&this.Peventname==a.Peventname&&this.Phandler==a.Phandler&&this.PuseCapture==a.PuseCapture};return a}(),k=function(){function e(a){this.linkedStylesheets=[];this.events={};this.currentEvents=[];this.domEvents=[];this.embeddedFonts=[];this.getAbsoluteX=this._GetAbsoluteX;this.getAbsoluteY=this._GetAbsoluteY;
this.getAbsolute=this._GetAbsolute;this.selectStartHandler=function(){return!1};this.createElement=this._CreateElement;this.initDevices();this.keyman=a}e.prototype.getLanguageCodes=function(a){return-1==a.indexOf("-")?[a]:a.split("-")};e.prototype.initDevices=function(){this.device=new a.Device;this.physicalDevice=new a.Device;this.activeDevice=this.device;this.device.detect();"desktop"==this.device.formFactor&&(this.device.touchable=!1);this.physicalDevice=new a.Device;this.physicalDevice.touchable=
!1;this.physicalDevice.browser=this.device.browser;this.physicalDevice.formFactor="desktop";this.physicalDevice.OS=this.device.OS};e.prototype.arrayFromNodeList=function(a){for(var f=[],b=0;b<a.length;b++)f.push(a[b]);return f};e.prototype.addEventListener=function(a,d){this.removeEventListener(a,d);this.events[a].push(d);return!0};e.prototype.removeEventListener=function(a,d){"undefined"==typeof this.events[a]&&(this.events[a]=[]);for(var b=0;b<this.events[a].length;b++)if(this.events[a][b]==d)return this.events[a].splice(b,
1),!0;return!1};e.prototype.callEvent=function(a,d){if("undefined"==typeof this.events[a])return!0;if(-1!=this.currentEvents.indexOf(a))return!1;this.currentEvents.push(a);for(var b=0;b<this.events[a].length;b++){var c=this.events[a][b],h=!1;try{h=c(d)}catch(q){h=!1}if(!1===h)return this.currentEvents.pop(),!1}this.currentEvents.pop();return!0};e.prototype.attachDOMEvent=function(a,e,b,c){this.detachDOMEvent(a,e,b,c);a.addEventListener(e,b,c?!0:!1);a=new d(a,e,b,c);this.domEvents.push(a)};e.prototype.detachDOMEvent=
function(a,e,b,c){a.removeEventListener(e,b,c);a=new d(a,e,b,c);for(e=0;e<this.domEvents.length;e++)if(this.domEvents[e].equals(a)){this.domEvents.splice(e,1);break}};e.prototype.getOption=function(a,d){return a in this.keyman.options?this.keyman.options[a]:1<arguments.length?d:""};e.prototype.setOption=function(a,d){this.keyman.options[a]=d};e.prototype._GetAbsoluteX=function(a){if(!a)return 0;var f=a.offsetLeft?a.offsetLeft:0;var b=a;if(b.offsetParent)for(;b.offsetParent;)b=b.offsetParent,f+=b.offsetLeft;
return b&&b.ownerDocument&&a.ownerDocument!=this.keyman._MasterDocument&&(a=b.ownerDocument)&&a.defaultView&&a.defaultView.frameElement?f+this._GetAbsoluteX(a.defaultView.frameElement)-a.documentElement.scrollLeft:f};e.prototype._GetAbsoluteY=function(a){if(!a)return 0;var f=a.offsetTop?a.offsetTop:0;var b=a;if(b.ownerDocument&&b instanceof b.ownerDocument.defaultView.HTMLElement)for(;b.offsetParent;)b=b.offsetParent,f+=b.offsetTop;return b&&b.ownerDocument&&a.ownerDocument!=this.keyman._MasterDocument&&
(a=b.ownerDocument)&&a.defaultView&&a.defaultView.frameElement?f+this._GetAbsoluteY(a.defaultView.frameElement)-a.documentElement.scrollTop:f};e.prototype._GetAbsolute=function(a){return{x:this._GetAbsoluteX(a),y:this._GetAbsoluteY(a)}};e.prototype.mouseDownPreventDefaultHandler=function(a){a&&a.preventDefault()};e.prototype._CreateElement=function(a){a=document.createElement(a);"undefined"!=typeof a.onselectstart?a.onselectstart=this.selectStartHandler:(a.style.MozUserSelect="none",a.style.KhtmlUserSelect=
"none",a.style.UserSelect="none",a.style.WebkitUserSelect="none");return a};e.prototype.getIEVersion=function(){return a.Device._GetIEVersion()};e.prototype.getFontSizeStyle=function(a){a="string"==typeof a?a:a.style.fontSize;return-1!=a.indexOf("em")?(a=parseFloat(a.substr(0,a.indexOf("em"))),{val:a,absolute:!1}):-1!=a.indexOf("px")?(a=parseFloat(a.substr(0,a.indexOf("px"))),{val:a,absolute:!0}):-1!=a.indexOf("%")?(a=parseFloat(a.substr(0,a.indexOf("%"))),{val:a/100,absolute:!1}):null};e.prototype.getStyleValue=
function(a,d){try{if(a&&"undefined"!=typeof window.getComputedStyle)return window.getComputedStyle(a,"").getPropertyValue(d)}catch(b){}return""};e.prototype.getStyleInt=function(a,d,b){a=parseInt(this.getStyleValue(a,d),10);return isNaN(a)?"number"==typeof b?b:0:a};e.prototype.isTouchDevice=function(){return this.device.touchable};e.prototype.portraitView=function(){return!this.landscapeView()};e.prototype.landscapeView=function(){if("undefined"!=typeof window.orientation)var a=window.orientation;
else"undefined"!=typeof window.screen.orientation&&(a=window.screen.orientation.angle);return void 0!==a?1==Math.abs(a/90):!1};e.prototype.getViewportScale=function(){try{if(screen.width>document.documentElement.clientWidth)return 1;var a=screen.width;this.landscapeView()?screen.width<screen.height&&(a=screen.height):screen.width>screen.height&&(a=screen.height);return Math.round(100*a/window.innerWidth)/100}catch(l){return 1}};e.prototype.barHeight=function(){var a=0;"phone"==this.device.formFactor&&
(a=screen.height/2-window.innerHeight-(this.landscapeView()?this.device.dyLandscape:this.device.dyPortrait));return a};e.prototype._EncodeEntities=function(a){return a.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")};e.prototype.createShim=function(){console.warn("The util.createShim function is deprecated, as its old functionality is no longer needed.  It and references to its previously-produced shims may be safely removed.")};e.prototype.showShim=function(a,d,b){console.warn("The util.showShim function is deprecated, as its old functionality is no longer needed.  It may be safely removed.")};
e.prototype.hideShim=function(a){console.warn("The util.hideShim function is deprecated, as its old functionality is no longer needed.  It may be safely removed.")};e.prototype.rgba=function(a,d,b,c,h){a="transparent";try{a="rgba("+d+","+b+","+c+","+h+")"}catch(q){a="rgb("+d+","+b+","+c+")"}return a};e.prototype.addStyleSheet=function(a){var f=document.createElement("style");f.type="text/css";f.appendChild(document.createTextNode(a));a=document.getElementsByTagName("HEAD");0<a.length?a[0].appendChild(f):
document.body.appendChild(f);this.linkedStylesheets.push(f);return f};e.prototype.removeStyleSheet=function(a){if(null==a||"object"!=typeof a||"STYLE"!=a.nodeName||"undefined"==typeof a.parentNode||null==a.parentNode)return!1;a.parentNode.removeChild(a);return!0};e.prototype.linkStyleSheet=function(a){var f=document.getElementsByTagName("head");if(0<f.length){var b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=a;this.linkedStylesheets.push(b);f[0].appendChild(b)}};e.prototype.addFontFaceStyleSheet=
function(f){if("undefined"!=typeof f&&("undefined"==typeof f.files&&(f.files=f.source),"undefined"!=typeof f.files)){var d,b="",c="",h="",q="",m=[];for(d=0;d<this.embeddedFonts.length;d++)if(this.embeddedFonts[d]==f.family)return;"string"==typeof f.files?m[0]=f.files:m=f.files;for(d=0;d<m.length;d++)0<m[d].toLowerCase().indexOf(".ttf")&&(b=m[d]),0<m[d].toLowerCase().indexOf(".woff")&&(c=m[d]),0<m[d].toLowerCase().indexOf(".eot")&&(h=m[d]),0<m[d].toLowerCase().indexOf(".svg")&&(q=m[d]);""!=b&&0>b.indexOf("/")&&
(b=this.keyman.options.fonts+b);""!=c&&0>c.indexOf("/")&&(c=this.keyman.options.fonts+c);""!=h&&0>h.indexOf("/")&&(h=this.keyman.options.fonts+h);""!=q&&0>q.indexOf("/")&&(q=this.keyman.options.fonts+q);d="@font-face {\nfont-family:"+f.family+";\nfont-style:normal;\nfont-weight:normal;\n";if(9<=a.Device._GetIEVersion())if("iOS"==this.device.OS)if(""!=b)b=this.unCached(b),d=d+"src:url('"+b+"') format('truetype');";else return;else{h=[];"Android"==this.device.OS?(""!=q&&h.push("url('"+q+"') format('svg')"),
""!=c&&h.push("url('"+c+"') format('woff')"),""!=b&&h.push("url('"+b+"') format('truetype')")):(""!=c&&h.push("url('"+c+"') format('woff')"),""!=b&&h.push("url('"+b+"') format('truetype')"),""!=q&&h.push("url('"+q+"') format('svg')"));if(0==h.length)return;d+="src:"+h.join(",")+";"}else if(""!=h)d=d+"src:url('"+h+"');";else return;this.addStyleSheet(d+"\n}\n");this.embeddedFonts.push(f.family)}};e.prototype.unCached=function(a){return a};e.prototype.loadCookie=function(a){var d={};if(0<arguments.length){var b=
this.loadCookie(),c;for(c in b)if(c==a)for(var h=decodeURIComponent(b[c]).split(";"),f=0;f<h.length;f++){var m=h[f].split("=");d[m[0]]=1<m.length?m[1]:""}}else if("undefined"!=typeof document.cookie&&""!=document.cookie)for(b=document.cookie.split(/;\s*/),f=0;f<b.length;f++)h=b[f].split("="),2==h.length&&(d[h[0]]=h[1]);return d};e.prototype.saveCookie=function(a,d){var b="",c;for(c in d)b=b+c+"="+d[c]+";";d=(new Date((new Date).valueOf()+2592E6)).toUTCString();document.cookie=a+"="+encodeURIComponent(b)+
"; path=/; expires="+d};e.prototype.toNumber=function(a,d){a=parseInt(a,10);return isNaN(a)?d:a};e.prototype.toFloat=function(a,d){a=parseFloat(a);return isNaN(a)?d:a};e.prototype.nzString=function(a,d){var b="";1<arguments.length&&(b=d);return"undefined"==typeof a||null==a||0==a||""==a?b:""+a};e.prototype.deepCopy=function(a,d){d=d||{};for(var b in a)"object"===typeof a[b]?(d[b]=a[b].constructor===Array?[]:{},this.deepCopy(a[b],d[b])):d[b]=a[b];return d};e.prototype.eventTarget=function(a){return a?
a.target?a.target:a.srcElement?a.srcElement:window.event?window.event.srcElement:null:null};e.prototype.eventType=function(a){return a&&a.type?a.type:window.event?window.event.type:""};e.prototype.alert=function(a,d){var b=this.waiting,c=b.firstChild.childNodes;c[0].style.display="block";c[1].className="kmw-alert-text";c[1].innerHTML=a;c[2].style.display="none";b.style.display="block";b.dismiss=1<arguments.length?d:null};e.prototype.wait=function(a){};e.prototype.prepareWait=function(){var a=document.createElement("DIV"),
d=document.createElement("DIV"),b=document.createElement("DIV"),c=document.createElement("DIV"),h=document.createElement("DIV");a.className="kmw-wait-background";d.className="kmw-wait-box";a.dismiss=null;b.className="kmw-wait-text";c.className="kmw-wait-graphic";h.className="kmw-alert-close";d.onmousedown=d.onclick=function(b){"block"==h.style.display&&(a.style.display="none",a.dismiss&&a.dismiss())};d.addEventListener("touchstart",d.onclick,!1);a.onmousedown=a.onclick=function(a){a.preventDefault();
a.stopPropagation()};a.addEventListener("touchstart",a.onclick,!1);d.appendChild(h);d.appendChild(b);d.appendChild(c);a.appendChild(d);document.body.appendChild(a);this.waiting=a};e.prototype.shutdown=function(){this.events={};for(var a=0,d=this.domEvents;a<d.length;a++){var b=d[a];this.detachDOMEvent(b.Pelem,b.Peventname,b.Phandler,b.PuseCapture)}this.waiting.parentNode.removeChild(this.waiting);a=0;for(d=this.linkedStylesheets;a<d.length;a++)b=d[a],b.remove?b.remove():b.parentNode&&b.parentNode.removeChild(b)};
e.prototype.myPath=function(a){var d,b=document.getElementsByTagName("script");for(d=0;d<b.length;d++){var c=b[d];if(0<=c.src.indexOf(a))return c.src.substr(0,c.src.lastIndexOf("/")+1)}return""};e.prototype.prependProtocol=function(a){return/^https?:/.test(a)?a:"//"==a.substr(0,2)?this.keyman.protocol+a:"/"==a.substr(0,1)?this.keyman.protocol+"/"+a:this.keyman.protocol+"//"+a};e.prototype.testString=function(a){var d=a.family;if("sample"in a&&"string"==typeof a.sample)return"BESbswy"+a.sample;var b=
"TamilWeb TibetanWeb LatinWeb CherokeeWeb EgyptianWeb SinhalaWeb KhmerWeb ArabicWeb BurmeseWeb LaoWeb OriyaWeb GeezWeb".split(" "),c="\u0bbe\u0bf5 \u0f7f\u0fd0 \u02b0\u02a4 \u13d0\u13c9 \ua723\uf7d3 \u0dd8\u0da3 \u17d6\u178e \u0639\u06b3 \u1038\u1024 \u0ec0\u0edd \u0b03\u0b06 \u1361\u132c".split(" ");for(a=0;a<b.length;a++)if(d==b[a])return"BESbswy"+c[a];return"BESbswy"};e.prototype.checkFont=function(a){var d=a.family,b=document.createElement("DIV"),c=b.style,h=document.createElement("P"),q=document.createElement("P"),
m=document.createElement("SPAN"),e=m.style,f=document.createElement("SPAN"),g=f.style;c.position="absolute";c.top="10px";c.left="10px";c.visibility="hidden";document.body.appendChild(b);b.appendChild(h);b.appendChild(q);h.appendChild(m);q.appendChild(f);m.setAttribute("style","font-family:monospace !important");g.fontFamily=d+",monospace";e.fontSize=g.fontSize="24px";m.innerHTML=f.innerHTML=this.testString(a);m.offsetWidth!=f.offsetWidth&&(m.setAttribute("style","font-family:sans-serif !important"),
g.fontFamily=d+",sans-serif",m.offsetWidth!=f.offsetWidth&&(m.setAttribute("style","font-family:serif !important"),g.fontFamily=d+",serif"));a=m.offsetWidth!=f.offsetWidth;h.removeChild(m);q.removeChild(f);b.removeChild(h);b.removeChild(q);document.body.removeChild(b);return a};e.prototype.checkFontDescriptor=function(a){return"undefined"==typeof a||"string"!=typeof a.family?!0:this.checkFont(a)};e.instanceof=function(a,d){var b;if(a.Window)return"Window"==d;a.defaultView?b=a.defaultView[d]:a.ownerDocument?
b=a.ownerDocument.defaultView[d]:a.target&&(this.instanceof(a.target,"Window")?b=a.target[d]:this.instanceof(a.target,"Document")?b=a.target.defaultView[d]:this.instanceof(a.target,"HTMLElement")&&(b=a.target.ownerDocument.defaultView[d]));return b?a instanceof b:!1};return e}();a.Util=k})(d.keyman||(d.keyman={}))})(com||(com={}));var Util=com.keyman.Util;
(function(d){(function(a){(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();(function(){return function(){}})();var d=function(){function a(){}a.prototype.reset=function(){this._cache=[]};a.prototype.get=function(a,b){return"undefined"==typeof this._cache[a]||"undefined"==typeof this._cache[a][b]?null:this._cache[a][b]};a.prototype.set=function(a,b,d){"undefined"==typeof this._cache[a]&&
(this._cache[a]=[]);this._cache[a][b]=d};return a}(),k=function(){function a(){}a.prototype.reset=function(){this._cache=[]};a.prototype.get=function(a,b){return"undefined"==typeof this._cache[a]||"undefined"==typeof this._cache[a][b]?null:this._cache[a][b]};a.prototype.set=function(a,b,d){"undefined"==typeof this._cache[a]&&(this._cache[a]=[]);this._cache[a][b]=d};return a}(),e=function(){function a(b,h){this.p=b;this.d=h;this.o=a.ordinalSeed++}a.prototype.match=function(a,b){return this.p==a&&this.d==
b};a.prototype.set=function(){this.matched=1};a.prototype.reset=function(){this.matched=0};a.prototype.before=function(a){return this.o<a.o};a.ordinalSeed=0;return a}(),f=function(){function a(a){this.e=a;this.c=a.style.backgroundColor}a.prototype.reset=function(){this.e.style.backgroundColor=this.c};return a}(),l=function(){function b(b){this.cachedContext=new d;this.cachedContextEx=new k;this.TSS_LAYER=33;this.TSS_PLATFORM=31;this._AnyIndices=[];this._BeepObjects=[];this._BeepTimeout=0;this._DeadKeys=
[];this._CacheCommands=function(b){var c=[new a.StyleCommand("backcolor",1),new a.StyleCommand("fontname",1),new a.StyleCommand("fontsize",1),new a.StyleCommand("forecolor",1),new a.StyleCommand("bold",0),new a.StyleCommand("italic",0),new a.StyleCommand("strikethrough",0),new a.StyleCommand("subscript",0),new a.StyleCommand("superscript",0),new a.StyleCommand("underline",0)];b.defaultView&&this.keymanweb._push(c,["hilitecolor",1]);for(var h=0;h<c.length;h++)this.keymanweb._push(c[h],c[h][1]?b.queryCommandValue(c[h][0]):
b.queryCommandState(c[h][0]));return c};this._CacheCommandsReset=function(a,b,c){for(var h=0;h<b.length;h++)b[h][1]?a.queryCommandValue(b[h][0])!=b[h][2]&&(c&&c(),a.execCommand(b[h][0],!1,b[h][2])):a.queryCommandState(b[h][0])!=b[h][2]&&(c&&c(),a.execCommand(b[h][0],!1,null))};this.clearDeadkeys=function(){this._DeadKeys=[]};this.keymanweb=b}b.prototype.saveFocus=function(){a.DOMEventHandlers.states._IgnoreNextSelChange=1};b.prototype.insertText=function(b,h){this.resetContextCache();var c=this.keymanweb.domManager.getLastActiveElement();
var d=!1;if(null!=c){d=c._KeymanWebSelectionStart;var e=c._KeymanWebSelectionEnd;this.keymanweb.uiManager.setActivatingUI(!0);a.DOMEventHandlers.states._IgnoreNextSelChange=100;this.keymanweb.domManager.focusLastActiveElement();c.ownerDocument&&c instanceof c.ownerDocument.defaultView.HTMLIFrameElement&&this.keymanweb.domManager._IsMozillaEditableIframe(c,0)&&(c=c.documentElement);c._KeymanWebSelectionStart=d;c._KeymanWebSelectionEnd=e;a.DOMEventHandlers.states._IgnoreNextSelChange=0;null!=b&&this.output(0,
c,b);"undefined"!==typeof h&&null!==h&&this.deadkeyOutput(0,c,h);c._KeymanWebSelectionStart=null;c._KeymanWebSelectionEnd=null;d=!0}return d};b.prototype.registerKeyboard=function(a){this.keymanweb.keyboardManager._registerKeyboard(a)};b.prototype.registerStub=function(a){return this.keymanweb.keyboardManager._registerStub(a)};b.prototype.context=function(a,b,d){var c=this.cachedContext.get(a,b);if(null!==c)return c;d=this.keymanweb.KC_(a,b,d);this.cachedContext.set(a,b,d);return d};b.prototype.nul=
function(a,b){return"\ufffe"===this.context(a+1,1,b)};b.prototype.contextMatch=function(a,b,d,e){if(this.context(a,e,b)===d)return!0;this._DeadkeyResetMatched();return!1};b.prototype._BuildExtendedContext=function(a,b,d){var c=this.cachedContextEx.get(a,b);if(null!==c)return c;c=this.cachedContextEx.get(a,a);if(null===c){this._DeadKeys.sort(function(a,b){return a.p!=b.p?b.p-a.p:b.o-a.o});var h=[].concat(this._DeadKeys),e=0;for(c={valContext:[],deadContext:[]};c.valContext.length<a;){var f=this._SelPos(d)-
e;0<h.length&&h[0].p==f?(c.deadContext[a-c.valContext.length-1]=h[0],c.valContext=[h[0].d].concat(c.valContext),h.splice(0,1)):(f=this.context(++e,1,d),c.valContext=[f].concat(c.valContext))}this.cachedContextEx.set(a,a,c)}d=c;d.valContext=d.valContext.slice(0,b);for(c=0;c<d.valContext.length;c++)"\ufffe"==d[c]&&(d.valContext.splice(0,1),d.deadContext.splice(0,1));0==d.valContext.length&&(d.valContext=["\ufffe"],d.deadContext=[]);this.cachedContextEx.set(a,b,d);return d};b.prototype.fullContextMatch=
function(a,b,d){b=this._BuildExtendedContext(a,d.length,b);a=b.valContext;b=b.deadContext;for(var c=!1,h=0;h<d.length;h++)if("string"==typeof d[h]){if(d[h]!==a[h]){c=!0;break}}else{var e=d[h];switch(e.t){case "d":e.d!==a[h]?c=!0:b[h].set();break;case "a":var f=this.any(h,"string"==typeof a[h]?a[h]:{t:"d",d:a[h]},e.a);e.n?e.n&&(f||"\ufffe"!==a[h])&&(c=!0):f?void 0!==b[h]&&b[h].set():c=!0;break;case "i":e=this._Index(e.i,e.o);void 0!==e&&("string"==typeof e?e:e.d)!==a[h]?c=!0:void 0!==b[h]&&b[h].set();
break;case "c":a[e.c-1]!==a[h]?c=!0:void 0!==b[h]&&b[h].set();break;case "n":"\ufffe"!=a[h]&&(c=!0);break;default:throw Error("Unexpected object in fullContextMatch specification: "+e);}}c&&(this._DeadkeyResetMatched(),this._AnyIndices=[]);return!c};b.prototype.isKeypress=function(a){return this.keymanweb.keyboardManager.activeKeyboard.KM?!a.LisVirtualKey:this.keymanweb.keyMapManager._USKeyCodeToCharCode(a)?!0:!1};b.prototype.keyMatch=function(a,b,d){var c=!1,h=173==a.Lcode?189:a.Lcode,e=this.keymanweb.keyboardManager.getKeyboardModifierBitmask(),
f=e&this.keymanweb.osk.modifierBitmasks.ALL;e&=this.keymanweb.osk.stateBitmasks.ALL;255<a.vkCode&&(h=a.vkCode);if(a.LisVirtualKey||255<h){if(16384==(b&16384)||255<h)c=(c=d==h&&(b&f)==a.Lmodifiers)&&this.stateMatch(a,b&e)}else 0==(b&16384)&&(c=h==d);c||this._DeadkeyResetMatched();return c};b.prototype.stateMatch=function(a,b){return(b&a.Lstates)==b};b.prototype.keyInformation=function(b){var c=new a.KeyInformation;c.vk=b.LisVirtualKey;c.code=b.Lcode;c.modifiers=b.Lmodifiers;return c};b.prototype.deadkeyMatch=
function(a,b,d){if(0==this._DeadKeys.length)return!1;a=this._SelPos(b)-a;for(b=0;b<this._DeadKeys.length;b++)if(this._DeadKeys[b].match(a,d)&&!this._DeadKeys[b].matched)return this._DeadKeys[b].set(),!0;this._DeadkeyResetMatched();return!1};b.prototype.beepReset=function(){this.resetContextCache();var a;for(a=this._BeepTimeout=0;a<this._BeepObjects.length;a++)this._BeepObjects[a].reset();this._BeepObjects=[]};b.prototype.beep=function(a){this.resetContextCache();var b=a;b.defaultView&&a instanceof
b.defaultView.Document&&(a=b.body);if(a.style&&"undefined"!=typeof a.style.backgroundColor){for(b=0;b<this._BeepObjects.length;b++)if(this._BeepObjects[b].e==a)return;this._BeepObjects=this.keymanweb._push(this._BeepObjects,new f(a));a.style.backgroundColor="#000000";0==this._BeepTimeout&&(this._BeepTimeout=1,window.setTimeout(this.beepReset.bind(this),50));"beepKeyboard"in this.keymanweb&&this.keymanweb.beepKeyboard()}};b.prototype._ExplodeStore=function(a){if("string"==typeof a){var b=this.keymanweb.keyboardManager.getActiveKeyboardTag();
if(b.stores[a])return b.stores[a];for(var c=[],d=0;d<a._kmwLength();d++)c.push(a._kmwCharAt(d));return b.stores[a]=c}return a};b.prototype.any=function(a,b,d){if(""==b)return!1;d=this._ExplodeStore(d);for(var c=-1,h=0;h<d.length;h++)if("string"==typeof d[h]){if(d[h]==b){c=h;break}}else if(d[h].d===b.d){c=h;break}this._AnyIndices[a]=c;return 0<=c};b.prototype._Index=function(a,b){a=this._ExplodeStore(a);if(this._AnyIndices[b-1]<a.length)return a[this._AnyIndices[b-1]];console.warn("Unmatched contextual index() statement detected in rule with index "+
b+"!");return""};b.prototype.indexOutput=function(a,b,d,e){this.resetContextCache();b=this._Index(b,d);if(""!==b)if("string"==typeof b)this.output(a,e,b);else if(b.t)switch(b.t){case "b":this.beep(e);break;case "d":this.deadkeyOutput(a,e,b.d);break;default:throw Error("Unexpected object in fullContextMatch specification: "+b);}else this.deadkeyOutput(a,e,b.d)};b.prototype.deleteContext=function(a,b){if(0<a){var c=this._BuildExtendedContext(a,a,b);for(var h=0;h<c.deadContext.length;h++){var d=c.deadContext[h];
d&&(d=this._DeadKeys.indexOf(d),this._DeadKeys.splice(d,1),a--)}}this._DeadkeyResetMatched();this.output(a,b,"")};b.prototype.output=function(b,h,d){this.resetContextCache();if("oninserttext"in this.keymanweb)this.keymanweb.oninserttext(b,d);var c=h.body?h:h.ownerDocument;var e;if(0<=h.className.indexOf("keymanweb-input"))c=this.keymanweb.touchAliasing.getTextBeforeCaret(h),c=0<b?c._kmwSubstr(0,c._kmwLength()-b)+d:c+d,this.keymanweb.touchAliasing.setTextBeforeCaret(h,c),this._DeadkeyDeleteMatched(),
0<=b&&this._DeadkeyAdjustPos(this._SelPos(h),-b+d._kmwLength());else{if(c&&(e=c.defaultView)&&e.getSelection&&("on"==c.designMode.toLowerCase()||"true"==h.contentEditable||"plaintext-only"==h.contentEditable||""===h.contentEditable)){var f="on"==c.designMode.toLowerCase();if(f)var q=this._CacheCommands(c);var g=e.getSelection();e=g.focusNode.nodeValue?g.focusNode.substringData(0,g.focusOffset)._kmwLength():0;g.isCollapsed||g.deleteFromDocument();var l=g.getRangeAt(0);0<b&&(l.setStart(g.focusNode,
g.focusOffset-g.focusNode.nodeValue.substr(0,g.focusOffset)._kmwSubstr(-b).length),l.deleteContents());if(0<d._kmwLength())if(3==g.focusNode.nodeType){l=g.focusOffset;g.focusNode.insertData(g.focusOffset,d);try{g.extend(g.focusNode,l+d.length)}catch(z){g.focusNode.parentNode.scrollIntoView(),g.extend(g.focusNode,l+d.length)}}else{var k=c.createTextNode(d);l.insertNode(k);g.extend(k,d.length)}f&&this._CacheCommandsReset(c,q,null);g.collapseToEnd();0<=b&&(this._DeadkeyDeleteMatched(),this._DeadkeyAdjustPos(e,
-b+d._kmwLength()))}else h.setSelectionRange&&(null!=h._KeymanWebSelectionStart?(e=h._KeymanWebSelectionStart,c=h._KeymanWebSelectionEnd):(e=h.value._kmwCodeUnitToCodePoint(h.selectionStart),c=h.value._kmwCodeUnitToCodePoint(h.selectionEnd)),"textarea"==h.type.toLowerCase()&&"undefined"!=typeof h.scrollTop&&(f=h.scrollTop,g=h.scrollLeft),0>b?(h.value=h.value._kmwSubstring(0,e)+d+h.value._kmwSubstring(c),b=0):h.value=e<b?d+h.value._kmwSubstring(c):h.value._kmwSubstring(0,e-b)+d+h.value._kmwSubstring(c),
0<=b&&(this._DeadkeyDeleteMatched(),this._DeadkeyAdjustPos(e,-b+d._kmwLength())),"undefined"!=typeof f&&(h.scrollTop=f,h.scrollLeft=g),c=e-b+d._kmwLength(),c=h.value._kmwCodePointToCodeUnit(c),h.setSelectionRange(c,c),h._KeymanWebSelectionStart=null,h._KeymanWebSelectionEnd=null);"function"==typeof this.keymanweb.refreshElementContent&&this.keymanweb.refreshElementContent(h)}(0<=b||d)&&h==a.DOMEventHandlers.states.activeElement&&(a.DOMEventHandlers.states.changed=!0)};b.prototype.deadkeyOutput=function(a,
b,d){this.resetContextCache();0<=a&&this.output(a,b,"");this._DeadKeys=[new e(this._SelPos(b),d)].concat(this._DeadKeys)};b.prototype.ifStore=function(a,b,d){d=!0;if(a==this.TSS_LAYER)d=this.keymanweb.osk.layerId===b;else if(a==this.TSS_PLATFORM){var c=b.split(" ");for(a=0;a<c.length;a++)switch(b=c[a].toLowerCase(),b){case "touch":case "hardware":this.keymanweb.util.activeDevice.touchable!=("touch"==b)&&(d=!1);break;case "macos":case "mac":b="macosx";case "macosx":case "windows":case "android":case "ios":case "linux":this.keymanweb.util.activeDevice.OS.toLowerCase()!=
b&&(d=!1);break;case "tablet":case "phone":case "desktop":this.keymanweb.util.device.formFactor!=b&&(d=!1);break;case "web":"native"==this.keymanweb.util.device.browser&&(d=!1);break;case "native":case "ie":case "chrome":case "firefox":case "safari":case "edge":case "opera":this.keymanweb.util.device.browser!=b&&(d=!1);break;default:d=!1}}return d};b.prototype.setStore=function(a,b,d){this.resetContextCache();return a==this.TSS_LAYER?this.keymanweb.osk.showLayer(b):!1};b.prototype.loadStore=function(a,
b,d){this.resetContextCache();a=this.keymanweb.util.loadCookie("KeymanWeb_"+a+"_Option_"+b);return"undefined"!=typeof a[b]?decodeURIComponent(a[b]):d};b.prototype.saveStore=function(a,b){this.resetContextCache();var c=this.keymanweb.keyboardManager.activeKeyboard;if(!c||"undefined"==typeof c.KI||""==c.KI)return!1;a="KeymanWeb_"+c.KI+"_Option_"+a;b=encodeURIComponent(b);this.keymanweb.util.saveCookie(a,b);return!0};b.prototype.resetContextCache=function(){this.cachedContext.reset();this.cachedContextEx.reset()};
b.prototype._DeadkeyResetMatched=function(){for(var a=0,b=this._DeadKeys;a<b.length;a++)b[a].reset()};b.prototype._DeadkeyDeleteMatched=function(){for(var a=this._DeadKeys,b=0;b<a.length;b++)a[b].matched&&a.splice(b--,1)};b.prototype._DeadkeyAdjustPos=function(a,b){for(var c=0,h=this._DeadKeys;c<h.length;c++){var d=h[c];d.p>a&&(d.p+=b)}};b.prototype.doInputEvent=function(a){var b;"function"==typeof window.InputEvent&&(b=new window.InputEvent("input",{bubbles:!0,cancelable:!1}));a.base&&a.base.kmw_ip&&
(a=a.base);a&&b&&a.dispatchEvent(b)};b.prototype.defaultBackspace=function(a){a||(a=this.keymanweb.domManager.getLastActiveElement());this.output(1,a,"");this.doInputEvent(a)};b.prototype.processKeystroke=function(a,b,d){this.keymanweb._CachedSelectionStart=null;this._DeadkeyResetMatched();this.resetContextCache();this.keymanweb.util.activeDevice=a;(a=this.keymanweb.keyboardManager.activeKeyboard.gs(b,d))&&this.doInputEvent(b);return a};b.prototype.getLastActiveElement=function(){return this.keymanweb.domManager.getLastActiveElement()};
b.prototype.focusLastActiveElement=function(){this.keymanweb.domManager.focusLastActiveElement()};b.prototype.hideHelp=function(){this.keymanweb.osk._Hide(!0)};b.prototype.showHelp=function(a,b){this.keymanweb.osk._Show(a,b)};b.prototype.showPinnedHelp=function(){this.keymanweb.osk.userPositioned=!0;this.keymanweb.osk._Show(-1,-1)};b.prototype.resetContext=function(){this.keymanweb.osk.layerId="default";this.clearDeadkeys();this.resetContextCache();this.resetVKShift();this.keymanweb.osk._Show()};
b.prototype.setNumericLayer=function(){var a;for(a=0;a<this.keymanweb.osk.layers.length;a++)"numeric"==this.keymanweb.osk.layers[a].id&&(this.keymanweb.osk.layerId="numeric",this.keymanweb.osk._Show())};b.prototype._SelPos=function(b){var c,d;a.Device._GetIEVersion();if(this.keymanweb.isPositionSynthesized())return this.keymanweb.touchAliasing.getTextCaret(b);if(b._KeymanWebSelectionStart)return b._KeymanWebSelectionStart;if((c=b.ownerDocument)&&(d=c.defaultView))if(b instanceof d.HTMLInputElement||
b instanceof d.HTMLTextAreaElement){if(b.setSelectionRange)return b.value.substr(0,b.selectionStart)._kmwLength()}else if(d.getSelection&&"on"==b.ownerDocument.designMode.toLowerCase()&&(b=d.getSelection(),3==b.focusNode.nodeType))return b.focusNode.substringData(0,b.focusOffset)._kmwLength();return 0};b.prototype.resetVKShift=function(){this.keymanweb.uiManager.isActivating||this.keymanweb.osk._UpdateVKShift&&this.keymanweb.osk._UpdateVKShift(null,15,0)};return b}();a.KeyboardInterface=l})(d.keyman||
(d.keyman={}))})(com||(com={}));
(function(d){(function(a){var d=function(){function a(a,b){this.id=a;this.language=b}a.prototype.toString=function(){var a=this.id;this.language?(a=a+"@"+this.language,this.version&&(a=a+"@"+this.version)):this.version&&(a=a+"@@"+this.version);return a};return a}(),k=function(){return function(a,c){this.family=a.family;this.files=a.source;this.path=c}}(),e=function(){return function(a,c){this.KI="Keyboard_"+a;this.KLC=c}}();a.KeyboardStub=e;var f=function(){return function(){this.stores={}}}();a.KeyboardTag=
f;var l=function(){function b(a){this.activeStub=null;this.keyboardStubs=[];this.deferredStubs=[];this.deferredKRS=[];this.deferredKR=[];this.dfltStub=null;this.keyboards=[];this.languageList=null;this.languagesPending=[];this.linkedScripts=[];this._GetKeyboardDetail=function(a){var b={};b.Name=a.KN;b.InternalName=a.KI;b.LanguageName=a.KL;b.LanguageCode=a.KLC;b.RegionName=a.KR;b.RegionCode=a.KRC;b.CountryName=a.KC;b.CountryCode=a.KCC;b.KeyboardID=a.KD;b.Font=a.KFont;b.OskFont=a.KOskFont;return b};
this.notifyKeyboard=function(a,b,c){var h=this.activeKeyboard;null!=h&&"function"==typeof h.KNS&&h.KNS(a,b,c)};this.keymanweb=a}b.prototype.getActiveKeyboardName=function(){return this.activeKeyboard?this.activeKeyboard.KI:""};b.prototype.getActiveKeyboardTag=function(){return this.activeKeyboard?this.activeKeyboard._kmw:null};b.prototype.getActiveLanguage=function(){return null==this.activeStub?"":this.activeStub.KLC};b.prototype.getDetailedKeyboards=function(){var a=[],b;for(b=0;b<this.keyboardStubs.length;b++){var d=
this.keyboardStubs[b];d=this._GetKeyboardDetail(d);a=this.keymanweb._push(a,d)}return a};b.prototype.registerDeferredStubs=function(){this.addKeyboardArray(this.deferredStubs);for(var a=0;a<this.deferredKRS.length;a++)this._registerStub(this.deferredKRS[a])};b.prototype.registerDeferredKeyboards=function(){for(var a=0;a<this.deferredKR.length;a++)this._registerKeyboard(this.deferredKR[a])};b.prototype.addStub=function(a){if("string"!=typeof a.id)return!1;"undefined"!=typeof a.language&&(console.warn("The 'language' property for keyboard stubs has been deprecated.  Please use the 'languages' property instead."),
a.languages=a.language);if("undefined"==typeof a.languages)return!1;"string"!=typeof a.name&&(a.name=a.id.replace("_"," "),a.name=a.name.substr(0,1).toUpperCase()+a.name.substr(1));var b=a.languages,c=[];"undefined"==typeof b.length?c[0]=b:c=b;var d={keyboardBaseUri:this.keymanweb.options.keyboards,fontBaseUri:this.keymanweb.options.fonts};for(b=0;b<c.length;b++)this.mergeStub(a,c[b],d);return!0};b.prototype.mergeStub=function(a,h,d){var c=this.findStub(a.id,h.id),f=!1;null==c&&(c=new e(a.id,h.id),
this.keyboardStubs.push(c),f=!0);var q=h.region,g=0;if("number"==typeof q)g=1>q||9<q?0:q-1;else if("string"==typeof q)for(var l=2==q.length?b.regionCodes:b.regions,p=0;p<l.length;p++)if(q.toLowerCase()==l[p].toLowerCase()){g=p;break}c.KL="undefined"===typeof c.KL?h.name:c.KL;c.KR="undefined"===typeof c.KR?b.regions[g]:c.KR;c.KRC="undefined"===typeof c.KRC?b.regionCodes[g]:c.KRC;c.KN="undefined"===typeof c.KN?a.name:c.KN;"undefined"==typeof c.KF&&(q=/^(([\.]\/)|([\.][\.]\/)|(\/))|(:)/,c.KF=a.filename,
q.test(c.KF)||(c.KF=d.keyboardBaseUri+c.KF));a=d.fontBaseUri;""!=this.keymanweb.options.fonts?(a=this.keymanweb.options.fonts,q=/^https?\:/,q.test(a)||(a="//"==a.substr(0,2)?this.keymanweb.protocol+a:"/"==a.substr(0,1)?this.keymanweb.rootPath+a.substr(1):this.keymanweb.rootPath+a)):this.keymanweb.options.fonts=a;"undefined"!=typeof h.font&&(c.KFont="undefined"===typeof c.KFont?new k(h.font,a):c.KFont);"undefined"!=typeof h.oskFont&&(c.KOskFont="undefined"===typeof c.KOskFont?new k(h.oskFont,a):c.KOskFont);
this.doKeyboardRegistered(c.KI,c.KL,c.KN,c.KLC,c.KP);!this.activeStub&&f&&1==this.keyboardStubs.length&&(this.doBeforeKeyboardChange(c.KI,c.KLC),this._SetActiveKeyboard(c.KI,c.KLC,!1),this.doKeyboardChange(c.KI,c.KLC))};b.prototype.findStub=function(a,b){var c;for(c=0;c<this.keyboardStubs.length;c++)if(this.keyboardStubs[c].KI=="Keyboard_"+a&&this.keyboardStubs[c].KLC==b)return this.keyboardStubs[c];return null};b.prototype.setDefaultKeyboard=function(){return 0<this.keyboardStubs.length?(this._SetActiveKeyboard(this.keyboardStubs[0].KI,
this.keyboardStubs[0].KLC),!0):!1};b.prototype.setActiveKeyboard=function(a,b){!this.keymanweb.isEmbedded&&a&&0!=a.indexOf("Keyboard_")&&(a="Keyboard_"+a);this.doBeforeKeyboardChange(a,b);var c=this._SetActiveKeyboard(a,b,!0);null!=this.keymanweb.domManager.getLastActiveElement()&&this.keymanweb.domManager.focusLastActiveElement();this.doKeyboardChange(a,b);return c};b.prototype._SetActiveKeyboard=function(a,b,d){var c,h,e=this.keymanweb.util,f=this.keymanweb.osk;if(2>arguments.length||!b)b="---";
for(c=0;c<this.keyboardStubs.length&&(a!=this.keyboardStubs[c].KI||b!=this.keyboardStubs[c].KLC&&"---"!=b);c++);e.device.touchable&&(""==a||null==a||c>=this.keyboardStubs.length)&&0!=this.keyboardStubs.length&&(a=this.keyboardStubs[0].KI,b=this.keyboardStubs[0].KLC);2<arguments.length&&d&&this.saveCurrentKeyboard(a,b);if(this.activeStub&&this.activeKeyboard&&this.activeKeyboard.KI==a&&this.activeStub.KI==a&&this.activeStub.KLC==b&&!this.keymanweb.mustReloadKeyboard)return Promise.resolve();if(this.activeKeyboard&&
this.activeKeyboard.KI==a)for(h=0;h<this.keyboardStubs.length;h++)if(this.keyboardStubs[h].KI==a&&this.keyboardStubs[h].KLC==b)return this.activeStub=this.keyboardStubs[h],f.appendStyleSheet(),this.keymanweb.mustReloadKeyboard&&f._Load(),Promise.resolve();this.activeStub=this.activeKeyboard=null;if(""==a)return f._Hide(!1),this.keymanweb.isEmbedded||e.wait(!1),Promise.resolve();for(h=0;h<this.keyboards.length;h++)if(this.keyboards[h].KI==a){this.activeKeyboard=this.keyboards[h];this.keymanweb.domManager._SetTargDir(this.keymanweb.domManager.getLastActiveElement());
for(c=0;c<this.keyboardStubs.length;c++)if(this.keyboardStubs[c].KI==a&&(this.keyboardStubs[c].KLC==b||"---"==b)){this.activeStub=this.keyboardStubs[c];break}break}if(null==this.activeKeyboard){for(h=0;h<this.keyboardStubs.length;h++)if(this.keyboardStubs[h].KI==a&&(this.keyboardStubs[h].KLC==b||"---"==b)){if(this.isCJK(this.keyboardStubs[h])||e.device.touchable)f._Enabled=1;if(!this.keyboardStubs[h].asyncLoader){f.ready&&f._Hide(!1);var q=this.keyboardStubs[h];q.asyncLoader={};var g=q.KN,l=q.KL;
g=g.replace(/\s*keyboard\s*/i,"");q.asyncLoader.callback=function(a,b){var c=a||"Sorry, the "+g+" keyboard for "+l+" is not currently available.";this.keymanweb.isEmbedded||(e.wait(!1),e.alert(a||c,function(){this.keymanweb.setActiveKeyboard("")}.bind(this)));switch(b){case "err":console.error(c);break;default:console.warn(c)}0<h&&(a=this.keyboardStubs[0],this._SetActiveKeyboard(a.KI,a.KLC,!0))}.bind(this);q.asyncLoader.timer=window.setTimeout(q.asyncLoader.callback,1E4);this.keymanweb.isEmbedded||
e.wait("Installing keyboard<br/>"+g);var k=this;q.asyncLoader.promise=new Promise(function(a,b){window.setTimeout(function(){k.installKeyboard(a,b,q)},0)})}this.activeStub=this.keyboardStubs[h];return this.keyboardStubs[h].asyncLoader.promise}this.keymanweb.domManager._SetTargDir(this.keymanweb.domManager.getLastActiveElement())}c=this.activeKeyboard;null!==c&&String.kmwEnableSupplementaryPlane(c&&(c.KS&&1==c.KS||"Hieroglyphic"==c.KN));f._Load();return Promise.resolve()};b.prototype.installKeyboard=
function(a,b,d){var c=this.keymanweb.util,h=this.keymanweb.osk,e=c._CreateElement("script");e.charset="UTF-8";e.type="text/javascript";this.keymanweb.isEmbedded&&(e.id=d.KI);var f=d.KF,q=d.KL,g=d.KN,l=this;e.addEventListener("error",function(){null!==d.asyncLoader.timer&&(window.clearTimeout(d.asyncLoader.timer),d.asyncLoader.timer=null);d.asyncLoader.callback("Cannot find the "+g+" keyboard for "+q+".","warn");d.asyncLoader=null;b()},!1);e.addEventListener("load",function(){null!==d.asyncLoader.timer&&
(window.clearTimeout(d.asyncLoader.timer),d.asyncLoader.timer=null);var e=l.getKeyboardByID(d.KI);e?(d==l.activeStub&&(l.doBeforeKeyboardChange(e.KI,d.KLC),l.activeKeyboard=e,null!=l.keymanweb.domManager.getLastActiveElement()&&(l.keymanweb.uiManager.justActivated=!0,l.keymanweb.domManager._SetTargDir(l.keymanweb.domManager.getLastActiveElement())),String.kmwEnableSupplementaryPlane(e&&(e.KS&&1==e.KS||"Hieroglyphic"==e.KN)),l.saveCurrentKeyboard(e.KI,d.KLC),h._Load()),l.keymanweb.isEmbedded||c.wait(!1),
d.asyncLoader=null,a()):(d.asyncLoader.callback("Error registering the "+g+" keyboard for "+q+".","error"),d.asyncLoader=null,b())},!1);e.src=this.keymanweb.getKeyboardPath(f);try{document.body.appendChild(e),this.linkedScripts.push(e)}catch(z){try{document.getElementsByTagName("head")[0].appendChild(e)}catch(x){b()}}};b.prototype.saveCurrentKeyboard=function(a,b){this.keymanweb.util.saveCookie("KeymanWeb_Keyboard",{current:a+":"+b});this.keymanweb.isEmbedded||this.keymanweb.touchAliasing._BlurKeyboardSettings(a,
b)};b.prototype.restoreCurrentKeyboard=function(){var a=this.keyboardStubs,b=a.length;if(!(1>a.length)){var d=this.getSavedKeyboard();d.split(":");var e=d.split(":");2>e.length&&(e[1]="");for(d=0;d<b&&(a[d].KI!=e[0]||a[d].KLC!=e[1]&&""!=e[1]);d++);if(d<b||null==this.activeKeyboard)this._SetActiveKeyboard(e[0],e[1],!1),this.keymanweb.globalKeyboard=e[0],this.keymanweb.globalLanguageCode=e[1],this.doKeyboardChange(e[0],e[1])}};b.prototype.getSavedKeyboard=function(){var a=this.keymanweb.util.loadCookie("KeymanWeb_Keyboard");
if("string"!=typeof a.current)return"Keyboard_us:eng";var b,d=this.keyboardStubs;for(b=0;b<d.length;b++){var e=d[b].KI+":"+d[b].KLC;if(e==a.current)return e}for(b=0;b<d.length;b++)if(e=d[b].KI+":"+d[b].KLC,"Keyboard_us:eng"==e)return e;return 0<d.length?d[0].KI+":"+d[0].KLC:"Keyboard_us:eng"};b.prototype.isCJK=function(a){var b=this.activeKeyboard,c="";0<arguments.length&&(b=a);b&&("undefined"!=typeof b.KLC?c=b.KLC:"undefined"!=typeof b.LanguageCode&&(c=b.LanguageCode));return"cmn"==c||"jpn"==c||
"kor"==c};b.prototype.isRTL=function(a){a=a||this.activeKeyboard;return null!=a&&a.KRTL};b.prototype.isChiral=function(a){"string"==typeof a&&(a=this.getKeyboardByID(a));return!!(this.getKeyboardModifierBitmask(a)&this.keymanweb.osk.modifierBitmasks.IS_CHIRAL)};b.prototype.getKeyboardModifierBitmask=function(a){var b=this.activeKeyboard;0<arguments.length&&"undefined"!=typeof a&&(b=a);return b?b.KMBM?b.KMBM:this.keymanweb.osk.modifierBitmasks.NON_CHIRAL:0};b.prototype.getFont=function(a){return(a=
a||this.activeKeyboard)&&a.KV?a.KV.F:null};b.prototype.getKeyboardByID=function(a){var b;for(b=0;b<this.keyboards.length;b++)if(a==this.keyboards[b].KI)return this.keyboards[b];return null};b.prototype.isUniqueRequest=function(a,b){var c;if(null==this.findStub(b.id,b.language)){for(c=0;c<a.length;c++)if(a[c].id==b.id&&a[c].language==b.language)return!1;return!0}return!1};b.prototype.addKeyboardArray=function(a){if(!this.keymanweb.initialized)for(var b=0;b<a.length;b++)this.deferredStubs.push(a[b]);
else if(0!=a.length){var c,e="",f=[];for(b=0;b<a.length;b++){if("string"==typeof a[b]&&0<a[b].length){var g=a[b].split("@"),l=[""];"english"==g[0].toLowerCase()&&(g[0]="us");1<g.length&&(l=g[1].split(","));for(c=0;c<l.length;c++){var k=new d(g[0]);""!=l[c]&&(k.language=l[c]);2<g.length&&(k.version=g[2]);this.isUniqueRequest(f,k)&&f.push(k)}}if("object"==typeof a[b]&&null!=a[b])if("string"==typeof a[b].filename)this.addStub(a[b])||alert("To use a custom keyboard, you must specify file name, keyboard name, language, language code and region code.");
else if(a[b].language&&(console.warn("The 'language' property for keyboard stubs has been deprecated.  Please use the 'languages' property instead."),a[b].languages=a[b].language),l=a[b].languages,"number"==typeof l.length)for(c=0;c<l.length;c++)k=new d(a[b].id,a[b].languages[c].id),this.isUniqueRequest(f,k)&&f.push(k);else k=new d(a[b].id,a[b].languages[c].id),this.isUniqueRequest(f,k)&&f.push(k)}if(0!=f.length){a="&keyboardid=";for(b=0;b<f.length;b++)a=a+e+f[b].toString(),e=",";this.keymanCloudRequest(a,
!1)}}};b.prototype.registerLanguagesForKeyboard=function(a,b,d){var c,h=0;var e="";if("undefined"!=typeof a)if("string"==typeof b.keyboardid&&(e=b.keyboardid.split(",")[d]),"number"==typeof a.length)if(1==a.length||"$"==e.substr(-1,1)||""==e)for(e=0;e<a.length;e++)this.registerLanguagesForKeyboard(a[e],b,d);else{for(e=0;e<a.length;e++){var f=a[e].id.toLowerCase();"us"==f&&(f="english");for(c=0;c<a[e].languages.length;c++)if(f==a[e].languages[c].name.toLowerCase()){h=e;break}}this.registerLanguagesForKeyboard(a[h],
b,d)}else if(d=e.split("@")[1],"string"==typeof d&&(d=d.replace(/\$$/,"")),h=a.languages,"undefined"!=typeof h)if("number"==typeof h.length)for(e=0;e<h.length;e++)"undefined"!=typeof d&&h[e].id!=d||this.mergeStub(a,h[e],b);else this.mergeStub(a,h,b)};b.prototype.register=function(a){var b=a.options;a.timerid&&window.clearTimeout(a.timerid);if("string"==typeof a.error)b="","string"==typeof a.keyboardid&&(b=a.keyboardid.substr(0,1).toUpperCase()+a.keyboardid.substr(1)),this.serverUnavailable(b+" keyboard not found.");
else if("undefined"!=typeof b&&"undefined"!=typeof b.context)if("keyboard"==b.context){var c=a.keyboard;if("number"==typeof c.length)for(a=0;a<c.length;a++)this.registerLanguagesForKeyboard(c[a],b,a);else this.registerLanguagesForKeyboard(c,b,0)}else"language"==b.context&&(this.languageList=a.languages,this.languagesPending&&this.addLanguageKeyboards(this.languagesPending),this.languagesPending=[])};b.prototype.addLanguageKeyboards=function(a){var b,c;if(null==this.languageList){var d=0==this.languagesPending.length;
for(b=0;b<a.length;b++)this.languagesPending.push(a[b]);d&&this.keymanCloudRequest("",!0)}else{var e="";for(b=0;b<a.length;b++){var f=a[b].toLowerCase();(c="$"==f.substr(-1,1))&&(f=f.substr(0,f.length-1));for(d=0;d<this.languageList.length;d++)if(f==this.languageList[d].name.toLowerCase()){""!=e&&(e+=",");e=e+"@"+this.languageList[d].id;c&&(e+="$");break}}""==e?this.keymanweb.util.alert("No keyboards are available for "+a[0]+". Does it have another language name?"):this.keymanCloudRequest("&keyboardid="+
e,!1)}};b.prototype.keymanCloudRequest=function(b,d){var c="https://api.keyman.com/cloud/4.0/",h=this.keymanweb.util._CreateElement("script");c=c+(1<arguments.length&&d?"languages":"keyboards")+"?jsonp=keyman.register&languageidtype=bcp47&version="+this.keymanweb.version+"."+a.KeymanBase.__BUILD__;var e=this;var f="&timerid="+window.setTimeout(function(){e.serverUnavailable(b)},1E4);h.charset="UTF-8";h.src=c+b+f;h.type="text/javascript";try{document.body.appendChild(h)}catch(r){document.getElementsByTagName("head")[0].appendChild(h)}};
b.prototype.serverUnavailable=function(a){this.keymanweb.util.alert(""==a?"Unable to connect to Keyman Cloud server!":a);this.keymanweb.warned=!0};b.prototype.removeKeyboards=function(a){if(0==arguments.length)return!1;var b,c,d=!0,e=!1,f=!1;for(b=0;b<arguments.length;b++){for(c=this.keyboardStubs.length-1;0<=c;c--)if("Keyboard_"+arguments[b]==this.keyboardStubs[c].KI){"Keyboard_"+arguments[b]==this.getActiveKeyboardName()&&(e=!0);f=!0;this.keyboardStubs.splice(c,1);break}0>c&&(d=!1)}e&&(0<this.keyboardStubs.length?
this._SetActiveKeyboard(this.keyboardStubs[0].KI,this.keyboardStubs[0].KLC,!0):this._SetActiveKeyboard("","",!1),this.keymanweb.uiManager.justActivated=!0);f&&this.doKeyboardUnregistered();return d};b.prototype._registerKeyboard=function(a){if(this.keymanweb.initialized)if(a._kmw)console.error("The keyboard _kmw property is a reserved field for engine use only; this keyboard is invalid.");else{a._kmw=new f;var b;this.keymanweb.isEmbedded&&this.keymanweb.preserveID(a);var c=this.activeStub,d=this.activeStub;
if(!(c&&"KI"in c)||c.KI!=a.KI)for(b=0;b<this.keyboardStubs.length;b++){c=this.keyboardStubs[b];if(a.KI==c.KI)break;c=null}null==this.activeStub&&null!=c&&(this.activeStub=c);for(b=0;b<this.keyboards.length;b++)if(a.KI==this.keyboards[b].KI)return;this.keyboards=this.keymanweb._push(this.keyboards,a);this.doKeyboardLoaded(a.KI);this.activeStub=d}else this.deferredKR.push(a)};b.prototype._registerStub=function(a){var b;if(!this.keymanweb.initialized)return this.deferredKRS.push(a),null;null==this.dfltStub&&
(this.dfltStub=a);this.keymanweb.isEmbedded&&this.keymanweb.namespaceID(a);"undefined"==typeof a.KLC&&(a.KLC="");"undefined"==typeof a.KL&&(a.KL="undefined");for(b=0;b<this.keyboardStubs.length;b++)if(this.keyboardStubs[b].KI==a.KI&&(""==a.KLC||this.keyboardStubs[b].KLC==a.KLC))return 1;this.keyboardStubs=this.keymanweb._push(this.keyboardStubs,a);this.doKeyboardRegistered(a.KI,a.KL,a.KN,a.KLC,a.KP);this.activeStub||this.dfltStub!=a||1!=this.keyboardStubs.length||this.setActiveKeyboard(a.KI,a.KLC);
return null};b.prototype.doKeyboardRegistered=function(a,b,d,e,f){a={internalName:a,language:b,keyboardName:d,languageCode:e};f&&(a["package"]=f);return this.keymanweb.util.callEvent("kmw.keyboardregistered",a)};b.prototype.doKeyboardUnregistered=function(){return this.keymanweb.util.callEvent("kmw.keyboardregistered",{})};b.prototype.doKeyboardLoaded=function(a){var b={};b.keyboardName=a;return this.keymanweb.util.callEvent("kmw.keyboardloaded",b)};b.prototype.doBeforeKeyboardChange=function(a,b){var c=
{};c.internalName=a;c.languageCode=b;return this.keymanweb.util.callEvent("kmw.beforekeyboardchange",c)};b.prototype.doKeyboardChange=function(a,b,d){var c={};c.internalName=a;c.languageCode=b;c.indirect=2<arguments.length?d:!1;return this.keymanweb.util.callEvent("kmw.keyboardchange",c)};b.prototype.shutdown=function(){for(var a=0,b=this.linkedScripts;a<b.length;a++){var d=b[a];d.remove?d.remove():d.parentNode&&d.parentNode.removeChild(d)}};b.regions="World;Africa;Asia;Europe;South America;North America;Oceania;Central America;Middle East".split(";");
b.regionCodes="un af as eu sa na oc ca me".split(" ");return b}();a.KeyboardManager=l})(d.keyman||(d.keyman={}))})(com||(com={}));
(function(d){(function(a){var d=function(){return function(){}}(),k=function(){return function(){this.FF=new d;this.Safari=new d;this.Opera=new d;this.FF.k61=187;this.FF.k59=186}}(),e=function(){return function(){this.se=new d;this.se.k220=192;this.se.k187=189;this.se.k219=187;this.se.k221=219;this.se.k186=221;this.se.k191=220;this.se.k192=186;this.se.k189=191;this.uk=new d;this.uk.k223=192;this.uk.k192=222;this.uk.k222=226;this.uk.k220=220}}(),f=function(){function a(){this.browserMap=new k;this.languageMap=
new e;this._usCodeInit()}a.prototype._usCodeInit=function(){var a=new d,c=new d;a.k192=96;a.k49=49;a.k50=50;a.k51=51;a.k52=52;a.k53=53;a.k54=54;a.k55=55;a.k56=56;a.k57=57;a.k48=48;a.k189=45;a.k187=61;a.k81=113;a.k87=119;a.k69=101;a.k82=114;a.k84=116;a.k89=121;a.k85=117;a.k73=105;a.k79=111;a.k80=112;a.k219=91;a.k221=93;a.k220=92;a.k65=97;a.k83=115;a.k68=100;a.k70=102;a.k71=103;a.k72=104;a.k74=106;a.k75=107;a.k76=108;a.k186=59;a.k222=39;a.k90=122;a.k88=120;a.k67=99;a.k86=118;a.k66=98;a.k78=110;a.k77=
109;a.k188=44;a.k190=46;a.k191=47;c.k192=126;c.k49=33;c.k50=64;c.k51=35;c.k52=36;c.k53=37;c.k54=94;c.k55=38;c.k56=42;c.k57=40;c.k48=41;c.k189=95;c.k187=43;c.k81=81;c.k87=87;c.k69=69;c.k82=82;c.k84=84;c.k89=89;c.k85=85;c.k73=73;c.k79=79;c.k80=80;c.k219=123;c.k221=125;c.k220=124;c.k65=65;c.k83=83;c.k68=68;c.k70=70;c.k71=71;c.k72=72;c.k74=74;c.k75=75;c.k76=76;c.k186=58;c.k222=34;c.k90=90;c.k88=88;c.k67=67;c.k86=86;c.k66=66;c.k78=78;c.k77=77;c.k188=60;c.k190=62;c.k191=63;this._usCharCodes=[a,c]};a.prototype._USKeyCodeToCharCode=
function(a){return this._usCharCodes[a.Lmodifiers&16?1:0]["k"+a.Lcode]};return a}();a.KeyMapManager=f})(d.keyman||(d.keyman={}))})(com||(com={}));
(function(d){(function(a){var d=function(){function a(a,d,b){this.code=a;this.shift=d;this.handler=b}a.prototype.matches=function(a,d){return this.code==a&&this.shift==d};return a}(),k=function(){function a(a){this.hotkeys=[];this._Process=function(a){a||(a=window.event);var b=this.keyman.domManager.nonTouchHandlers._GetEventKeyCode(a);if(null==b)return!1;for(var c=(a.shiftKey?16:0)|(a.ctrlKey?32:0)|(a.altKey?64:0),d=0;d<this.hotkeys.length;d++)if(this.hotkeys[d].matches(b,c))return this.hotkeys[d].Handler(),
a.returnValue=!1,a&&a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1;return!0}.bind(this);this.keyman=a}a.prototype.addHotKey=function(a,e,b){for(var c=0;c<this.hotkeys.length;c++)if(this.hotkeys[c].code==a&&this.hotkeys[c].shift==e){this.hotkeys[c].handler=b;return}this.hotkeys.push(new d(a,e,b))};a.prototype.removeHotkey=function(a,d){for(var b=0;b<this.hotkeys.length;b++)if(this.hotkeys[b].matches(a,d)){this.hotkeys.splice(b,1);break}};return a}();a.HotkeyManager=k})(d.keyman||(d.keyman=
{}))})(com||(com={}));
(function(d){(function(a){var d=function(){return function(a,d){this.activationPending=a;this.activated=d}}();a.UIState=d;var k=function(){function a(a){this.justActivated=this.isActivating=!1;this.doUnload=function(){return this.keyman.util.callEvent("kmw.unloaduserinterface",{})};this.keyman=a}a.prototype.getUIState=function(){return new d(this.isActivating,this.justActivated)};a.prototype.setActivatingUI=function(a){this.isActivating=a?!0:!1};a.prototype.doLoad=function(){return this.keyman.util.callEvent("kmw.loaduserinterface",{})};
return a}();a.UIManager=k})(d.keyman||(d.keyman={}))})(com||(com={}));
(function(d){(function(a){var g=function(){function g(){this._TitleElement=null;this._IE=0;this._MasterDocument=null;this._HotKeys=[];this.warned=!1;this.baseFont="sans-serif";this.appliedFont="";this.fontCheckTimer=null;this.protocol=this.rootPath=this.srcPath="";this.mustReloadKeyboard=!1;this.globalLanguageCode=this.globalKeyboard=null;this.isEmbedded=!1;this.refocusTimer=0;this.build=300;this.options={root:"",resources:"",keyboards:"",fonts:"",attachType:"",ui:null};this.refreshElementContent=
null;this.util=this.util=new a.Util(this);window.KeymanWeb=this.interface=this["interface"]=new a.KeyboardInterface(this);this.osk=this.osk={ready:!1};this.ui=this.ui=null;this.keyboardManager=new a.KeyboardManager(this);this.domManager=new a.DOMManager(this);this.hotkeyManager=new a.HotkeyManager(this);this.uiManager=new a.UIManager(this);this.keyMapManager=new a.KeyMapManager;this.build=g.__BUILD__;this.srcPath=g._srcPath;this.rootPath=g._rootPath;this.protocol=g._protocol;this.version=d.keyman.environment.VERSION;
this.helpURL="http://help.keyman.com/go";this.setInitialized(0);this.loaded=!0}g.prototype.setDefaultDeviceOptions=function(a){};g.prototype.getStyleSheetPath=function(a){return a};g.prototype.getKeyboardPath=function(a,d){return a};g.prototype.KC_=function(a,d,g){return""};g.prototype.handleRotationEvents=function(){};g.prototype.alignInputs=function(a){};g.prototype.hideInputs=function(){};g.prototype.namespaceID=function(a){};g.prototype.preserveID=function(a){};g.prototype.setInitialized=function(a){this.initialized=
this.initialized=a};g.prototype.delayedInit=function(){this.touchAliasing=this.util.device.touchable?this.domManager.touchHandlers:this.domManager.nonTouchHandlers};g.prototype.shutdown=function(){this.domManager.shutdown();this.osk.shutdown();this.util.shutdown();this.keyboardManager.shutdown();this.ui&&this.ui.shutdown&&this.ui.shutdown();a.DOMEventHandlers.states=new a.CommonDOMStates};g.prototype.isFontAvailable=function(a){return this.util.checkFont({family:a})};g.prototype.addEventListener=
function(a,d){return this.util.addEventListener("kmw."+a,d)};g.prototype._GetEventObject=function(a){if(!a&&(a=window.event,!a)){var d=this.domManager.getLastActiveElement();if(d){d=d.ownerDocument;if(d)var e=d.defaultView;if(!e)return null;a=e.event}}return a};g.prototype._push=function(a,d){a.push?a.push(d):a=a.concat(d);return a};g.prototype.attachToControl=function(a){this.domManager.attachToControl(a)};g.prototype.detachFromControl=function(a){this.domManager.detachFromControl(a)};g.prototype.addKeyboards=
function(a){0==arguments.length?this.keyboardManager.keymanCloudRequest("",!1):this.keyboardManager.addKeyboardArray(arguments)};g.prototype.addKeyboardsForLanguage=function(a){this.keyboardManager.addLanguageKeyboards(arguments)};g.prototype.register=function(a){this.keyboardManager.register(a)};g.prototype.removeKeyboards=function(a){return this.keyboardManager.removeKeyboards(a)};g.prototype.setActiveKeyboard=function(a,d){return this.keyboardManager.setActiveKeyboard(a,d)};g.prototype.getActiveKeyboard=
function(){return this.keyboardManager.getActiveKeyboardName()};g.prototype.getActiveLanguage=function(){return this.keyboardManager.getActiveLanguage()};g.prototype.isAttached=function(a){return this.domManager.isAttached(a)};g.prototype.isCJK=function(a){return this.keyboardManager.isCJK(a)};g.prototype.isChiral=function(a){return this.keyboardManager.isChiral(a)};g.prototype.getKeyboard=function(a,d){var e,b=this.keyboardManager.getDetailedKeyboards();for(e=0;e<b.length;e++){var c=b[e];if(c.InternalName==
a||c.InternalName=="Keyboard_"+a)if(2>arguments.length||c.LanguageCode==d)return c}return null};g.prototype.getKeyboards=function(){return this.keyboardManager.getDetailedKeyboards()};g.prototype.getSavedKeyboard=function(){return this.keyboardManager.getSavedKeyboard()};g.prototype.init=function(a){return this.domManager.init(a)};g.prototype.resetContext=function(){this.interface.resetContext()};g.prototype.setNumericLayer=function(){this.interface.setNumericLayer()};g.prototype.disableControl=function(a){this.domManager.disableControl(a)};
g.prototype.enableControl=function(a){this.domManager.enableControl(a)};g.prototype.setKeyboardForControl=function(a,d,g){this.domManager.setKeyboardForControl(a,d,g)};g.prototype.getKeyboardForControl=function(a){this.domManager.getKeyboardForControl(a)};g.prototype.getLanguageForControl=function(a){this.domManager.getLanguageForControl(a)};g.prototype.focusLastActiveElement=function(){this.domManager.focusLastActiveElement()};g.prototype.getLastActiveElement=function(){return this.domManager.getLastActiveElement()};
g.prototype.setActiveElement=function(a,d){return this.domManager.setActiveElement(a,d)};g.prototype.moveToElement=function(a){this.domManager.moveToElement(a)};g.prototype.addHotKey=function(a,d,g){this.hotkeyManager.addHotKey(a,d,g)};g.prototype.removeHotKey=function(a,d){this.hotkeyManager.removeHotkey(a,d)};g.prototype.getUIState=function(){return this.uiManager.getUIState()};g.prototype.activatingUI=function(a){this.uiManager.setActivatingUI(a)};return g}();a.KeymanBase=g})(d.keyman||(d.keyman=
{}))})(com||(com={}));var scripts=document.getElementsByTagName("script"),ss=scripts[scripts.length-1].src,sPath=ss.substr(0,ss.lastIndexOf("/")+1),KeymanBase=com.keyman.KeymanBase;KeymanBase._srcPath=sPath;KeymanBase._rootPath=sPath.replace(/(https?:\/\/)([^\/]*)(.*)/,"$1$2/");KeymanBase._protocol=sPath.replace(/(.{3,5}:)(.*)/,"$1");KeymanBase.__BUILD__=224;
window.keyman&&window.keyman.loaded||function(){var d=window.keyman=new KeymanBase,a=d.osk;d.ui={};a.highlightSubKeys=function(a,d,e){};a.createKeyTip=function(){};a.optionKey=function(a,d,e){};a.showKeyTip=function(a,d){};a.waitForFonts=function(a,d){return!0}}();
window.keyman.initialized||function(){var d=window.keyman,a=d.osk,g=d.util;d.debug=d.debug=function(a){if(null==d.debugElement){var e=document.createElement("DIV");var f=e.style;f.position="absolute";f.width="30%";f.maxHeight="50%";f.top="0";f.right="0";f.minHeight="50px";f.border="1px solid blue";f.whiteSpace="pre-line";f.overflowY="scroll";f=document.createElement("P");f.id="debug_output";f.style.margin="2px";e.appendChild(f);document.body.appendChild(e);d.debugElement=f}if(null!=(f=document.getElementById("debug_output")))if(0==
arguments.length)"undefined"!=typeof f.textContent?f.textContent="":f.innerHTML="";else{e=(new Date).toTimeString().substr(3,5)+" ";var g,b;for(g=0;g<arguments.length;g++){0<g&&(e+="; ");var c=arguments[g];if("object"==typeof c)if(null==c)e+="null";else{var h="";for(b in c){0<h.length&&(h+=", ");h=h+b+":";switch(typeof c[b]){case "string":case "number":case "boolean":h+=c[b];break;default:h+=typeof c[b]}if(1024<h.length){h=h.substr(0,1E3)+"...";break}}0<h.length&&(e=e+"{"+h+"}")}else e+=c}1500<e.length&&
(e=e.substr(0,1500)+" (more)");"undefined"!=typeof f.textContent?f.textContent=e+"\n"+f.textContent:f.innerHTML=e+"<br />"+f.innerHTML}};d.debugElement=null;d.delayedInit();a._BaseLayout="undefined"!==typeof window.KeymanWeb_BaseLayout?window.KeymanWeb_BaseLayout:"us";d._BrowserIsSafari=0<=navigator.userAgent.indexOf("AppleWebKit");g.attachDOMEvent(window,"load",d.domManager._WindowLoad,!1);g.attachDOMEvent(window,"unload",d.domManager._WindowUnload,!1);g.attachDOMEvent(document,"keyup",d.hotkeyManager._Process,
!1);g.attachDOMEvent(window,"focus",d.interface.resetVKShift.bind(d.interface),!1);g.attachDOMEvent(window,"blur",d.interface.resetVKShift.bind(d.interface),!1);String.kmwEnableSupplementaryPlane(!1)}();
(function(d){(function(a){var d=function(){return function(a,d,g,b,c,h){this.id=a;this.text=d;this.width=g?g:"50";this.sp=b;this.nextlayer=c;this.pad=h}}();a.OSKKeySpec=d;d=function(){function a(a,d){this.spec=a;this.layer=d}a.getTextWidth=function(d,e){e.fontFamily||(e.fontFamily=getComputedStyle(document.body).fontFamily);e.fontSize&&""!=e.fontSize||(e.fontSize="1em");var b=e.fontFamily,c=window.keyman.osk.getKeyEmFontSize();e=window.keyman.util.getFontSizeStyle(e.fontSize);c=e.absolute?e.val+"px":
e.val*c+"px";e=(a.getTextWidth.canvas||(a.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");e.font=c+" "+b;return e.measureText(d).width};a.prototype.getKeyWidth=function(){var a=this.objectUnits();if("px"==a)return this.spec.widthpc;if("%"==a)return a=window.keyman.osk.getWidthFromCookie(),Math.floor(a*this.spec.widthpc/100)};a.prototype.objectUnits=function(){return"desktop"==window.keyman.util.device.formFactor?"%":"px"};a.prototype.renameSpecialKey=function(a){var d=window.keyman.osk.specialCharacters;
return d[a]?String.fromCharCode(57344+d[a]):a};a.prototype.generateKeyText=function(){var d=window.keyman.util,e=this.spec,b=d._CreateElement("span"),c=b.style;if(null==e.text||""==e.text){var h="\u00a0";"string"==typeof e.id&&/^U_[0-9A-F]{4}$/i.test(e.id)&&(h=String.fromCharCode(parseInt(e.id.substr(2),16)))}else h=e.text;b.className="kmw-key-text";if("1"==e.sp||"2"==e.sp)h=this.renameSpecialKey("*Tab*"==e.text&&"shift"==this.layer?"*TabLeft*":e.text);var g=window.keyman.osk;c.fontSize=g.fontSize;
"string"==typeof e.font&&""!=e.font&&(c.fontFamily=e.font);"string"==typeof e.fontsize&&0!=e.fontsize&&(c.fontSize=e.fontsize);e=window.keyman.keyboardManager;var m={fontSize:c.fontSize};m.fontFamily=c.fontFamily?c.fontFamily:g.fontFamily;g=a.getTextWidth(h,m);0==g&&""!=h&&"\u00a0"!=h&&(h="\u25cc"+h,e.isRTL()&&(h="\u200f"+h),g=a.getTextWidth(h,m));d=d.getFontSizeStyle(c.fontSize);g=.9*this.getKeyWidth()/g;1>g&&(c.fontSize=d.absolute?g*d.val+"px":g*d.val+"em");b.innerHTML=h;return b};return a}();a.OSKKey=
d;var k=function(a){function d(d,b){return a.call(this,d,b)||this}__extends(d,a);d.prototype.getId=function(){return this.layer+"-"+this.spec.id};d.prototype.generateKeyCapLabel=function(){var a=window.keyman.osk.keyCodes[this.spec.id];switch(a){case 186:a=59;break;case 187:a=61;break;case 188:a=44;break;case 189:a=45;break;case 190:a=46;break;case 191:a=47;break;case 192:a=96;break;case 219:a=91;break;case 220:a=92;break;case 221:a=93;break;case 222:a=39;break;default:if(48>a||90<a)a=0}if(0<a){var b=
window.keyman.util._CreateElement("div");b.className="kmw-key-label";b.innerHTML=String.fromCharCode(a);return b}return null};d.prototype.processSubkeys=function(a){var b,c=a.subKeys=this.spec.sk;for(b=0;b<c.length;b++)if("1"==c[b].sp||"2"==c[b].sp)c[b].text=this.renameSpecialKey(c[b].text);b=window.keyman.util._CreateElement("div");b.className="kmw-key-popup-icon";a.appendChild(b)};d.prototype.construct=function(a,b,c){var d=window.keyman.util,e=window.keyman.osk,f=this.spec,g="desktop"==d.device.formFactor,
k=d._CreateElement("div");k.keyId=f.id;k.className="kmw-key-square";var l=k.style;l.width=this.objectGeometry(f.widthpc);var u=c,p=d._CreateElement("div");e.setButtonClass(f,p,a);g?l.marginLeft=this.objectGeometry(f.padpc):(l.left=this.objectGeometry(c+f.padpc),l.bottom=b.bottom,l.height=b.height,p.style.left=l.left,p.style.width=l.width);c=c+f.padpc+f.widthpc;(a.keyLabels||g)&&(a=this.generateKeyCapLabel())&&p.appendChild(a);p.id=this.getId();p.key=f;d.device.touchable||(p.onmouseover=p.onmousedown=
e.mouseOverMouseDownHandler,p.onmouseup=p.onmouseout=e.mouseUpMouseOutHandler);p.appendChild(this.generateKeyText());"undefined"!=typeof f.sk&&null!=f.sk?this.processSubkeys(p):p.subKeys=null;k.appendChild(p);return{element:k,percent:c-u}};d.prototype.objectGeometry=function(a){var b=this.objectUnits();return"%"==b?a+b:Math.round(a)+b};return d}(d);a.OSKBaseKey=k;d=function(a){function d(d,b){return a.call(this,d,b)||this}__extends(d,a);d.prototype.getId=function(){var a=this.spec;return"string"==
typeof this.layer&&""!=this.layer?"popup-"+this.layer+"-"+a.id:"popup-"+window.keyman.osk.layerId+"-"+a.id};d.prototype.construct=function(a,b){var c=window.keyman.osk,d=this.spec,e=document.createElement("div"),f=c.getDefaultKeyObject(),g=e.style,k;for(k in f)"string"!=typeof d[k]&&(d[k]=f[k]);e.className="kmw-key-square-ex";e.keyId=d.id;b&&(g.marginTop="5px");g.width="undefined"!=typeof d.width?parseInt(d.width,10)*a.offsetWidth/100+"px":a.offsetWidth+"px";g.height=a.offsetHeight+"px";a=document.createElement("div");
c.setButtonClass(d,a);a.id=this.getId();a.key=d;c=a.style;c.height=g.height;c.width=g.width;c.position="absolute";a.appendChild(this.generateKeyText());e.appendChild(a);return e};return d}(d);a.OSKSubKey=d})(d.keyman||(d.keyman={}))})(com||(com={}));
window.keyman.initialized||function(){var d=window.keyman,a=d.osk,g=d.util,k=g.device,e=d["interface"];a.modifierCodes={LCTRL:1,RCTRL:2,LALT:4,RALT:8,SHIFT:16,CTRL:32,ALT:64,CAPS:256,NO_CAPS:512,NUM_LOCK:1024,NO_NUM_LOCK:2048,SCROLL_LOCK:4096,NO_SCROLL_LOCK:8192,VIRTUAL_KEY:16384};a.modifierBitmasks={ALL:127,ALT_GR_SIM:a.modifierCodes.LCTRL|a.modifierCodes.LALT,CHIRAL:31,IS_CHIRAL:15,NON_CHIRAL:112};a.stateBitmasks={ALL:16128,CAPS:768,NUM_LOCK:3072,SCROLL_LOCK:12288};a.keyCodes={K_BKSP:8,K_TAB:9,
K_ENTER:13,K_SHIFT:16,K_CONTROL:17,K_ALT:18,K_PAUSE:19,K_CAPS:20,K_ESC:27,K_SPACE:32,K_PGUP:33,K_PGDN:34,K_END:35,K_HOME:36,K_LEFT:37,K_UP:38,K_RIGHT:39,K_DOWN:40,K_SEL:41,K_PRINT:42,K_EXEC:43,K_INS:45,K_DEL:46,K_HELP:47,K_0:48,K_1:49,K_2:50,K_3:51,K_4:52,K_5:53,K_6:54,K_7:55,K_8:56,K_9:57,K_A:65,K_B:66,K_C:67,K_D:68,K_E:69,K_F:70,K_G:71,K_H:72,K_I:73,K_J:74,K_K:75,K_L:76,K_M:77,K_N:78,K_O:79,K_P:80,K_Q:81,K_R:82,K_S:83,K_T:84,K_U:85,K_V:86,K_W:87,K_X:88,K_Y:89,K_Z:90,K_NP0:96,K_NP1:97,K_NP2:98,K_NP3:99,
K_NP4:100,K_NP5:101,K_NP6:102,K_NP7:103,K_NP8:104,K_NP9:105,K_NPSTAR:106,K_NPPLUS:107,K_SEPARATOR:108,K_NPMINUS:109,K_NPDOT:110,K_NPSLASH:111,K_F1:112,K_F2:113,K_F3:114,K_F4:115,K_F5:116,K_F6:117,K_F7:118,K_F8:119,K_F9:120,K_F10:121,K_F11:122,K_F12:123,K_NUMLOCK:144,K_SCROLL:145,K_LSHIFT:160,K_RSHIFT:161,K_LCONTROL:162,K_RCONTROL:163,K_LALT:164,K_RALT:165,K_COLON:186,K_EQUAL:187,K_COMMA:188,K_HYPHEN:189,K_PERIOD:190,K_SLASH:191,K_BKQUOTE:192,K_LBRKT:219,K_BKSLASH:220,K_RBRKT:221,K_QUOTE:222,K_oE2:226,
K_LOPT:50001,K_ROPT:50002,K_NUMERALS:50003,K_SYMBOLS:50004,K_CURRENCIES:50005,K_UPPER:50006,K_LOWER:50007,K_ALPHA:50008,K_SHIFTED:50009,K_ALTGR:50010,K_TABBACK:50011,K_TABFWD:50012};a.buttonClasses={DEFAULT:"0",SHIFT:"1","SHIFT-ON":"2",SPECIAL:"3","SPECIAL-ON":"4",DEADKEY:"8",BLANK:"9",HIDDEN:"10"};a.specialCharacters={"*Shift*":8,"*Enter*":5,"*Tab*":6,"*BkSp*":4,"*Menu*":11,"*Hide*":10,"*Alt*":25,"*Ctrl*":1,"*Caps*":3,"*ABC*":16,"*abc*":17,"*123*":19,"*Symbol*":21,"*Currency*":20,"*Shifted*":8,"*AltGr*":2,
"*TabLeft*":7,"*LAlt*":86,"*RAlt*":87,"*LCtrl*":88,"*RCtrl*":89,"*LAltCtrl*":96,"*RAltCtrl*":97,"*LAltCtrlShift*":98,"*RAltCtrlShift*":99,"*AltShift*":100,"*CtrlShift*":101,"*AltCtrlShift*":102,"*LAltShift*":103,"*RAltShift*":104,"*LCtrlShift*":105,"*RCtrlShift*":112};a.modifierSpecials={leftalt:"*LAlt*",rightalt:"*RAlt*",alt:"*Alt*",leftctrl:"*LCtrl*",rightctrl:"*RCtrl*",ctrl:"*Ctrl*","ctrl-alt":"*AltGr*","leftctrl-leftalt":"*LAltCtrl*","rightctrl-rightalt":"*RAltCtrl*","leftctrl-leftalt-shift":"*LAltCtrlShift*",
"rightctrl-rightalt-shift":"*RAltCtrlShift*",shift:"*Shift*","shift-alt":"*AltShift*","shift-ctrl":"*CtrlShift*","shift-ctrl-alt":"*AltCtrlShift*","leftalt-shift":"*LAltShift*","rightalt-shift":"*RAltShift*","leftctrl-shift":"*LCtrlShift*","rightctrl-shift":"*RCtrlShift*"};var f=[["0123456789",";=,-./`","[\\]'"],[")!@#$%^&*(",":+<_>?~",'{|}"']],l="K_BKQUOTE K_1 K_2 K_3 K_4 K_5 K_6 K_7 K_8 K_9 K_0 K_HYPHEN K_EQUAL K_* K_* K_* K_Q K_W K_E K_R K_T K_Y K_U K_I K_O K_P K_LBRKT K_RBRKT K_BKSLASH K_* K_* K_* K_A K_S K_D K_F K_G K_H K_J K_K K_L K_COLON K_QUOTE K_* K_* K_* K_* K_* K_oE2 K_Z K_X K_C K_V K_B K_N K_M K_COMMA K_PERIOD K_SLASH K_* K_* K_* K_* K_* K_SPACE".split(" ");
a._Box=null;a._DivVKbd=null;a._DivVKbdHelp=null;a._Visible=0;a._Enabled=1;a._VShift=[];a._VKeySpans=[];a._VKeyDown=null;a._VKbdContainer=null;a._VOriginalWidth=1;a._BaseLayout="us";a._BaseLayoutEuro={};a._BaseLayoutEuro.se="\u00a71234567890+\u00b4~~~QWERTYUIOP\u00c5\u00a8'~~~ASDFGHJKL\u00d6\u00c4~~~~~<ZXCVBNM,.-~~~~~ ";a._BaseLayoutEuro.uk="`1234567890-=~~~QWERTYUIOP[]#~~~ASDFGHJKL;'~~~~~\\ZXCVBNM,./~~~~~ ";a._stateKeys={K_CAPS:!1,K_NUMLOCK:!1,K_SCROLL:!1};a.lgTimer=null;a.lgKey=null;a.hkKey=null;
a.spaceBar=null;a.lgList=null;a.frameColor="#ad4a28";a.keyPending=null;a.fontFamily="";a.fontSize="1em";a.layout=null;a.layers=null;a.layerId="default";a.nextLayer="default";a.layerIndex=0;a.currentKey="";a.subkeyDelayTimer=null;a.popupPending=!1;a.popupVisible=!1;a.popupCallout=null;a.styleSheet=null;a.loadRetry=0;a.popupDelay=500;a.currentTarget=null;a.touchCount=0;a.touchX=0;a.deleting=0;a.x=99;a.y=0;a.width=1;a.height=1;a.rowHeight=1;a.nRows=1;a.vpScale=1;a.closeButton=null;a.resizeIcon=null;
a.resizing=0;a.pinImg=null;a.userPositioned=0;a.dfltX="";a.dfltY="";a.noDrag=!1;a.keytip=null;a.touchY=0;a.addCallout=function(a){};a.shutdown=function(){var b=a._Box;b.parentElement&&b.parentElement.removeChild(b)};a.addEventListener=function(a,c){return g.addEventListener("osk."+a,c)};a._TitleBarInterior=function(){var b=g._CreateElement("DIV"),c=b.style;c.paddingLeft="2px";c.cursor="move";c.background="#ad4a28";c.font="8pt Tahoma,Arial,sans-serif";c=g._CreateElement("DIV");c.className="kmw-title-bar-actions";
c.onmousedown=a._CancelMouse;var h=g._CreateElement("DIV");h.className="kmw-close-button";h.onmousedown=a._CancelMouse;h.onclick=function(){a._Hide(!0)};a.closeButton=h;c.appendChild(h);a.restorePosition=function(){a._Visible&&(d.domManager.focusLastActiveElement(),a.loadCookie(),a.userPositioned=!1,a.saveCookie(),a._Show(),a.doResizeMove());a.pinImg&&(a.pinImg.style.display="none");window.event&&(window.event.returnValue=!1)};h=a.pinImg=g._CreateElement("DIV");h.className="kmw-pin-image";h.title=
"Pin the On Screen Keyboard to its default location on the active text box";h.onclick=a.restorePosition;h.onmousedown=a._CancelMouse;h.style.display="none";k.touchable||c.appendChild(h);b.appendChild(c);h=d._TitleElement=g._CreateElement("SPAN");h.className="kmw-title-bar-caption";h.innerHTML="KeymanWeb";b.appendChild(h);return b};a.isEnabled=a.isEnabled=function(){return a._Enabled};a.isVisible=a.isVisible=function(){return a._Visible};a.getRect=a.getRect=function(){var b={};a._DivVKbd?(b.left=b.left=
g._GetAbsoluteX(a._DivVKbd),b.top=b.top=g._GetAbsoluteY(a._DivVKbd),b.width=b.width=g._GetAbsoluteX(a._DivVKbdHelp)-g._GetAbsoluteX(a._DivVKbd)+a._DivVKbdHelp.offsetWidth,b.height=b.height=g._GetAbsoluteY(a._DivVKbdHelp)-g._GetAbsoluteY(a._DivVKbd)+a._DivVKbdHelp.offsetHeight):(b.left=b.left=g._GetAbsoluteX(a._Box),b.top=b.top=g._GetAbsoluteY(a._Box),b.width=b.width=g._GetAbsoluteX(a._Box)+a._Box.offsetWidth,b.height=b.height=g._GetAbsoluteY(a._Box)+a._Box.offsetHeight);return b};a.setRect=a.setRect=
function(b){if(null!=a._Box&&"desktop"==k.formFactor){var c=a._Box,d=c.style;"left"in b&&(d.left=b.left-g._GetAbsoluteX(c)+c.offsetLeft+"px",a.dfltX=d.left);"top"in b&&(d.top=b.top-g._GetAbsoluteY(c)+c.offsetTop+"px",a.dfltY=d.top);if(null!=a._DivVKbd){var e=a._DivVKbd;d=e.style;if("width"in b){var f=b.width-(c.offsetWidth-e.offsetWidth);f<.2*screen.width&&(f=.2*screen.width);f>.9*screen.width&&(f=.9*screen.width);d.width=f+"px";a.width=f}"height"in b&&(c=b.height-(c.offsetHeight-e.offsetHeight),
c<.1*screen.height&&(c=.1*screen.height),c>.5*screen.height&&(c=.5*screen.height),d.height=c+"px",d.fontSize=c/8+"px",a.height=c);"nosize"in b&&a.resizeIcon&&(a.resizeIcon.style.display=b.nosize?"none":"block")}"nomove"in b&&(a.noDrag=b.nomove,a.pinImg&&(a.pinImg.style.display=b.nomove||!a.userPositioned?"none":"block"));a.saveCookie()}};a.getKeyEmFontSize=function(){if("desktop"==g.device.formFactor)return.8*a.getFontSizeFromCookie();var b=getComputedStyle(document.body).fontSize;b=g.getFontSizeStyle(b).val;
var c=g.getFontSizeStyle(a._Box).val;return b*c};a.getPos=function(){var b=a._Box;return{left:a._Visible?b.offsetLeft:a.x,top:a._Visible?b.offsetTop:a.y}};a.setPos=a.setPos=function(b){if("undefined"!=typeof a._Box&&!k.touchable){if(a.userPositioned){var c=b.left;b=b.top;"undefined"!=typeof c&&(c<-.8*a._Box.offsetWidth&&(c=-.8*a._Box.offsetWidth),a.userPositioned&&(a._Box.style.left=c+"px",a.x=c));"undefined"!=typeof b&&(0>b&&(b=0),a.userPositioned&&(a._Box.style.top=b+"px",a.y=b))}a.pinImg&&(a.pinImg.style.display=
a.userPositioned?"block":"none")}};a._VKeyGetTarget=function(a){a=d._GetEventObject(a);a=g.eventTarget(a);if(null==a)return null;3==a.nodeType&&(a=a.parentNode);"SPAN"==a.tagName&&(a=a.parentNode);return a};a.highlightKey=function(b,c){if(b&&""!=b.className&&!(0<=b.className.indexOf("kmw-key-row"))){var d=b.className;null!=a.keytip&&0>d.indexOf("kmw-key-shift")&&0>d.indexOf("kmw-spacebar")&&0>b.id.indexOf("popup")?a.showKeyTip(b,c):c&&0>d.indexOf(" kmw-key-touched")?(b.className=d+" kmw-key-touched",
a.showKeyTip(null,!1)):b.className=d.replace(" kmw-key-touched","")}};a.showSubKeys=function(b){if(null!=a.keyPending){var c=document.createElement("DIV");a.getDefaultKeyObject();c.id="kmw-popup-keys";a.popupBaseKey=b;"phone"==k.formFactor&&a.prependBaseKey(b);var d=b.id.split("-");var e=d[d.length-1],f=1<d.length?d[0]:"default";if("phone"==k.formFactor&&b.subKeys[0].id!=e){e={id:e,layer:""};1<d.length&&(e.layer=f);for(d=0;d<b.childNodes.length&&!a.hasClass(b.childNodes[d],"kmw-key-text");d++);d<
b.childNodes.length&&(e.text=b.childNodes[d].textContent);b.subKeys.splice(0,0,e)}d=c.style;d.bottom=parseInt(b.style.bottom,10)+parseInt(b.style.height,10)+4+"px";d.fontFamily=a.fontFamily;d.fontSize=g.getStyleValue(b,"font-size");d.visibility="hidden";e=b.subKeys.length;var B=Math.min(Math.ceil(e/9),2);var l=Math.ceil(e/B);1<B&&(d.width=l*b.offsetWidth+5*l+"px");for(d=0;d<e;d++){var r=!1,u=Math.floor(d/l);1<B&&0<u&&(r=!0);r=(new com.keyman.OSKSubKey(b.subKeys[d],f)).construct(b,r);c.appendChild(r)}a.showKeyTip(null,
!1);a._Box.appendChild(c);d=c.style;f=g._GetAbsoluteX(b)+.5*(b.offsetWidth-c.offsetWidth);e=(g.landscapeView()?screen.height:screen.width)-c.offsetWidth;f>e&&(f=e);0>f&&(f=0);d.left=f+"px";a.popupCallout=a.addCallout(b);d.visibility="visible";c.shim=document.createElement("DIV");c.shim.id="kmw-popup-shim";a._Box.appendChild(c.shim);"phone"==k.formFactor&&(b=c.childNodes[0].firstChild,a.keyPending=b,a.highlightKey(b,!0))}};a.prependBaseKey=function(b){if(b&&"undefined"!=typeof b.id){var c=b.id.split("-");
var d=c[c.length-1];c=b.key&&b.key.layer?b.key.layer:1<c.length?c[0]:"";var e=b.key&&b.key.sp,f=b.key&&b.key.nextlayer?b.key.nextlayer:null;if("undefined"!=typeof b.subKeys&&0<b.subKeys.length&&(b.subKeys[0].id!=d||b.subKeys[0].layer!=c)){d={id:d,layer:"",key:void 0};""!=c&&(d.layer=c);e&&(d.sp=e);f&&(d.nextlayer=f);for(c=0;c<b.childNodes.length&&!a.hasClass(b.childNodes[c],"kmw-key-text");c++);c<b.childNodes.length&&(d.text=b.childNodes[c].textContent);b.subKeys.splice(0,0,d)}}};a.getVKDictionaryCode=
function(a){var b=d.keyboardManager.activeKeyboard;if(!b.VKDictionary){var h=[];if("string"==typeof b.KVKD)for(var e=b.KVKD.split(" "),f=0;f<e.length;f++)h[e[f].toUpperCase()]=f+256;b.VKDictionary=h}return(a=b.VKDictionary[a.toUpperCase()])?a:0};a.selectLayer=function(b,c){var h=2>arguments.length?null:c,e=d.keyboardManager.isChiral();"number"==typeof h&&(h=a.getLayerId(16*h));if(!h)switch(b){case "K_LSHIFT":case "K_RSHIFT":case "K_SHIFT":h="shift";break;case "K_LCONTROL":case "K_LCTRL":if(e){h="leftctrl";
break}case "K_RCONTROL":case "K_RCTRL":if(e){h="rightctrl";break}case "K_CTRL":h="ctrl";break;case "K_LMENU":case "K_LALT":if(e){h="leftalt";break}case "K_RMENU":case "K_RALT":if(e){h="rightalt";break}case "K_ALT":h="alt";break;case "K_ALTGR":h=e?"leftctrl-rightalt":"ctrl-alt";break;case "K_CURRENCIES":case "K_NUMERALS":case "K_SHIFTED":case "K_UPPER":case "K_LOWER":case "K_SYMBOLS":h="default"}if(!h||h==a.layerId&&"desktop"!=k.formFactor)return!1;a.updateLayer(h);a._Show();return!0};a.defaultKeyOutput=
function(b,c,h,g,m){var q="",k=!1,l=m&&"undefined"!=typeof m.base;0==h?k=!0:h==a.modifierCodes.SHIFT?(k=!0,h=1):console.warn("KMW only defines default key output for the 'default' and 'shift' layers!");if(l||g)switch((l=a.keyCodes[b])||(l=c),l){case a.keyCodes.K_BKSP:e.defaultBackspace();break;case a.keyCodes.K_TAB:d.domManager.moveToNext(h);break;case a.keyCodes.K_TABBACK:d.domManager.moveToNext(!0);break;case a.keyCodes.K_TABFWD:d.domManager.moveToNext(!1);break;case a.keyCodes.K_ENTER:if("TEXTAREA"==
m.nodeName||"undefined"!=typeof m.base&&"TEXTAREA"==m.base.nodeName)return"\n";g&&("INPUT"!=m.nodeName||"search"!=m.type&&"submit"!=m.type?"undefined"==typeof m.base||"search"!=m.base.type&&"submit"!=m.base.type?d.domManager.moveToNext(!1):(m.base.disabled=!1,m.base.form.submit()):m.form.submit());break;case a.keyCodes.K_SPACE:return" "}if("U_"==b.substr(0,2))b=parseInt(b.substr(2,6),16),0<=b&&31>=b||128<=b&&159>=b?console.log("Suppressing Unicode control code: U_00"+b.toString(16)):q=String.kmwFromCharCode(b);
else if(k)try{c>=a.keyCodes.K_0&&c<=a.keyCodes.K_9?q=f[h][0][c-a.keyCodes.K_0]:c>=a.keyCodes.K_A&&c<=a.keyCodes.K_Z?q=String.fromCharCode(c+(h?0:32)):c>=a.keyCodes.K_COLON&&c<=a.keyCodes.K_BKQUOTE?q=f[h][1][c-a.keyCodes.K_COLON]:c>=a.keyCodes.K_LBRKT&&c<=a.keyCodes.K_QUOTE&&(q=f[h][2][c-a.keyCodes.K_LBRKT])}catch(u){console.error("Error detected with default mapping for key:  code = "+c+", shift state = "+(1==h?"shift":"default"))}return q};a.clickKey=function(b){var c=d.domManager.getLastActiveElement(),
h,f=d.keyboardManager.activeKeyboard;var m=b.id.split("-");if(2>m.length)return!0;"popup"==m[0]&&m.splice(0,1);if(null!=c){var l=m[0],n=m[m.length-1].toUpperCase(),r=h=a.getModifierState(a.layerId);for(h=1;h<m.length-1;h++)l=l+"-"+m[h];"undefined"!=typeof b.key&&(r=b.key.nextlayer);d.domManager.initActiveElement(c);if("K_LOPT"==n||"K_ROPT"==n)return a.optionKey(b,n,!0),!0;a.highlightKey(b,!1);if("desktop"==k.formFactor&&a.selectLayer(n,r))return!0;m=c._KeymanWebSelectionStart;h=c._KeymanWebSelectionEnd;
d.uiManager.setActivatingUI(!0);com.keyman.DOMEventHandlers.states._IgnoreNextSelChange=100;d.domManager.focusLastActiveElement();d.domManager._IsMozillaEditableIframe(c,0)&&(c=c.documentElement);c._KeymanWebSelectionStart=m;c._KeymanWebSelectionEnd=h;com.keyman.DOMEventHandlers.states._IgnoreNextSelChange=0;d._CachedSelectionStart=null;e._DeadkeyDeleteMatched();m={Ltarg:c,Lmodifiers:0,Lstates:0,Lcode:a.keyCodes[n],LisVirtualKey:!0};m.Lstates|=a._stateKeys.K_CAPS?a.modifierCodes.CAPS:a.modifierCodes.NO_CAPS;
m.Lstates|=a._stateKeys.K_NUMLOCK?a.modifierCodes.NUM_LOCK:a.modifierCodes.NO_NUM_LOCK;m.Lstates|=a._stateKeys.K_SCROLL?a.modifierCodes.SCROLL_LOCK:a.modifierCodes.NO_SCROLL_LOCK;"U_"==n.substr(0,2)&&(m.LisVirtualKey=!1);"undefined"==typeof m.Lcode&&(m.Lcode=a.getVKDictionaryCode(n),m.Lcode||(m.Lcode=1));h="undefined"==typeof b.key?null:b.key.layer;h=null==h?a.getModifierState(l):a.getModifierState(h);m.Lmodifiers=h;(m.Lmodifiers&a.modifierBitmasks.ALT_GR_SIM)==a.modifierBitmasks.ALT_GR_SIM&&a.emulatesAltGr()&&
(m.Lmodifiers&=~a.modifierBitmasks.ALT_GR_SIM,m.Lmodifiers|=a.modifierCodes.RALT);if(!f||!f.KM||f.KVKL&&"desktop"!=k.formFactor)m.vkCode=m.Lcode;else if(m.Lcode!=a.keyCodes.K_SPACE){m.vkCode=m.Lcode;if(l=a.defaultKeyOutput("K_xxxx",m.Lcode,-1!=l.indexOf("shift")?16:0,!1,null))m.Lcode=l.charCodeAt(0);a._stateKeys.K_CAPS&&(65<=m.Lcode&&90>=m.Lcode||97<=m.Lcode&&122>=m.Lcode)&&(m.Lmodifiers^=16,m.Lcode^=32)}"undefined"==typeof f.KM&&(m.Lcode=d.keyMapManager._USKeyCodeToCharCode(m),m.LisVirtualKey=!1);
if(!f||0!=m.Lcode&&!e.processKeystroke(g.device,c,m))switch(m.Lcode=m.vkCode,n){case "K_CAPS":case "K_NUMLOCK":case "K_SCROLL":a._stateKeys[n]=!a._stateKeys[n];a._Show();break;default:(f=a.defaultKeyOutput(n,m.Lcode,h,!0,c))&&e.output(0,c,f)}"undefined"!=typeof b.key&&null!==b.key.nextlayer&&(a.nextLayer=b.key.nextlayer);a.selectLayer(n,r);c._KeymanWebSelectionStart=null;c._KeymanWebSelectionEnd=null}d.uiManager.setActivatingUI(!1);return!0};a.getLayerId=function(b){var c="";if(0==b)return"default";
b&a.modifierCodes.LCTRL&&(c=(0<c.length?c+"-":"")+"leftctrl");b&a.modifierCodes.RCTRL&&(c=(0<c.length?c+"-":"")+"rightctrl");b&a.modifierCodes.LALT&&(c=(0<c.length?c+"-":"")+"leftalt");b&a.modifierCodes.RALT&&(c=(0<c.length?c+"-":"")+"rightalt");b&a.modifierCodes.SHIFT&&(c=(0<c.length?c+"-":"")+"shift");b&a.modifierCodes.CTRL&&(c=(0<c.length?c+"-":"")+"ctrl");b&a.modifierCodes.ALT&&(c=(0<c.length?c+"-":"")+"alt");return c};a.getModifierState=function(b){var c=0;0<=b.indexOf("shift")&&(c|=a.modifierCodes.SHIFT);
var d=!1;0<=b.indexOf("leftctrl")&&(c|=a.modifierCodes.LCTRL,d=!0);0<=b.indexOf("rightctrl")&&(c|=a.modifierCodes.RCTRL,d=!0);0<=b.indexOf("ctrl")&&!d&&(c|=a.modifierCodes.CTRL);d=!1;0<=b.indexOf("leftalt")&&(c|=a.modifierCodes.LALT,d=!0);0<=b.indexOf("rightalt")&&(c|=a.modifierCodes.RALT,d=!0);0<=b.indexOf("alt")&&!d&&(c|=a.modifierCodes.ALT);return c};a.updateLayer=function(b){var c=a.layerId,h=b,e;if("desktop"==d.util.device.formFactor){var f="leftctrl rightctrl ctrl leftalt rightalt alt shift".split(" ");
for(e=0;e<f.length;e++)h=h.replace(f[e]+"-",""),h=h.replace(f[e],"");if("default"==a.layerId||"numeric"==a.layerId||"symbol"==a.layerId||"currency"==a.layerId||""!=h)c=b;else{h=a.getModifierState(c);for(e=0;e<f.length;e++)c=c.replace(f[e]+"-",""),c=c.replace(f[e],"");switch(b){case "shift":h^=a.modifierCodes.SHIFT;break;case "leftctrl":h^=a.modifierCodes.LCTRL;break;case "rightctrl":h^=a.modifierCodes.RCTRL;break;case "ctrl":h^=a.modifierCodes.CTRL;break;case "leftalt":h^=a.modifierCodes.LALT;break;
case "rightalt":h^=a.modifierCodes.RALT;break;case "alt":h^=a.modifierCodes.ALT;break;default:c=b}"default"!=c&&(c=""==c?a.getLayerId(h):a.getLayerId(h)+"-"+c)}""==c&&(c="default")}else c=b;a.layerId=c;for(e=0;e<a.layers.length;e++)if(a.layerId==a.layers[e].id)return;a.layerId="default"};a.showLanguage=function(){var b="",c=d.keyboardManager.activeStub;if(c){var h=c.KL;b=c.KN}else h=d._ActiveLanguage?d._ActiveLanguage.KN:"English";try{var e=a.spaceBar.firstChild.firstChild;e.parentNode.className=
"undefined"==typeof e.parentNode.className||""==e.parentNode.className?"kmw-spacebar":e.parentNode.className+" kmw-spacebar";e.className="kmw-spacebar-caption";b=b.replace(/\s*keyboard\s*/i,"");c="";c=b==h?h:h+" ("+b+")";e.innerHTML!=c&&(e.innerHTML=c)}catch(m){}};a.showLanguageMenu=function(){var b=d.keyboardManager.keyboardStubs;if(!(1>b.length)){var c=a.lgList=g._CreateElement("DIV");a.lgList.id="kmw-language-menu";c.shim=g._CreateElement("DIV");c.shim.id="kmw-language-menu-background";c.shim.addEventListener("touchstart",
function(b){b.preventDefault();a.hideLanguageList();if(2<b.touches.length){var c=b.touches[1].pageX;b=b.touches[1].pageY;c>a.spaceBar.offsetLeft&&c<a.spaceBar.offsetLeft+a.spaceBar.offsetWidth&&b>a.spaceBar.offsetTop&&b<a.spaceBar.offsetTop+a.spaceBar.offsetHeight&&a.showBuild()}},!1);document.body.appendChild(c.shim);var h=g._CreateElement("DIV"),e=h.style,f=g._CreateElement("DIV");h.id="kmw-menu-scroll-container";f.id="kmw-menu-scroller";"WebkitOverflowScrolling"in e&&(e.WebkitOverflowScrolling=
"touch");h.appendChild(f);c.appendChild(h);var l;e=g._CreateElement("DIV");e.id="kmw-menu-index";for(l=1;26>=l;l++){var n=g._CreateElement("P");n.innerHTML=String.fromCharCode(l+64);e.appendChild(n)}e.addEventListener("touchstart",function(b){a.scrollToLanguage(b,h,f)},!1);e.addEventListener("touchend",function(a){a.stopPropagation();a.preventDefault()},!1);c.appendChild(e);c.addEventListener("scroll",function(b){a.lgList.scrolling=!0},!1);h.addEventListener("scroll",function(a){1>h.scrollTop&&(h.scrollTop=
1);h.scrollTop>h.scrollHeight-h.offsetHeight-1&&(h.scrollTop=h.scrollHeight-h.offsetHeight-1)},!1);a.lgList.activeLgNo=a.addLanguagesToMenu(f,b);a.lgList.visibility="hidden";document.body.appendChild(a.lgList);"Android"==k.OS&&"devicePixelRatio"in window&&(a.lgList.style.fontSize=2/window.devicePixelRatio+"em");"Android"==k.OS&&"tablet"==k.formFactor&&"devicePixelRatio"in window&&(l=parseInt(g.getStyleValue(c,"width"),10),b=c.style,isNaN(l)||(b.width=b.maxWidth=2*l/window.devicePixelRatio+"px"),l=
parseInt(g.getStyleValue(h,"width"),10),b=h.style,isNaN(l)||(b.width=b.maxWidth=2*l/window.devicePixelRatio+"px"),l=parseInt(g.getStyleValue(f,"width"),10),b=f.style,isNaN(l)||(b.width=b.maxWidth=2*l/window.devicePixelRatio+"px"));a.adjustLanguageMenu(0);b=Math.floor(c.offsetHeight/26);n=Math.round(100*b/(e.childNodes[1].offsetTop-e.childNodes[0].offsetTop))/100;var r=.6<n?1:2;1.25<n&&(n=1.25);for(l=0;26>l;l++){var u=e.childNodes[l].style;2==r&&1==l%2?u.display="none":(u.fontSize=n*r+"em",u.lineHeight=
b*r+"px")}l=h.offsetWidth;h.scrollHeight>h.offsetHeight+3?l+=e.offsetWidth:e.style.display="none";c.style.width=l+"px";a.lgList.visibility="";c=f.firstChild.offsetHeight*a.lgList.activeLgNo+1;h.scrollTop=c;h.scrollTop<c&&(h.scrollTop=h.scrollHeight-h.offsetHeight);h.scrollTop>h.scrollHeight-h.offsetHeight-1&&(h.scrollTop=h.scrollHeight-h.offsetHeight-1)}};a.adjustLanguageMenu=function(b){var c=a.lgList,d=c.firstChild,e=d.firstChild,f=c.style;c=c.childNodes[1];var l=window.innerHeight-a.lgKey.offsetHeight-
16;e=(e.childNodes.length+b-1)*e.firstChild.firstChild.offsetHeight;"iOS"==k.OS&&("phone"==k.formFactor?(b=g.landscapeView()?36:0,l=(window.innerHeight-b-16)*g.getViewportScale()):"tablet"==k.formFactor&&(b=g.landscapeView()?16:0,l-=b));f.left=g._GetAbsoluteX(a.lgKey)+"px";e>l&&(e=l);f.height=e+"px";f.top=g._GetAbsoluteY(a._Box)+a._Box.offsetHeight-e+window.pageYOffset-6+"px";f.bottom="auto";c.style.height=d.style.height=f.height};a.scrollToLanguage=function(a,c,d){a.stopImmediatePropagation();a.stopPropagation();
a.preventDefault();if("P"==a.touches[0].target.nodeName){var b,h=0;a=a.touches[0].target.innerHTML.charCodeAt(0);var e=d.childNodes;try{for(b=0;b<e.length-1;b++){var f=e[b].firstChild.innerHTML.toUpperCase().charCodeAt(0);if(f>=a)break}}catch(r){}try{h=d.firstChild.offsetHeight*b+1,c.scrollTop=h}catch(r){h=0}try{c.scrollTop<h&&(c.scrollTop=c.scrollHeight-c.offsetHeight),c.scrollTop>c.scrollHeight-c.offsetHeight-1&&(c.scrollTop=c.scrollHeight-c.offsetHeight-1)}catch(r){}}};a.addLanguagesToMenu=function(b,
c){var h=c.length,e,f,l=[];for(f=0;f<h;f++){var n=c[f].KL;-1==l.indexOf(n)&&l.push(n)}l.sort();var r=Math.round(100/g.getViewportScale())/100;n=-1;for(e=0;e<l.length;e++){var u=g._CreateElement("DIV");u.className="kbd-list-closed";var p=g._CreateElement("P");p.kList=[];for(f=0;f<h;f++)c[f].KL==l[e]&&p.kList.push(c[f]);"iOS"==k.OS&&(p.style.fontSize=r+"em");u.appendChild(p);b.appendChild(u);l[e]==d.keyboardManager.activeStub.KL&&(n=e);if(1<p.kList.length)for(p.className="kbd-list",p.innerHTML=l[e]+
"...",p.scrolled=!1,p.ontouchend=function(b){b.preventDefault();b.stopPropagation();b.target.scrolled?b.target.scrolled=!1:this.parentNode.className="kbd-list-closed"==this.parentNode.className?"kbd-list-open":"kbd-list-closed";a.adjustLanguageMenu("kbd-list-closed"==this.parentNode.className?0:this.kList.length)},p.addEventListener("touchstart",function(a){a.stopPropagation()},!1),p.addEventListener("touchmove",function(a){a.target.scrolled=!0;a.stopPropagation()},!1),f=0;f<p.kList.length;f++){var t=
g._CreateElement("P");t.className="kbd-list-entry";"iOS"==k.OS&&(t.style.fontSize=r+"em");a.addKeyboardToMenu(p.kList[f],t,!1);u.appendChild(t)}else p.innerHTML=l[e],p.className="kbd-single-entry",a.addKeyboardToMenu(p.kList[0],p,!0);e==n&&(p.className+=" current")}c=g._CreateElement("DIV");c.id="kmw-menu-footer";h=function(a){a.preventDefault();a.stopPropagation()};c.addEventListener("touchstart",h,!1);c.addEventListener("touchmove",h,!1);c.addEventListener("touchend",h,!1);b.appendChild(c);return n};
a.addKeyboardToMenu=function(b,c,h){c.kn=b.KI;c.kc=b.KLC;c.innerHTML=h?b.KL:b.KN.replace(" Keyboard","");b=function(b){b.stopPropagation();0>=this.className.indexOf("selected")&&(this.className+=" selected");a.lgList.scrolling=!1;a.lgList.y0=b.touches[0].pageY;return!0};h=function(b){b.stopImmediatePropagation();var c=a.lgList.childNodes[0],d=c.scrollHeight-c.offsetHeight;if("undefined"!=typeof b.pageY)var h=b.pageY;else if("undefined"!=typeof b.touches)h=b.touches[0].pageY;else return;var e=h-a.lgList.y0;
if(0>e)c.scrollTop>=d-1&&(b.preventDefault(),a.lgList.y0=h);else if(0<e)2>c.scrollTop&&(b.preventDefault(),a.lgList.y0=h);else return;if(-5>e||5<e)a.lgList.scrolling=!0,this.className=this.className.replace(/\s*selected/,""),a.lgList.y0=h;return!0};var e=function(b){b.preventDefault();"undefined"!=typeof b.stopImmediatePropagation?b.stopImmediatePropagation():b.stopPropagation();a.lgList.scrolling?this.className=this.className.replace(/\s*selected/,""):(com.keyman.DOMEventHandlers.states.setFocusTimer(),
a.lgList.style.display="none",d.keyboardManager._SetActiveKeyboard(this.kn,this.kc,!0),d.keyboardManager.doKeyboardChange(this.kn,this.kc),d.domManager.focusLastActiveElement(),a.hideLanguageList(),a._Show());return!0};c.onmspointerdown=b;c.addEventListener("touchstart",b,!1);c.onmspointermove=h;c.addEventListener("touchmove",h,!1);c.onmspointerout=e;c.addEventListener("touchend",e,!1)};a.hideLanguageList=function(){a.lgList&&(a.highlightKey(a.lgKey.firstChild,!1),a.lgList.style.visibility="hidden",
window.setTimeout(function(){null!=a.lgList&&"undefined"!=typeof a.lgList&&(document.body.removeChild(a.lgList.shim),document.body.removeChild(a.lgList));a.lgList=null},500))};a._UpdateVKShift=function(b,c,h){var e=0,f=["CAPS","NUM_LOCK","SCROLL_LOCK"],g=["K_CAPS","K_NUMLOCK","K_SCROLL"];if(b)for(e=b.Lmodifiers,c=b.Lstates,d.keyboardManager.isChiral()&&a.emulatesAltGr()&&(com.keyman.DOMEventHandlers.states.modStateFlags&a.modifierBitmasks.ALT_GR_SIM)==a.modifierBitmasks.ALT_GR_SIM&&(e|=a.modifierBitmasks.ALT_GR_SIM,
e&=~a.modifierCodes.RALT),b=0;b<f.length;b++)c&a.stateBitmasks[f[b]]&&(a._stateKeys[g[b]]=c&a.modifierCodes[f[b]]);else if(h)for(e|=c,b=0;b<f.length;b++)c&a.stateBitmasks[f[b]]&&(a._stateKeys[g[b]]=!0);else for(e&=~c,b=0;b<f.length;b++)c&a.stateBitmasks[f[b]]&&(a._stateKeys[g[b]]=!1);a.layerId=a.getLayerId(e);a._Visible&&a._Show();return!0};a._UpdateVKShiftStyle=function(b){var c;if(b)for(c=0;c<a.layers.length&&a.layers[c].id!=a.layerId;c++);else{c=a.layerIndex;b=a.layers[c].id;var d=a.layers[c];
c=["K_CAPS","K_NUMLOCK","K_SCROLL"];var e=[d.capsKey,d.numKey,d.scrollKey];for(d=0;d<e.length;d++)if(null!=e[d]){e[d].sp=a._stateKeys[c[d]]?a.buttonClasses["SHIFT-ON"]:a.buttonClasses.SHIFT;var f=document.getElementById(b+"-"+c[d]);a.setButtonClass(e[d],f,a.layout)}}};a._CancelMouse=function(a){(a=d._GetEventObject(a))&&a.preventDefault&&a.preventDefault();a&&(a.cancelBubble=!0,a.returnValue=!1);return!1};a.showLayer=function(b){if(d.keyboardManager.activeKeyboard)for(var c=0;c<a.layers.length;c++)if(a.layers[c].id==
b)return a.layerId=b,a._Show(),!0;return!1};a.getHeight=function(){if("function"==typeof d.getOskHeight)return d.getOskHeight();var a=Math.floor(Math.min(screen.availHeight,screen.availWidth)/2);if("phone"==k.formFactor){var c=Math.min(screen.height,screen.width),e=Math.max(screen.height,screen.width);a=g.portraitView()?Math.floor(Math.max(screen.availHeight,screen.availWidth)/3):e/c*a/1.6}"iOS"==k.OS&&(a/=g.getViewportScale());"Android"==k.OS&&"phone"==k.formFactor&&"devicePixelRatio"in window&&
/Firefox|Chrome|OPR/.test(navigator.userAgent)&&(a*=window.devicePixelRatio);return a};a.getWidth=function(){if("function"==typeof d.getOskWidth)return d.getOskWidth();if("iOS"==g.device.OS)var a=window.innerWidth;else if("Android"==k.OS)try{a=document.documentElement.clientWidth}catch(c){a=screen.availWidth}else a=screen.width;return a};a.mouseOverMouseDownHandler=function(b){var c=g.eventTarget(b);null!==c&&"desktop"==k.formFactor&&("SPAN"==c.nodeName&&(c=c.parentNode),0<=c.className.indexOf("kmw-key-label")&&
(c=c.parentNode),"mousedown"==g.eventType(b)?(a.currentKey=c.id,a._CancelMouse(b),a.highlightKey(c,!0)):c.id==a.currentKey&&a.highlightKey(c,!0))};a.mouseUpMouseOutHandler=function(b){var c=g.eventTarget(b);null!==c&&"desktop"==k.formFactor&&("SPAN"==c.nodeName&&(c=c.parentNode),0<=c.className.indexOf("kmw-key-label")&&(c=c.parentNode),a.highlightKey(c,!1),"mouseup"==g.eventType(b)&&(c.id==a.currentKey&&a.clickKey(c),a.currentKey=""))};a.getDefaultKeyObject=function(){return{text:"",width:"100",pad:"15",
sp:"0",layer:null,nextlayer:null}};a.deviceDependentLayout=function(b,c){var d=g._CreateElement("DIV"),e=d.style;d.className="kmw-key-layer-group";switch(c){case "phone":case "tablet":var f=a.getHeight();e.height=f+"px"}if(null==b)return d;f=b.fontsize;e.fontSize="undefined"==typeof f||null==f||""==f?"1em":b.fontsize;a.fontSize=e.fontSize;var l;var n=b.layer;var r=a.getDefaultKeyObject();r.fontsize=e.fontSize;var u=/\*\w+\*/;for(f=0;f<n.length;f++){var p=n[f];var t=p.row;for(l=t.length;0<l&&!(0<t[l-
1].key.length);l--);l<t.length&&t.splice(l-t.length,t.length-l)}var z=100/t.length;"desktop"==c&&(z=100/t.length);var x="desktop"==c?100:a.getWidth();k.touchable&&(d.addEventListener("touchstart",a.touch,!0),d.addEventListener("touchend",a.release,!0),d.addEventListener("touchmove",a.moveOver,!1));for(f=0;f<n.length;f++){p=n[f];p.aligned=!1;var C=g._CreateElement("DIV");t=C.style;C.className="kmw-key-layer";t.display=0==f?"block":"none";t.height=e.height;t.fontFamily="font"in b?b.font:"";C.layer=
C.nextLayer=p.id;"string"==typeof p.nextlayer&&(C.nextLayer=p.nextlayer);t=p.row;var v=0;for(l=0;l<t.length;l++){var F=0;var y=t[l];var A=y.key;for(y=0;y<A.length;y++){var w=A[y];if(null==w)--A.length;else{var D="string"==typeof w.width&&""!=w.width?parseInt(w.width,10):100;if(isNaN(D)||0==D)D=100;w.width=D.toString();var E="string"==typeof w.pad&&""!=w.pad?parseInt(w.pad,10):15;if(isNaN(E)||0==E)E=15;w.pad=E.toString();F+=D+E}}F>v&&(v=F)}v="desktop"==c?v+5:v+15;for(l=0;l<t.length;l++){F=g._CreateElement("DIV");
F.className="kmw-key-row";F.onmousedown=g.mouseDownPreventDefaultHandler;y=t[l];D=F.style;D.maxHeight=D.height=z+"%";A=y.key;for(y=0;y<A.length;y++){w=A[y];for(var H in r)"string"!=typeof w[H]&&(w[H]=r[H]);switch(w.sp){case "1":u.test(w.text)||""==w.text||(w.sp="3");break;case "2":u.test(w.text)||""==w.text||(w.sp="4")}}for(y=E=0;y<A.length-1;y++){w=Math.round(parseInt(A[y].width,10)*x/v);A[y].widthpc=w;var G=Math.round(parseInt(A[y].pad,10)*x/v);A[y].padpc=G;E+=G+w}E+=Math.round(15*x/v);1==A.length&&
0>parseInt(A[0].pad,10)?(w=Math.round(parseInt(A[0].width,10)*x/v),A[0].widthpc=w,E+=w,A[0].padpc=x-E):0<A.length&&(y=A.length-1,G=Math.round(parseInt(A[y].pad,10)*x/v),A[y].padpc=G,E+=G,A[y].widthpc=x-E);for(y=E=0;y<A.length;y++)w=A[y],w=(new com.keyman.OSKBaseKey(w,p.id)).construct(b,D,E),F.appendChild(w.element),E+=w.percent;C.appendChild(F)}d.appendChild(C)}return d};a.clearPopup=function(){var b=document.getElementById("kmw-popup-keys");null!=b&&(b.shim&&a._Box.removeChild(b.shim),b.parentNode.removeChild(b));
a.popupCallout&&a._Box.removeChild(a.popupCallout);a.popupCallout=null;a.subkeyDelayTimer&&(window.clearTimeout(a.subkeyDelayTimer),a.subkeyDelayTimer=null);a.popupBaseKey=null};a.touch=function(b){var c=b.changedTouches[0].target,d=a.keyTarget(c);a.touchX=b.changedTouches[0].pageX;a.currentTarget=d;var e=document.getElementById("kmw-popup-keys");if(!(e&&"visible"==e.style.visibility||a.popupVisible)){a.touchCount=b.touches.length;if(d&&0<=d.className.indexOf("key-hidden")||0<=c.className.indexOf("kmw-key-row"))d=
a.findNearestKey(b,c);null!=d&&(b=d.id.split("-"),b=b[b.length-1],a.highlightKey(d,!0),"K_LOPT"==b||"K_ROPT"==b?(window.setTimeout(function(){a.clickKey(d)},0),a.keyPending=null):"K_BKSP"==b?(a.clickKey(d),a.deleteKey=d,a.deleting=window.setTimeout(a.repeatDelete,500),a.keyPending=null):(a.keyPending?(a.highlightKey(a.keyPending,!1),a.clickKey(a.keyPending),a.clearPopup(),a.touchCount--):a.touchHold(d),a.keyPending=d))}};a.release=function(b){var c=document.getElementById("kmw-popup-keys"),d=a.currentTarget;
if(c&&"visible"==c.style.visibility||a.popupVisible){if(0<b.touches.length)return;if(null==d||0>d.id.indexOf("popup")&&d.id!=a.popupBaseKey.id)a.highlightKey(a.keyPending,!1),a.clearPopup(),a.keyPending=null}d&&d.id&&a.optionKey(b,d.id,!1);d=b.changedTouches[0].pageX;d=2>d&&5<a.touchX||d>window.innerWidth-2&&a.touchX<window.innerWidth-5;c=a.touchCount;0<a.touchCount&&a.touchCount--;a.keyPending?(a.highlightKey(a.keyPending,!1),0>a.keyPending.className.indexOf("hidden")&&0<c&&!d&&a.clickKey(a.keyPending),
a.clearPopup(),a.keyPending=null):(c=b.changedTouches[0],d=a.keyTarget(c.target),d||(d=document.elementFromPoint(c.clientX,c.clientY),d=a.findNearestKey(b,d)),a.highlightKey(d,!1));a.deleting&&window.clearTimeout(a.deleting);a.deleting=0};a.moveOver=function(b){b.preventDefault();b.cancelBubble=!0;"function"==typeof b.stopImmediatePropagation?b.stopImmediatePropagation():"function"==typeof b.stopPropagation&&b.stopPropagation();if(!(1<b.touches.length||0==a.touchCount)){var c="object"==typeof b.touches?
b.touches[0].clientX:b.clientX,d="object"==typeof b.touches?b.touches[0].clientY:b.clientY,e=document.elementFromPoint(c,d),f=a.keyPending,g=a.keyTarget(e);if(g&&0<=g.className.indexOf("key-hidden")||e&&!g&&0<=e.className.indexOf("key-row"))g=a.findNearestKey(b,e);g&&"string"==typeof g.id&&0>g.id.indexOf("BKSP")&&(a.deleting&&window.clearTimeout(a.deleting),a.deleting=0);if(a.popupVisible)null==g?(f&&a.highlightKey(f,!1),a.keyPending=null):g==a.popupBaseKey?(a.hasClass(g,"kmw-key-touched")||a.highlightKey(g,
!0),a.keyPending=g):(f&&a.highlightKey(f,!1),a.keyPending=null);else{(e=document.getElementById("kmw-popup-keys"))&&"visible"==e.style.visibility&&"phone"==k.formFactor&&g==a.popupBaseKey&&(g=e.childNodes[0].firstChild);a.currentTarget=g;f&&g&&g.id!=f.id&&a.highlightKey(f,!1);a.highlightSubKeys(g,c,d);if(e&&"visible"==e.style.visibility){if(g&&0>g.id.indexOf("popup")&&g!=a.popupBaseKey)return;g&&g==a.popupBaseKey&&0>g.className.indexOf("kmw-key-touched")&&a.highlightKey(g,!0)}else f&&b.touches[0].pageY<
Math.max(5,a._Box.offsetTop-.25*a._Box.offsetHeight)&&(a.highlightKey(f,!1),a.showKeyTip(null,!1),a.keyPending=null);g&&a.keyPending&&(a.keyPending=g);a.keyPending&&(f!=g||0>g.className.indexOf("kmw-key-touched"))&&a.highlightKey(g,!0);f&&g&&g!=f&&""!=g.id&&a.touchHold(g)}}};a.hasClass=function(a,c){c=" "+c+" ";return 0<=(" "+a.className+" ").replace(/[\n\t\r\f]/g," ").indexOf(c)};a.keyTarget=function(b){try{if(b){if(a.hasClass(b,"kmw-key"))return b;if(b.parentNode&&a.hasClass(b.parentNode,"kmw-key"))return b.parentNode;
if(b.firstChild&&a.hasClass(b.firstChild,"kmw-key"))return b.firstChild}}catch(c){}return null};a.findNearestKey=function(a,c){if(!a||"undefined"==typeof a.changedTouches||0==a.changedTouches.length)return null;for(a=a.changedTouches[0].pageX;c&&0>c.className.indexOf("key-row");)c=c.parentNode;if(!c)return null;var b,d=0,e=24,f=1E5;for(b=0;b<c.childNodes.length;b++)if(!(0<=c.childNodes[b].firstChild.className.indexOf("key-hidden"))){var g=c.childNodes[b].offsetLeft;var l=g+c.childNodes[b].offsetWidth;
g-=a;0<=g&&g<f&&(d=b,f=g);g=a-l;0<=g&&g<f&&(d=b,f=g)}return 1E5>f&&(c=c.childNodes[d],g=c.offsetLeft,l=g+c.offsetWidth,40<c.offsetWidth&&(e=.6*c.offsetWidth),0<=g-a&&g-a<e||0<=a-l&&a-l<e)?c.firstChild:null};a.repeatDelete=function(){a.deleting&&(a.clickKey(a.deleteKey),a.deleting=window.setTimeout(a.repeatDelete,100))};a.setButtonClass=function(b,c,d){var e=0,h="default shift shift-on special special-on    deadkey blank hidden".split(" ");"string"==typeof b.dk&&"1"==b.dk&&(e=8);"string"==typeof b.sp&&
(e=parseInt(b.sp,10));if(0>e||10<e)e=0;d=d||a.layout;c.className=4<d.layer[0].row.length&&"phone"==g.device.formFactor?"kmw-key kmw-5rows kmw-key-"+h[e]:"kmw-key kmw-key-"+h[e]};a.processLegacyDefinitions=function(b){for(var c=a.generateLayerIds(!1),d={},e=0;e<c.length;e++){for(var f=c[e],g=[],k=!1,r=0;65>r;r++){var u=r+65*e;g.push(b[u]);u<b.length&&""!=b[u]&&r!=l.indexOf("K_SPACE")&&(k=!0)}k&&(d[f]=g)}"undefined"!=typeof d["default"]&&d["default"]||(d["default"]=[""]);"undefined"!=typeof d.shift&&
d.shift||(d.shift=[""]);return d};a.formatDefaultLayer=function(b,c,d,e){for(var h=b.id,f=0;f<b.row.length;f++)for(var g=b.row[f].key,l=0;l<g.length;l++){var k=g[l];switch(k.id){case "K_SHIFT":case "K_LSHIFT":case "K_RSHIFT":-1!=h.indexOf("shift")&&(k.sp=a.buttonClasses["SHIFT-ON"]);"desktop"!=d&&"default"!=h&&(k.nextlayer="default");break;case "K_LCTRL":case "K_LCONTROL":if(c){-1!=h.indexOf("leftctrl")&&(k.sp=a.buttonClasses["SHIFT-ON"]);break}case "K_RCTRL":case "K_RCONTROL":if(c){-1!=h.indexOf("rightctrl")&&
(k.sp=a.buttonClasses["SHIFT-ON"]);break}case "K_CONTROL":-1==h.indexOf("ctrl")||c&&(-1==h.indexOf("leftctrl")||-1==h.indexOf("rightctrl"))||(k.sp=a.buttonClasses["SHIFT-ON"]);break;case "K_LALT":if(c){-1!=h.indexOf("leftalt")&&(k.sp=a.buttonClasses["SHIFT-ON"]);break}case "K_RALT":if(c){-1!=h.indexOf("rightalt")&&(k.sp=a.buttonClasses["SHIFT-ON"]);break}case "K_ALT":-1==h.indexOf("alt")||c&&(-1==h.indexOf("leftalt")||-1==h.indexOf("rightalt"))||(k.sp=a.buttonClasses["SHIFT-ON"]);break;case "K_oE2":"undefined"!=
typeof e&&e||("desktop"==d?(g.splice(l--,1),g[0].width="200"):g[l].sp=a.buttonClasses.HIDDEN)}}};a.generateLayerIds=function(b){if(b){b=32;var c=1}else b=8,c=16;for(var d=[],e=0;e<b;e++)d.push(a.getLayerId(e*c));return d};a.emulatesAltGr=function(b){if(!d.keyboardManager.isChiral())return!1;if(!b){b=d.keyboardManager.activeKeyboard;if(null==b||null==b.KV)return!1;b=b.KV.KLS}var c=a.modifierCodes.LCTRL|a.modifierCodes.LALT,e=b[a.getLayerId(c)],f=b[a.getLayerId(a.modifierCodes.SHIFT|c)];if(null!=e&&
e!=b[a.getLayerId(a.modifierCodes.RALT)]||null!=f&&f!=b[a.getLayerId(a.modifierCodes.RALT|a.modifierCodes.SHIFT)])return!1;if((d.keyboardManager.getKeyboardModifierBitmask()&c)!=c)return!0;null!=e||null!=f||a.altGrWarning||(console.warn("Could not detect if AltGr emulation is safe, but defaulting to active emulation!"),a.altGrWarning=!0);return!0};a.buildDefaultLayout=function(b,c,e){var f=e;var h=d.dfltLayout;"object"!=typeof h[f]&&(f="desktop");f=g.deepCopy(h[f]);var k;h=f.layer;var n=b.KLS,r=b.K102,
u,p=c&a.modifierBitmasks.IS_CHIRAL;(c=!("undefined"==typeof n||!n))||(n=b.KLS=a.processLegacyDefinitions(b.BK));b=Object.getOwnPropertyNames(n);var t=[];b.splice(b.indexOf("default"),1);b=["default"].concat(b);a.emulatesAltGr(n)&&(-1==b.indexOf("leftctrl-leftalt")&&-1!=b.indexOf("rightalt")&&(b.push("leftctrl-leftalt"),n["leftctrl-leftalt"]=n.rightalt),-1==b.indexOf("leftctrl-leftalt-shift")&&-1!=b.indexOf("rightalt-shift")&&(b.push("leftctrl-leftalt-shift"),n["leftctrl-leftalt-shift"]=n["rightalt-shift"]));
if("desktop"==e)for(t=a.generateLayerIds(p),k=0;k<t.length;k++)-1!=b.indexOf(t[k])&&t.splice(k--,1);var z=b.concat(t);if(c&&"desktop"!=e){c=null;t=h[0].row;for(k=0;k<t.length;k++){var x=t[k].key;for(var C=0;C<x.length;C++){var v=x[C];"K_SHIFT"==v.id&&(c=v)}}if(c)for(u in c.sk=[],n)"default"!=u&&"shift"!=u&&(k=a.modifierSpecials[u],c.sk.push(new com.keyman.OSKKeySpec("K_"+k,k,null,"1",u)));else console.warn("Error in default layout - cannot find default Shift key!")}for(k=0;k<z.length;k++)0<k&&(h[k]=
g.deepCopy(h[0])),h[k].id=z[k],h[k].nextlayer=z[k],a.formatDefaultLayer(h[k],0!=p,e,!!r);for(k=0;k<h.length;k++){p=h[k];var F=C=z=c=null,y=n[p.id],A="shift"==p.id?1:0,w="default"==p.id||A?1:0;t=p.row;for(u=0;u<t.length;u++)for(x=t[u].key,r=0;r<x.length;r++){v=x[r];var D=l.indexOf(v.id);if(y||w)y&&0<=D&&D<y.length&&(v.text=y[D]),w&&(""==v.text||"undefined"==typeof v.text)&&"K_SPACE"!=v.id&&130>D+65*A&&(v.text="`1234567890-=\u00a7~~qwertyuiop[]\\~~~asdfghjkl;'~~~~~?zxcvbnm,./~~~~~ ~!@#$%^&*()_+\u00a7~~QWERTYUIOP{}\\~~~ASDFGHJKL:\"~~~~~?ZXCVBNM<>?~~~~~ "[D+
65*A]);"undefined"==typeof v.text&&(v.text="");switch(v.id){case "K_SHIFT":c=v;break;case "K_CAPS":z=v;break;case "K_NUMLOCK":C=v;break;case "K_SCROLL":F=v}if(null!=v.sk){for(D=0;D<v.sk.length;D++)-1==b.indexOf(v.sk[D].nextlayer)&&v.sk.splice(D--,1);0==v.sk.length&&(v.sk=null)}}p.shiftKey=c;p.capsKey=z;p.numKey=C;p.scrollKey=F;"desktop"!=e&&0<k&&null!=c&&(c.sp=a.buttonClasses["SHIFT-ON"],c.sk=null,c.text=a.modifierSpecials[h[k].id]?a.modifierSpecials[h[k].id]:"*Shift*")}return f};a._GenerateVisualKeyboard=
function(b,c,e,f){c=g._CreateElement("DIV");var h=d.keyboardManager.activeKeyboard;if("object"!=typeof e||null==e)e=a.buildDefaultLayout(b,f,k.formFactor);a.layout=e;a.layers=e.layer;a.fontFamily="font"in e?e.font:"";e.keyLabels="undefined"!=typeof e.displayUnderlying?1==e.displayUnderlying:h&&"undefined"!=typeof h.KDU&&h.KDU;b=a.deviceDependentLayout(e,k.formFactor);a.ddOSK=!0;a.keyMap=b;c.appendChild(b);a._DivVKbdHelp=a._DivVKbd=c;a._Box.className=k.formFactor+" "+k.OS.toLowerCase()+" kmw-osk-frame";
c.className=k.formFactor+" kmw-osk-inner-frame";"desktop"==k.formFactor&&a._Box.appendChild(a.controlBar());a._Box.appendChild(c);"desktop"==k.formFactor?a._Box.appendChild(a.resizeBar()):a.adjustHeights()};d.BuildVisualKeyboard=d.buildOSK=function(b,c,e,f){c=d.keyboardManager.activeKeyboard;var h="undefined"==typeof e?"desktop":e;f="undefined"==typeof f?"default":f;e=d.keyboardManager.keyboards;if(null!=b){var g=b.toLowerCase().replace("keyboard_","");for(b=0;b<e.length;b++)if(g==e[b].KI.toLowerCase().replace("keyboard_",
"")){c=e[b];break}}if(!c)return null;b=c.KVKL;e=null;g=c.KV;"object"==typeof b&&("object"==typeof b[h]&&null!=b[h]?e=b[h]:"phone"==h&&"object"==typeof b.tablet&&null!=b.tablet?e=b.tablet:"tablet"==h&&"object"==typeof b.phone&&null!=b.phone?e=b.phone:"object"==typeof b.desktop&&null!=b.desktop&&(e=b.desktop));null==e&&null!=g&&(e=a.buildDefaultLayout(g,d.keyboardManager.getKeyboardModifierBitmask(c),h));null!=e&&(e.keyLabels="undefined"!=typeof e.displayUnderlying?1==e.displayUnderlying:"undefined"!=
typeof c.KDU&&c.KDU);g=a.deviceDependentLayout(e,h);g.className=h+"-static kmw-osk-inner-frame";if(null!=e){var l,k;for(b=0;b<e.layer.length;b++){c=g.childNodes[b];for(l=0;l<c.childNodes.length;l++)for(h=c.childNodes[l],k=0;k<h.childNodes.length;k++){var q=h.childNodes[k];q.style.height="100%"}c.style.display="number"==typeof f?b==f&&0<=f?"block":"none":"string"==typeof f?e.layer[b].id==f?"block":"none":0==b?"block":"none"}}else g.innerHTML="<p style='color:#c40; font-size:0.5em;margin:10px;'>No "+
h+" layout is defined for "+c.KN+".</p>";g.style.border="1px solid #ccc";return g};a.adjustHeights=function(){if(a._Box&&a._Box.firstChild&&a._Box.firstChild.firstChild&&a._Box.firstChild.firstChild.childNodes){var b=a._Box.firstChild.firstChild.childNodes,c=b[0].childNodes.length,d=a.getHeight(),e=Math.floor(d/(0==c?1:c)),f,l,n;var r=1;"Android"==k.OS&&"devicePixelRatio"in window&&(e/=window.devicePixelRatio);d=c*e;c=a._Box;e=c.style;e.height=e.maxHeight=d+3+"px";c=c.firstChild.firstChild;e=c.style;
e.height=e.maxHeight=d+3+"px";"iOS"==k.OS&&(r/=g.getViewportScale());e.fontSize=r+"em";var u="iOS"==k.OS&&"phone"==k.formFactor&&g.landscapeView();for(r=0;r<b.length;r++){c=b[r].childNodes.length;e=Math.floor(d/(0==c?1:c));var p=Math.round(.15*e);b[r].style.height=d+3+"px";for(f=0;f<c;f++){var t=b[r].childNodes[f].style;t.bottom=(c-f-1)*e+1+"px";t.maxHeight=t.height=e+"px";var z=b[r].childNodes[f].childNodes;var x=z.length;for(l=0;l<x;l++){var C=z[l];for(n=0;n<C.childNodes.length&&!a.hasClass(C.childNodes[n],
"kmw-key");n++);var v=C.childNodes[n].style;v.bottom=t.bottom;v.height=v.minHeight=e-p+"px";u&&0<n&&(C.childNodes[0].style.fontSize="6px")}}}}};a.controlBar=function(){var b=g._CreateElement("DIV"),c="";b.id="keymanweb_title_bar";b.className="kmw-title-bar";b.onmousedown=a._VMoveMouseDown;d.keyboardManager.activeKeyboard&&(c=d.keyboardManager.activeKeyboard.KN);var e=g._CreateElement("SPAN");e.className="kmw-title-bar-caption";e.innerHTML=c;b.appendChild(e);c=a.closeButton=g._CreateElement("DIV");
c.id="kmw-close-button";c.className="kmw-title-bar-image";c.onmousedown=a._CancelMouse;c.onclick=function(){a._Hide(!0)};b.appendChild(c);c=a.helpImg=g._CreateElement("DIV");c.id="kmw-help-image";c.className="kmw-title-bar-image";c.title="KeymanWeb Help";c.onclick=function(){g.callEvent("osk.helpclick",{});window.event&&(window.event.returnValue=!1);return!1};c.onmousedown=a._CancelMouse;b.appendChild(c);c=a.configImg=g._CreateElement("DIV");c.id="kmw-config-image";c.className="kmw-title-bar-image";
c.title="KeymanWeb Configuration Options";c.onclick=function(){g.callEvent("osk.configclick",{});window.event&&(window.event.returnValue=!1);return!1};c.onmousedown=a._CancelMouse;b.appendChild(c);c=a.pinImg=g._CreateElement("DIV");c.id="kmw-pin-image";c.className="kmw-title-bar-image";c.title="Pin the On Screen Keyboard to its default location on the active text box";c.onclick=function(){a.loadCookie();a.userPositioned=!1;a.saveCookie();a._Show();a.doResizeMove();a.pinImg&&(a.pinImg.style.display=
"none");window.event&&(window.event.returnValue=!1);return!1};c.onmousedown=a._CancelMouse;b.appendChild(c);return b};a.showBuild=function(){g.alert("KeymanWeb Version "+d.version+"."+d.build+'<br /><br /><span style="font-size:0.8em">Copyright &copy; 2017 SIL International</span>')};a.resizeBar=function(){var b=g._CreateElement("DIV");b.className="kmw-footer";b.onmousedown=a._CancelMouse;var c=g._CreateElement("DIV");c.className="kmw-footer-caption";c.innerHTML='<a href="https://keyman.com/developer/keymanweb/">KeymanWeb</a>';
c.id="keymanweb-osk-footer-caption";g.attachDOMEvent(c,"dblclick",function(b){b&&b.shiftKey&&a.showBuild()},!1);"onselectstart"in c&&(c.onselectstart=g.selectStartHandler);b.appendChild(c);c=g._CreateElement("DIV");c.className="kmw-footer-resize";c.onmousedown=a._VResizeMouseDown;c.onmouseover=c.onmouseout=a._VResizeMouseOut;b.appendChild(c);a.resizeIcon=c;return b};a._VKbdMouseOver=function(a){d.uiManager.setActivatingUI(!0)};a._VKbdMouseOut=function(a){d.uiManager.setActivatingUI(!1)};a._VResizeMouseOver=
a._VResizeMouseOut=function(b){b=d._GetEventObject(b);if(!b)return!1;b&&b.preventDefault&&b.preventDefault();var c=a.getRect();a.width=c.width;a.height=c.height;b.cancelBubble=!0;return!1};a._VResizeMouseDown=function(b){d.uiManager.justActivated=!0;b=d._GetEventObject(b);if(!b)return!0;a.resizing=1;if(b.pageX){var c=b.pageX;var e=b.pageY}else b.clientX&&(c=b.clientX+document.body.scrollLeft,e=b.clientY+document.body.scrollTop);a._ResizeMouseX=c;a._ResizeMouseY=e;document.onmousemove!=a._VResizeMouseMove&&
document.onmousemove!=a._VMoveMouseMove&&(a._VPreviousMouseMove=document.onmousemove,a._VPreviousMouseUp=document.onmouseup);a._VPreviousCursor=document.body.style.cursor;a._VPreviousMouseButton="undefined"==typeof b.which?b.button:b.which;a._VOriginalWidth=a._DivVKbd.offsetWidth;a._VOriginalHeight=a._DivVKbd.offsetHeight;document.onmousemove=a._VResizeMouseMove;document.onmouseup=a._VResizeMoveMouseUp;document.body.style.cursor&&(document.body.style.cursor="se-resize");b&&b.preventDefault&&b.preventDefault();
b.cancelBubble=!0;return!1};a._VResizeMouseMove=function(b){b=d._GetEventObject(b);if(!b)return!0;a.resizing=1;if(a._VPreviousMouseButton!=("undefined"==typeof b.which?b.button:b.which))return a._VResizeMoveMouseUp(b);if(b.pageX){var c=b.pageX;var e=b.pageY}else b.clientX&&(c=b.clientX+document.body.scrollLeft,e=b.clientY+document.body.scrollTop);c=a._VOriginalWidth+c-a._ResizeMouseX;e=a._VOriginalHeight+e-a._ResizeMouseY;c<.2*screen.width&&(c=.2*screen.width);e<.1*screen.height&&(e=.1*screen.height);
c>.9*screen.width&&(c=.9*screen.width);e>.5*screen.height&&(c=.5*screen.height);a._DivVKbd.style.width=c+"px";a._DivVKbd.style.height=e+"px";a._DivVKbd.style.fontSize=e/8+"px";b&&b.preventDefault&&b.preventDefault();b.cancelBubble=!0;return!1};a._VMoveMouseDown=function(b){d.uiManager.justActivated=!0;b=d._GetEventObject(b);if(!b)return!0;a.resizing=1;if(b.pageX){var c=b.pageX;var e=b.pageY}else b.clientX&&(c=b.clientX+document.body.scrollLeft,e=b.clientY+document.body.scrollTop);document.onmousemove!=
a._VResizeMouseMove&&document.onmousemove!=a._VMoveMouseMove&&(a._VPreviousMouseMove=document.onmousemove,a._VPreviousMouseUp=document.onmouseup);a._VPreviousCursor=document.body.style.cursor;a._VPreviousMouseButton="undefined"==typeof b.which?b.button:b.which;a._VMoveX=c-a._Box.offsetLeft;a._VMoveY=e-a._Box.offsetTop;d.keyboardManager.isCJK()&&(a.pinImg.style.left="15px");document.onmousemove=a._VMoveMouseMove;document.onmouseup=a._VResizeMoveMouseUp;document.body.style.cursor&&(document.body.style.cursor=
"move");b&&b.preventDefault&&b.preventDefault();b.cancelBubble=!0;return!1};a._VMoveMouseMove=function(b){b=d._GetEventObject(b);if(!b||a.noDrag)return!0;a.resizing=1;a.userPositioned=!0;a.pinImg.style.display="block";if(a._VPreviousMouseButton!=("undefined"==typeof b.which?b.button:b.which))return a._VResizeMoveMouseUp(b);if(b.pageX){var c=b.pageX;var e=b.pageY}else b.clientX&&(c=b.clientX+document.body.scrollLeft,e=b.clientY+document.body.scrollTop);a._Box.style.left=c-a._VMoveX+"px";a._Box.style.top=
e-a._VMoveY+"px";b&&b.preventDefault&&b.preventDefault();c=a.getRect();a.width=c.width;a.height=c.height;b.cancelBubble=!0;return!1};a._VResizeMoveMouseUp=function(b){b=d._GetEventObject(b);if(!b)return!0;a.resizing=0;a.currentKey=null;document.onmousemove=a._VPreviousMouseMove;document.onmouseup=a._VPreviousMouseUp;document.body.style.cursor&&(document.body.style.cursor=a._VPreviousCursor);d.domManager.focusLastActiveElement();b&&b.preventDefault&&b.preventDefault();d.uiManager.justActivated=!1;
d.uiManager.setActivatingUI(!1);a._DivVKbd&&(a._VOriginalWidth=a._DivVKbd.offsetWidth,a._VOriginalHeight=a._DivVKbd.offsetHeight);a.doResizeMove();b.cancelBubble=!0;a.saveCookie();return!1};a.userLocated=function(){return a.userPositioned};a.show=function(b){0<arguments.length?(a._Enabled=b)?a._Show():a._Hide(!0):a._Visible?a._Hide(!0):a._Show()};a.doShow=function(a){return g.callEvent("osk.show",a)};a.doHide=function(a){return g.callEvent("osk.hide",a)};a.doResizeMove=function(a){return g.callEvent("osk.resizemove",
a)};a._Show=function(b,c){if(null!=a._Box&&null!=d.domManager.getActiveElement()&&(k.touchable||null!=d.keyboardManager.activeKeyboard&&a._Enabled)){var e=a._Box.style;k.touchable&&""==e.bottom&&(e.visibility="hidden");k.touchable&&(e.opacity="1");if(a.ddOSK){var f,l=-1,B=a._DivVKbd.childNodes[0].childNodes;for(f=0;f<B.length;f++)B[f].layer==a.layerId?(B[f].style.display="block",a.nextLayer=a.layerId,a.layerIndex=l=f,"string"==typeof a.layers[f].nextlayer&&(a.nextLayer=a.layers[f].nextlayer),a._UpdateVKShiftStyle()):
B[f].style.display="none";k.touchable&&(e.position="fixed",e.left=e.bottom="0px",e.height=e.maxHeight=a._Box.firstChild.firstChild.style.height,e.border="none",e.borderTop="1px solid gray",a._Enabled=1,a._Visible=1,a.lgKey=a.getSpecialKey(l,"K_LOPT"),a.hkKey=a.getSpecialKey(l,"K_ROPT"),"iOS"==k.OS&&"phone"==k.formFactor&&a.adjustHeights());a.spaceBar=a.getSpecialKey(l,"K_SPACE")}e.display="block";a.showLanguage();"desktop"==k.formFactor&&(e.position="absolute",e.display="block",e.left="0px",a.loadCookie(),
0<=b?(e.left=b+"px",e.top=c+"px"):a.userPositioned?(e.left=a.x+"px",e.top=a.y+"px"):(b=d.domManager.getActiveElement(),""!=a.dfltX?e.left=a.dfltX:"undefined"!=typeof b&&null!=b&&(e.left=g._GetAbsoluteX(b)+"px"),""!=a.dfltY?e.top=a.dfltY:"undefined"!=typeof b&&null!=b&&(e.top=g._GetAbsoluteY(b)+b.offsetHeight+"px")),a._Enabled=1,a._Visible=1,a._DivVKbd&&(a.width=a._DivVKbd.offsetWidth,a.height=a._DivVKbd.offsetHeight),a.saveCookie(),b=a.pinImg,"undefined"!=typeof b&&null!=b&&(b.style.display=a.userPositioned?
"block":"none"));"hidden"==e.visibility&&window.setTimeout(function(){a._Box.style.visibility="visible"},0);k.touchable||(e={},e.x=a._Box.offsetLeft,e.y=a._Box.offsetTop,e.userLocated=a.userPositioned,a.doShow(e))}};a.adjustRowLengths=function(b){if(!(0<=b)){var c=a._DivVKbd.childNodes[0].childNodes;if(!(0>b||b>=c.length||c[b].aligned)&&"block"==c[b].style.display){var d=a._DivVKbd.childNodes[0].offsetWidth-6;"Windows"==k.OS&&(d-=g.landscapeView()?4:40);var e,f=c[b].childNodes;for(e=0;e<f.length;e++){var l=
f[e].childNodes;var n=l.length;var r=l[n-2].offsetLeft+l[n-2].offsetWidth;l=l[n-1];l.style.width=d-r+"px"}c[b].aligned=!0}}};a.resetRowLengths=function(){var b,c=a._DivVKbd.childNodes[0].childNodes,d=-1;for(b=0;b<c.length;b++)"block"==c[b].style.display&&(d=b),c[b].aligned=!1;return d};a.getSpecialKey=function(b,c){var d=a._DivVKbd.childNodes[0].childNodes;if(0<=b&&b<d.length)for(b=d[b].childNodes,d=b[b.length-1].childNodes,b=0;b<d.length;b++)if(d[b].keyId==c)return d[b];return null};a.hide=function(){a._Enabled=
0;a._Hide(!0)};a._Hide=function(b){a._Box&&"block"==a._Box.style.display&&a._DivVKbd&&(a.width=a._DivVKbd.offsetWidth,a.height=a._DivVKbd.offsetHeight);if(b)a._Enabled=d.keyboardManager.isCJK()||k.touchable?1:0,a.saveCookie();else if("desktop"==k.formFactor&&0<=document.body.className.indexOf("osk-always-visible"))return;a._Visible=0;if(a._Box&&k.touchable&&0<a._Box.offsetHeight){var c=a._Box.style;c.transition="string"==typeof c.MozBoxSizing?"opacity 0.8s linear":c.msTransition=c.WebkitTransition=
"opacity 0.5s linear 0";window.setTimeout(function(){var b=a._Box.style;a._Visible?b.transition=b.msTransition=b.MozTransition=b.WebkitTransition="":(b.opacity="0",a._Box.addEventListener("transitionend",a.hideNow,!1),a._Box.addEventListener("webkitTransitionEnd",a.hideNow,!1))},200)}else a._Box&&(a._Box.style.display="none");c={};c.HiddenByUser=b;a.doHide(c);b&&d.domManager.focusLastActiveElement()};a.hideNow=function(){a._Box.removeEventListener("transitionend",a.hideNow,!1);a._Box.removeEventListener("webkitTransitionEnd",
a.hideNow,!1);var b=a._Box.style;b.display="none";b.opacity="1";a._Visible=0;b.transition=b.msTransition=b.mozTransition=b.WebkitTransition="";a.hkKey&&"undefined"!=typeof a.hkKey&&a.highlightKey(a.hkKey.firstChild,!1)};a.prepare=function(){if(d.initialized){if(!a.ready&&(a._Box=g._CreateElement("DIV"),document.body.appendChild(a._Box),g.linkStyleSheet(d.getStyleSheetPath("kmwosk.scss")),g.attachDOMEvent(a._Box,"mousedown",function(){d.uiManager.setActivatingUI(!0)}),k.touchable)){var b=function(a){a.cancelable&&
a.preventDefault();a.stopPropagation();return!1};g.attachDOMEvent(a._Box,"touchstart",function(a){d.uiManager.setActivatingUI(!0);return b(a)});g.attachDOMEvent(a._Box,"touchend",b);g.attachDOMEvent(a._Box,"touchmove",b);g.attachDOMEvent(a._Box,"touchcancel",b);a.vpScale=g.getViewportScale()}a.loadCookie();a.ready=!0}else window.setTimeout(a.prepare,200)};a._Load=function(){var b=d.keyboardManager.activeKeyboard;if(null==a._Box)99<=a.loadRetry||(window.setTimeout(a._Load,100),a.loadRetry++);else{a.loadRetry=
0;d._TitleElement&&(d._TitleElement.innerHTML="KeymanWeb");a._Visible=0;a.layerId="default";var c=a._Box.style;c.zIndex="9999";c.display="none";c.width="auto";c.position="desktop"==k.formFactor?"absolute":"fixed";if(k.touchable){var e=1;if("phone"==k.formFactor)e=1.92*(d.isEmbedded?.65:.6);else{var f=1;"Android"==k.OS&&"devicePixelRatio"in window&&(f=window.devicePixelRatio);e="Android"==k.OS&&"tablet"==k.formFactor&&parseInt(a.getHeight(),10)<300*f?1.2*e:2*e}c.fontSize=e+"em"}a._DivVKbd=a._DivVKbdHelp=
null;a._Box.innerHTML="";a._Box.onmouseover=a._VKbdMouseOver;a._Box.onmouseout=a._VKbdMouseOut;if(null!=b||k.touchable){e=null;f=null;c="";a._Box.className="";if(null!=b){e=b.KV;c=b.KH;var l=b.KVKL;"undefined"!=typeof l&&null!=l&&(f=l[k.formFactor],"undefined"==typeof f||null==f)&&("phone"==k.formFactor?f=l.tablet:"tablet"==k.formFactor&&(f=l.phone),"undefined"==typeof f||null==f)&&(f=l.desktop)}if(null!=e&&null!=e.BK){l=e.BK;for(var B=!0,n=0;n<l.length;n++)if(0<l[n].length){B=!1;break}B&&(e=null)}null!=
e||""==c||k.touchable?(null==e&&(e={F:"Tahoma",BK:"`1234567890-=\u00a7~~qwertyuiop[]\\~~~asdfghjkl;'~~~~~?zxcvbnm,./~~~~~ ~!@#$%^&*()_+\u00a7~~QWERTYUIOP{}\\~~~ASDFGHJKL:\"~~~~~?ZXCVBNM<>?~~~~~ "}),a._GenerateVisualKeyboard(e,c,f,d.keyboardManager.getKeyboardModifierBitmask())):(a.ddOSK=!1,e=g._CreateElement("DIV"),e.className="kmw-title-bar",e.appendChild(a._TitleBarInterior()),e.onmousedown=a._VMoveMouseDown,a._Box.appendChild(e),e=g._CreateElement("DIV"),e.className="kmw-osk-static",e.innerHTML=
c,a._Box.appendChild(e),b.KHF&&b.KHF(a._Box));d._TitleElement&&(d._TitleElement.innerHTML="<span style='font-weight:bold'>"+b.KN+"</span> - "+d._TitleElement.innerHTML,d._TitleElement.className="",d._TitleElement.style.color="#fff")}else e=g._CreateElement("DIV"),e.className="kmw-title-bar",e.appendChild(a._TitleBarInterior()),e.onmousedown=a._VMoveMouseDown,a._Box.appendChild(e),e=g._CreateElement("DIV"),e.className="kmw-osk-none",a._Box.appendChild(e);a.createKeyTip();c=a._Box.firstChild;b=" kmw-keyboard-"+
(b?b.KI.replace("Keyboard_",""):"");"keymanweb_title_bar"==c.id&&(c=c.nextSibling);c.className="kmw-osk-inner-frame"+b;a.appendStyleSheet();a._Enabled&&a._Show()}};a.appendStyleSheet=function(){var b=d.keyboardManager.activeKeyboard,c=d.keyboardManager.activeStub;if(null!=c){a.styleSheet&&g.removeStyleSheet(a.styleSheet);var e=c.KFont;c=c.KOskFont;g.addFontFaceStyleSheet(e);g.addFontFaceStyleSheet(c);d.hideInputs();var f=a.addFontStyle(e,c);null!=b&&"string"==typeof b.KCSS&&(f+=b.KCSS);a.styleSheet=
g.addStyleSheet(f);a.waitForFonts(e,c)&&d.alignInputs()}};a.addFontStyle=function(a,c){var b=d.baseFont;"undefined"!=typeof a&&"undefined"!=typeof a.family&&(b=a.family);b=b.replace(/\u0022/g,"");var e=new RegExp("\\s?"+b+",?"),f=d.appliedFont.replace(/\u0022/g,"");f=f.replace(e,"");f=f.replace(/,$/,"");f='"'+(""==f?b:b+","+f).replace(/,\s?/g,'","')+'"';b=".keymanweb-font{\nfont-family:"+f+" !important;\n}\n";"undefined"!=typeof c?b=b+'.kmw-key-text{\nfont-family:"'+c.family.replace(/\u0022/g,"").replace(/,/g,
'","')+'";\n}\n':"undefined"!=typeof a&&(b=b+'.kmw-key-text{\nfont-family:"'+a.family.replace(/\u0022/g,"").replace(/,/g,'","')+'";\n}\n');d.appliedFont=f;return b};a._Unload=function(){a._VShift=a._DivVKbd=a._VKeySpans=a._Box=0};a.saveCookie=function(){var b=g.loadCookie("KeymanWeb_OnScreenKeyboard"),c=a.getPos();b.visible=a._Enabled?1:0;b.userSet=a.userPositioned?1:0;b.left=c.left;b.top=c.top;a._DivVKbd&&(b.width=a.width,b.height=a.height);g.saveCookie("KeymanWeb_OnScreenKeyboard",b)};a.loadCookie=
function(){var b=g.loadCookie("KeymanWeb_OnScreenKeyboard");if("undefined"==typeof b||null==b)return a.userPositioned=!1;a._Enabled=g.toNumber(b.visible,!0);a.userPositioned=g.toNumber(b.userSet,!1);a.x=g.toNumber(b.left,-1);a.y=g.toNumber(b.top,-1);var c=g.toNumber(b.width,.3*screen.width);b=g.toNumber(b.height,.15*screen.height);c<.2*screen.width&&(c=.2*screen.width);b<.1*screen.height&&(b=.1*screen.height);c>.9*screen.width&&(c=.9*screen.width);b>.5*screen.height&&(b=.5*screen.height);a._DivVKbd&&
(a._DivVKbd.style.width=c+"px",a._DivVKbd.style.height=b+"px",a._DivVKbd.style.fontSize=b/8+"px");-1!=a.x&&-1!=a.y&&a._Box||(a.userPositioned=!1);a.x<window.pageXOffset-.8*c&&(a.x=window.pageXOffset-.8*c);0>a.y&&(a.x=-1,a.y=-1,a.userPositioned=!1);a.userPositioned&&a._Box&&a.setPos({left:a.x,top:a.y});return!0};a.getWidthFromCookie=function(){var a=g.loadCookie("KeymanWeb_OnScreenKeyboard");if("undefined"==typeof a||null==a)return.3*screen.width;a=g.toNumber(a.width,.3*screen.width);a<.2*screen.width?
a=.2*screen.width:a>.9*screen.width&&(a=.9*screen.width);return a};a.getFontSizeFromCookie=function(){var a=g.loadCookie("KeymanWeb_OnScreenKeyboard");if("undefined"==typeof a||null==a)return 16;a=g.toNumber(a.height,.15*screen.height);a>.5*screen.height&&(a=.5*screen.height);return a/8}}();
(function(d){(function(a){var d=function(){function a(){this.innerWidth=window.innerWidth;this.innerHeight=window.innerHeight}a.prototype.equals=function(a){return this.innerWidth==a.innerWidth&&this.innerHeight==a.innerHeight};return a}(),k=function(){function a(d){this.idlePermutationCounter=a.IDLE_PERMUTATION_CAP;this.keyman=d}a.prototype.resolve=function(){this.keyman.alignInputs();var a=this.keyman.osk;a.hideLanguageList();a._Load();this.oskVisible&&a._Show();this.isActive=!1;this.updateTimer&&
(window.clearInterval(this.updateTimer),this.rotState=null)};a.prototype.initNewRotation=function(){this.oskVisible=this.keyman.osk.isVisible();this.keyman.osk.hideNow();this.isActive=!0};a.prototype.init=function(){if(!this.keyman.isEmbedded){var a=this.keyman.util.device.OS,d=this.keyman.util,b=this;"iOS"==a?(d.attachDOMEvent(window,"orientationchange",function(){b.iOSEventHandler();return!1}),d.attachDOMEvent(window,"resize",function(){b.iOSEventHandler();return!1})):"Android"==a&&("onmozorientationchange"in
screen?d.attachDOMEvent(screen,"mozorientationchange",function(){b.initNewRotation();return!1}):d.attachDOMEvent(window,"orientationchange",function(){b.initNewRotation();return!1}),d.attachDOMEvent(window,"resize",function(){b.resolve();return!1}))}};a.prototype.iOSEventHandler=function(){this.isActive||(this.initNewRotation(),this.rotState=new d,this.updateTimer=window.setInterval(this.iOSEventUpdate.bind(this),a.UPDATE_INTERVAL));this.idlePermutationCounter=0};a.prototype.iOSEventUpdate=function(){var e=
new d;this.rotState.equals(e)?++this.idlePermutationCounter==a.IDLE_PERMUTATION_CAP&&this.resolve():(this.rotState=e,this.idlePermutationCounter=0)};a.IDLE_PERMUTATION_CAP=15;a.UPDATE_INTERVAL=20;return a}();a.RotationManager=k})(d.keyman||(d.keyman={}))})(com||(com={}));
window.keyman.initialized||function(){var d=window.keyman,a=d.osk,g=d.util,k=g.device;d.isEmbedded=!1;d.setDefaultDeviceOptions=function(a){""==a.attachType&&(a.attachType=k.touchable?"manual":"auto")};g.wait=function(a){var e=this.waiting;if("undefined"!=typeof e&&null!=e&&!d.warned){var g=e.firstChild.childNodes;a?(e.pending=!0,window.setTimeout(function(){e.pending&&(window.scrollTo(0,0),g[0].style.display="none",g[1].className="kmw-wait-text",g[1].innerHTML=a,g[2].style.display="block",e.style.display=
"block")},1E3)):e.pending&&(g[1].innerHTML="",e.pending=!1,e.style.display="none")}};d.getStyleSheetPath=function(a){return g.getOption("resources")+"osk/"+a};d.getKeyboardPath=function(a){return(/^(([\.]\/)|([\.][\.]\/)|(\/))|(:)/.test(a)?"":d.options.keyboards)+a};d.KC_=function(a,f,g){var b,c="",e=g.body?g:g.ownerDocument;if(k.touchable)c=d.touchAliasing.getTextBeforeCaret(g);else if(e&&(b=e.defaultView)&&b.getSelection&&("on"==e.designMode.toLowerCase()||"true"==g.contentEditable||"plaintext-only"==
g.contentEditable||""===g.contentEditable))g=b.getSelection(),3==g.focusNode.nodeType&&(c=g.focusNode.substringData(0,g.focusOffset));else if(g.setSelectionRange){if(g._KeymanWebSelectionStart)c=g._KeymanWebSelectionStart;else{if(null===d._CachedSelectionStart||g.selectionStart!==d._LastCachedSelection)d._LastCachedSelection=g.selectionStart,d._CachedSelectionStart=g.value._kmwCodeUnitToCodePoint(g.selectionStart),d._CachedSelectionEnd=g.value._kmwCodeUnitToCodePoint(g.selectionEnd);c=d._CachedSelectionStart}c=
g.value._kmwSubstr(0,c)}c._kmwLength()<a&&(c=Array(a-c._kmwLength()+1).join("\ufffe")+c);return c._kmwSubstr(-a)._kmwSubstr(0,f)};d.alignInputs=function(a){if(k.touchable){var e=d.domManager,g=[];a?a.forEach(function(a){a.base?g.push(a):a.kmw_ip&&g.push(a.kmw_ip)}):g=e.inputList;g.forEach(function(a){e.touchHandlers.updateInput(a);a.style.visibility="visible";0<a.base.textContent.length&&(a.base.style.visibility="hidden")})}};d.hideInputs=function(){var a=d.domManager;if(k.touchable)for(var f=0;f<
a.inputList.length;f++)a.inputList[f].style.visibility="hidden",a.inputList[f].base.style.visibility="visible"};d.isPositionSynthesized=function(){return k.touchable};a.highlightSubKeys=function(d,f,k){if(null!=d&&null!=d.subKeys){var b,c=document.getElementById("kmw-popup-keys");5<a.touchY-k&&null==c&&(a.subkeyDelayTimer&&window.clearTimeout(a.subkeyDelayTimer),a.showSubKeys(d),c=document.getElementById("kmw-popup-keys"));for(b=0;b<d.subKeys.length;b++)try{var e=c.childNodes[b].firstChild;var l=
g._GetAbsoluteX(e);var m=g._GetAbsoluteY(e);var B=l+e.offsetWidth;var n=m+e.offsetHeight;var r=f>l&&f<B&&k>m&&k<n;a.highlightKey(e,r);r&&a.highlightKey(d,!1)}catch(u){}}};a.optionKey=function(e,f,g){g&&(0<=f.indexOf("K_LOPT")?a.showLanguageMenu():0<=f.indexOf("K_ROPT")&&(d.uiManager.setActivatingUI(!1),a._Hide(!0),d.touchAliasing.hideCaret(),d.domManager.clearLastActiveElement()))};a.createKeyTip=function(){"phone"==k.formFactor&&(null==a.keytip&&(a.keytip=g._CreateElement("div"),a.keytip.className=
"kmw-keytip",a.keytip.id="kmw-keytip",a.keytip.style.pointerEvents="none",a.keytip.appendChild(g._CreateElement("canvas")),a.keytip.appendChild(g._CreateElement("span")),a.keytip.key=null,a.keytip.state=!1),a._Box.appendChild(a.keytip))};a.showKeyTip=function(d,f){var e=a.keytip;if(null!=e&&(d!=e.key||f!=e.state)){var b=document.getElementById("kmw-popup-keys");b=b&&"visible"==b.style.visibility;if(f&&!b){var c=g._GetAbsoluteY(a._Box),h=a._Box.offsetHeight;b=g._GetAbsoluteX(d);for(var k=g._GetAbsoluteY(d),
m=d.offsetWidth,B=d.offsetHeight,n=d.firstChild,r=e.style,u=e.childNodes[1],p=u.style,t=0,z=e.firstChild,x=0;x<d.childNodes.length&&(n=d.childNodes[x],!a.hasClass(n,"kmw-key-text"));x++);z.width=1.6*m;z.height=2.3*B;r.top="auto";r.bottom=c+h-k-B+"px";r.textAlign="center";r.overflow="visible";r.fontFamily=g.getStyleValue(n,"font-family");r.width=z.width+"px";r.height=z.height+"px";c=g.getStyleInt(n,"font-size");0!=c&&(c*=1.8,r.fontSize=c+"px",h=com.keyman.OSKKey.getTextWidth(u.textContent,r),h=.9*
z.width/h,1>h&&(r.fontSize=c*h+"px"));u.textContent=n.textContent;p.display="block";p.position="absolute";p.textAlign="center";p.width="100%";p.top="2%";p.bottom="auto";n=(z.width-m)/2;b<n?(t=-1,b+=n):b>window.innerWidth-m-n&&(t=1,b-=n);a.drawPreview(z,m,B,t);r.left=b-n+"px";r.display="block"}else e.style.display="none";e.key=d;e.state=f}};a.drawPreview=function(a,d,g,b){g=a.getContext("2d");var c=(a.width-d)/2,e=a.height,f=c,l=d+c;d+=2*c;var B=.5*e,n=.6*e,r=8;"Android"==k.OS&&(r=3);switch(b){case -1:f-=
c;l-=c;break;case 1:f+=c,l+=c}g.clearRect(0,0,a.width,a.height);"Android"==k.OS?(f=l=(f+l)/2,g.fillStyle="#999"):g.fillStyle="#ffffff";g.lineWidth="1";g.strokeStyle="#cccccc";g.save();g.beginPath();g.moveTo(0+r,0);g.arcTo(d,0,d,r,r);"Android"==k.OS?(g.arcTo(d,B,l,n,r),g.arcTo(l,n,f,n,r)):(g.arcTo(d,B,l,n,r),g.arcTo(l,n,l-r,e,r),g.arcTo(l,e,f,e,r),g.arcTo(f,e,f,n-r,r));g.arcTo(f,n,0,B-r,r);g.arcTo(0,B,0,r,r);g.arcTo(0,0,0+r,0,r);g.fill();g.stroke();g.restore()};a.addCallout=function(d){if("phone"!=
k.formFactor||"iOS"!=k.OS)return null;var e=g._CreateElement("div"),l=e.style;e.id="kmw-popup-callout";a._Box.appendChild(e);var b=d.offsetLeft,c=d.offsetWidth,h=d.offsetHeight;l.top=d.offsetTop-6+"px";l.left=b+"px";l.width=c+"px";l.height=h+6+"px";return e};a.touchHold=function(d){a.subkeyDelayTimer&&(window.clearTimeout(a.subkeyDelayTimer),a.subkeyDelayTimer=null);"undefined"!=typeof d.subKeys&&null!=d.subKeys&&(a.subkeyDelayTimer=window.setTimeout(function(){a.clearPopup();a.showSubKeys(d)},a.popupDelay))};
d.handleRotationEvents=function(){(new com.keyman.RotationManager(d)).init()};a.waitForFonts=function(a,f){if("undefined"==typeof a&&"undefined"==typeof f||"undefined"==typeof a.files&&"undefined"==typeof f.files)return!0;var e=g.checkFontDescriptor(a),b=g.checkFontDescriptor(f);if(e&&b)return!0;d.fontCheckTimer=window.setInterval(function(){g.checkFontDescriptor(a)&&g.checkFontDescriptor(f)&&(window.clearInterval(d.fontCheckTimer),d.fontCheckTimer=null,d.alignInputs())},100);window.setTimeout(function(){d.fontCheckTimer&&
(window.clearInterval(d.fontCheckTimer),d.fontCheckTimer=null,d.alignInputs())},5E3);return!1}}();
window.keyman.initialized||(window.keyman.dfltLayout={desktop:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"1",key:[{id:"K_BKQUOTE"},{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"130"}]},{id:"2",key:[{id:"K_TAB",text:"*Tab*",sp:"1",width:"130"},{id:"K_Q"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},
{id:"K_LBRKT"},{id:"K_RBRKT"},{id:"K_BKSLASH"}]},{id:"3",key:[{id:"K_CAPS",text:"*Caps*",sp:"1",width:"165"},{id:"K_A"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_ENTER",text:"*Enter*",sp:"1",width:"165"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"130"},{id:"K_oE2"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_RSHIFT",
text:"*Shift*",sp:"1",width:"130"}]},{id:"5",key:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"170"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_SPACE",text:"",width:"770"},{id:"K_RALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_RCONTROL",text:"*Ctrl*",sp:"1",width:"170"}]}]}]},tablet:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{sp:"10",
width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},
{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"200",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LCONTROL",text:"*LCtrl*",sp:"1",width:"50",nextlayer:"leftctrl"},{id:"K_RCONTROL",text:"*RCtrl*",sp:"1",width:"50",nextlayer:"rightctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_LALT",text:"*LAlt*",sp:"1",width:"50",nextlayer:"leftalt"},{id:"K_RALT",text:"*RAlt*",
sp:"1",width:"50",nextlayer:"rightalt"},{id:"K_ALTGR",text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrl-alt"}]},{id:"K_LOPT",text:"*Menu*",sp:"1",width:"150"},{id:"K_SPACE",text:"",width:"570"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"150"},{id:"K_ENTER",text:"*Enter*",sp:"1",width:"200"}]}]}]},phone:{font:"Tahoma,Helvetica",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},
{sp:"10",width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},
{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"200",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LCONTROL",text:"*LCtrl*",sp:"1",width:"50",nextlayer:"leftctrl"},{id:"K_RCONTROL",text:"*RCtrl*",sp:"1",width:"50",nextlayer:"rightctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_LALT",text:"*LAlt*",sp:"1",width:"50",nextlayer:"leftalt"},{id:"K_RALT",
text:"*RAlt*",sp:"1",width:"50",nextlayer:"rightalt"},{id:"K_ALTGR",text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrl-alt"}]},{id:"K_LOPT",text:"*Menu*",width:"150",sp:"1"},{id:"K_SPACE",width:"570",text:""},{id:"K_BKSP",text:"*BkSp*",width:"150",sp:"1"},{id:"K_ENTER",text:"*Enter*",width:"200",sp:"1"}]}]}]}});(function(){var d=window.keyman,a=window.setInterval(function(){"complete"===document.readyState&&(window.clearInterval(a),d.init(null))},10)})();var CLOSURE_NO_DEPS=!0;
(function(){var d=com.keyman.Util.prototype;d.getAbsoluteX=d._GetAbsoluteX;d.getAbsoluteY=d._GetAbsoluteY;d.getAbsolute=d._GetAbsolute;d.toNzString=d.nzString})();
(function(){var d=com.keyman.KeyboardInterface.prototype,a=function(a,k){d[a]=d[k]};a("KSF","saveFocus");a("KBR","beepReset");a("KT","insertText");a("KR","registerKeyboard");a("KRS","registerStub");a("KC","context");a("KN","nul");a("KCM","contextMatch");a("KFCM","fullContextMatch");a("KIK","isKeypress");a("KKM","keyMatch");a("KSM","stateMatch");a("KKI","keyInformation");a("KDM","deadkeyMatch");a("KB","beep");a("KA","any");a("KDC","deleteContext");a("KO","output");a("KDO","deadkeyOutput");a("KIO",
"indexOutput");a("KIFS","ifStore");a("KSETS","setStore");a("KLOAD","loadStore");a("KSAVE","saveStore")})();
//# sourceMappingURL=keymanweb.js.map
