{"version":3,"file":"kmwuibutton.js","sourceRoot":"","sources":["../source/kmwuibutton.ts"],"names":[],"mappings":"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","sourcesContent":["/***\r\n   KeymanWeb 11.0\r\n   Copyright 2019 SIL International\r\n***/\r\n\r\n// If a UI module has been loaded, we can rely on the publically-published 'name' property\r\n// having been set as a way to short-out a UI reload.  Its parent object always exists by\r\n// this point in the build process.\r\nif(!window['keyman']['ui']['name']) { \r\n\r\n  /********************************/\r\n  /*                              */\r\n  /* Button User Interface Code   */\r\n  /*                              */\r\n  /********************************/\r\n\r\n  /**\r\n   * Do not enclose in an anonymous function, as the compiler may create\r\n   * global scope variables to replace true, false, null, whcih can then collide\r\n   * with other variables.\r\n   * Instead, use the --output-wrapper command during optimization, which will\r\n   * add the anonymous function to enclose all code, including those optimized\r\n   * variables which would otherwise have global scope.\r\n   **/  \r\n\r\n  try {\r\n    // Declare KeymanWeb, OnScreen keyboard and Util objects\r\n    var keymanweb=window['keyman'],osk=keymanweb['osk'],\r\n      util=keymanweb['util'],dbg=keymanweb['debug'];\r\n    \r\n    // Disable UI for touch devices\r\n    if(util['isTouchDevice']()) throw '';\r\n    \r\n    // User interface global and variables      \r\n    keymanweb['ui'] = {};\r\n    var ui=keymanweb['ui'];\r\n    ui['name'] = 'button';\r\n  \r\n    ui.init = false;  \r\n    ui.KeyboardSelector = null;\r\n\r\n    ui.KeymanWeb_DefaultKeyboardHelp='<span style=\"font-size:7.5pt\">KeymanWeb is not running.  Choose a keyboard from the list</span>';\r\n    ui._KeymanWeb_KbdList = null; \r\n    ui._KMWSel = null; \r\n    ui._IsHelpVisible = false; \r\n    ui._DefaultKeyboardID = '';\r\n\r\n    ui.updateTimer = null;\r\n    ui.updateList = true;\r\n    \r\n    /**\r\n     * Highlight the currently active keyboard in the list of keyboards\r\n     **/   \r\n    ui._ShowSelected = function()\r\n    {\r\n      var _rv,kbd=keymanweb['getActiveKeyboard'](),lgc=keymanweb['getActiveLanguage'](), \r\n        kList = ui._KeymanWeb_KbdList.childNodes,\r\n        _r = /^KMWSel_(.*)\\$(.*)$/;\r\n  \r\n      for(var i=1; i<kList.length; i++)\r\n        kList[i].childNodes[0].className = '';\r\n        \r\n      for(var i=2; i<kList.length; i++)\r\n      {\r\n        _rv = _r.exec(kList[i].childNodes[0].id);\r\n        if(_rv && (_rv[1] == kbd) && (_rv[2] == lgc)) break;\r\n      } \r\n      if(i >= kList.length) i=1;      \r\n      kList[i].childNodes[0].className = 'selected'; \r\n    } \r\n      \r\n    /**\r\n     * Select keyboard by id\r\n     * \r\n     * @param       {Event}  _id   keyboard selection event\r\n     * @return      {boolean}   \r\n     */\r\n    ui._SelectKeyboard = function(_id)\r\n    { \r\n      if(typeof(_id) == 'object') \r\n      {\r\n        var t=null;\r\n        if((typeof(_id.target) != 'undefined') && _id.target) t=_id.target;\r\n        else if((typeof(_id.srcElement) != 'undefined') && _id.srcElement) t=_id.srcElement; \r\n        if(t) _id=t.id;\r\n      }\r\n      \r\n      var _r=/^KMWSel_(.*)\\$(.*)$/; \r\n      var _rv=_r.exec(_id),_lgc='',_name='';\r\n      if(_rv !== null) \r\n      {\r\n        _name = _rv[1].split('$')[0]; //new code\r\n        _lgc = _id.split('$')[1];  \r\n        if(ui._KMWSel != null) ui._KMWSel.className = '';\r\n        var _k = document.getElementById(_id); \r\n        if(_k) _k.className='selected'; \r\n        ui._KMWSel = _k;  \r\n        keymanweb['setActiveKeyboard'](_name,_lgc);\r\n      }\r\n      else \r\n        _name=null;\r\n      \r\n      keymanweb['focusLastActiveElement']();\r\n      if(osk['isEnabled']()) osk['show'](true);    \r\n\r\n      ui._ShowKeyboardButton(_name);\r\n      return false;\r\n    } \r\n\r\n    /**\r\n     * Set KMW UI activation state on mouse click\r\n     * \r\n     * @param       {Event}    e     event\r\n     */    \r\n    ui._SelectorMouseDown = function(e)\r\n    { \r\n      var x=keymanweb['getLastActiveElement'](); \r\n\r\n      // Set the focus to an input field, to get correct OSK display behaviour\r\n      if(!x) ui._FocusFirstInput(); else keymanweb['focusLastActiveElement']();\r\n  \r\n      if(keymanweb['activatingUI']) keymanweb['activatingUI'](1);\r\n    }\r\n\r\n    /**\r\n     * Set focus on mouse up\r\n     * \r\n     * @param       {Event}    e     event\r\n     */    \r\n    ui._SelectorMouseUp = function(e)\r\n    { \r\n      var x=keymanweb['getLastActiveElement']();\r\n      \r\n      // Set the focus to an input field, to get correct OSK display behaviour\r\n      if(!x) ui._FocusFirstInput(); else keymanweb['focusLastActiveElement']();\r\n    }\r\n\r\n    /**\r\n     * Set KMW UI activation state on mouse over\r\n     * \r\n     * @param       {Event}   e     event\r\n     */    \r\n    ui._SelectorMouseOver = function(e)\r\n    {\r\n      // highlight the currently active keyboard\r\n      ui._ShowSelected();\r\n\r\n      if(keymanweb['activatingUI']) keymanweb['activatingUI'](1);\r\n      document.getElementById(\"kmwico_li\").className=\"sfhover\";\r\n\r\n      // Conditionally display keyboard button\r\n      ui._ShowKeyboardButton();\r\n    }\r\n\r\n    /**\r\n     * Sets the focus to the first input or textarea found on the current page\r\n     * to ensure consistent keyboard selection and OSK display behaviour   \r\n     */       \r\n    ui._FocusFirstInput = function()\r\n    {\r\n      var i,ip=null,tp=null,\r\n        iList=document.getElementsByTagName(\"input\"),\r\n        tList=document.getElementsByTagName(\"textarea\");\r\n      \r\n      for(i=0; i<iList.length; i++)\r\n        if(iList[i].type == 'text') break; \r\n      \r\n      if(i < iList.length) ip=iList[i];\r\n      \r\n      if(tList.length > 0) tp = tList[0];\r\n      \r\n      if((!ip) && (!tp))\r\n        return;\r\n      else if(ip && !tp)\r\n        ip.focus();\r\n      else if(tp && !ip)\r\n        tp.focus();\r\n      else if(ip.offsetTop < tp.offsetTop)\r\n        ip.focus();\r\n      else if(ip.offsetTop > tp.offsetTop)\r\n        tp.focus();\r\n      else if(ip.offsetLeft < tp.offsetLeft)\r\n        ip.focus();\r\n      else\r\n        tp.focus();\r\n    }\r\n    \r\n    /**\r\n     * Clear KMW UI activation state on mouse out\r\n     * \r\n     * @param       {Event}    e     event\r\n     */    \r\n    ui._SelectorMouseOut = function(e)\r\n    {\r\n      if(keymanweb['activatingUI']) keymanweb['activatingUI'](0);\r\n      document.getElementById(\"kmwico_li\").className=\"sfunhover\";\r\n    }\r\n\r\n    /**\r\n     * Disable the button to show/hide the OSK if no active keyboard or active keyboard is CJK (user cannot hide)\r\n     * \r\n     * @param       {?string=}  _name     current keyboard name\r\n     */    \r\n    ui._ShowKeyboardButton = function(_name)\r\n    {\r\n      var kbdName = keymanweb['getActiveKeyboard'](), kbdId=document.getElementById(\"KMW_Keyboard\");\r\n      if(arguments.length > 0) kbdName = _name;\r\n      if(kbdId)\r\n      {\r\n        if((kbdName == '') || keymanweb['isCJK']())\r\n        { \r\n          kbdId.className='kmw_disabled';\r\n        } \r\n        else\r\n        {\r\n          kbdId.className = osk['isEnabled']() ? 'kmw_show' : 'kmw_hide';\r\n        }\r\n      }\r\n    }  \r\n  \r\n    /**\r\n     * UI Functions called by KeymanWeb or OSK\r\n     */     \r\n    osk['addEventListener']('show',\r\n      function(oskPosition)\r\n      { \r\n        var t=keymanweb['getLastActiveElement']();\r\n        if(t)\r\n        {  \r\n          if(!oskPosition['userLocated'])\r\n          {\r\n            oskPosition['x'] = util['getAbsoluteX'](t);\r\n            oskPosition['y'] = util['getAbsoluteY'](t)+t.offsetHeight;\r\n          }\r\n        } \r\n        \r\n        ui._ShowKeyboardButton();\r\n        return oskPosition; \r\n      }); \r\n  /* TODO: why is this still needed??? Does it actually do anything?? */ \r\n    osk['addEventListener']('hide',\r\n      function(hiddenByUser)\r\n      { \r\n        if((arguments.length > 0) && hiddenByUser)\r\n        {\r\n          var _a = document.getElementById('KMW_Keyboard');\r\n          if(_a) _a.className = 'kmw_hide';\r\n        }    \r\n      }); \r\n    \r\n    /**\r\n     * Show or hide the OSK (always visible for CJK keyboards)\r\n     * \r\n     * @param       {Object}    _anchor     anchor element (?)\r\n     * @return      {boolean}   \r\n     **/   \r\n    ui._ShowKeymanWebKeyboard = function(_anchor) \r\n    { \r\n      var kbdId=document.getElementById(\"KMW_Keyboard\");\r\n      if((kbdId.className!='kmw_disabled') && osk['show']) \r\n      {\r\n        if(osk['isEnabled']()) osk['hide'](); else osk['show'](true);\r\n      }\r\n      if(window.event) window.event.returnValue=false;\r\n\r\n      keymanweb['focusLastActiveElement']();    \r\n      return false;    \r\n    }\r\n\r\n    /**\r\n     * Initialize Button User Interface\r\n     **/   \r\n    ui.Initialize = function()\r\n    {\r\n      //Never initialize UI before KMW (parameters will be undefined)\r\n      if(!keymanweb['initialized'])\r\n      {\r\n        window.setTimeout(ui.Initialize,250); return;\r\n      }\r\n      \r\n      if(ui.init || util['isTouchDevice']()) return; \r\n      \r\n      ui.init = true;\r\n          \r\n      util['addStyleSheet'](ui._Appearance);\r\n    \r\n      ui._KeymanWeb_KbdList = util['createElement']('ul');\r\n      ui._KeymanWeb_KbdList.id = 'KeymanWeb_KbdList';\r\n      \r\n      var _elem = document.getElementById('KeymanWebControl');\r\n      if(!_elem)\r\n      {\r\n        var _elems = document.getElementsByTagName('div');\r\n        for(var _i = 0; _i < _elems.length; _i++)\r\n        {\r\n          if(_elems[_i].className == 'KeymanWebControl')\r\n          {\r\n            _elem = _elems[_i]; break;\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Insert as first child of body if not defined by user\r\n      if(!_elem && (document.body != null))\r\n      {\r\n        _elem=document.createElement('DIV');\r\n        _elem.id='KeymanWebControl';  \r\n        document.body.insertBefore(_elem,document.body.firstChild);\r\n        ui._insertedElem = _elem;\r\n      }\r\n    \r\n    \r\n      var imgPath=util['getOption']('resources')+'ui/button/';\r\n      if(_elem)\r\n      { \r\n        // Append another DIV to follow the main control with clear:both to prevent selection over entire width of window\r\n        var dx=document.createElement('DIV'),ds=dx.style;\r\n        ds.clear='both';\r\n        _elem.parentNode.insertBefore(dx,_elem.nextSibling);\r\n      \r\n        var _btn=util['createElement']('img'), _ul=util['createElement']('ul'),_li0=util['createElement']('li');\r\n        _btn.id = 'kmwico_a';\r\n        _btn.src = imgPath+'kmw_button.gif';\r\n        _btn.onclick = function(){return false;}  //may want to use this in iOS *****\r\n        _li0.appendChild(_btn);\r\n        _li0.id = 'kmwico_li';\r\n        _ul.appendChild(_li0);\r\n        _ul.id = 'kmwico';\r\n        _ul.style.display = 'block';\r\n        _elem.appendChild(_ul);\r\n      }\r\n      // Do not define any UI behaviour if no controller element can be found\r\n      else return;\r\n\r\n      if(!keymanweb['iOS'])\r\n      {   \r\n        var _li = util['createElement']('li'); \r\n        var _a = util['createElement']('a');\r\n        var _img = util['createElement']('img');\r\n        _img.src = imgPath+'kbdicon.gif';\r\n        _a.appendChild(_img);\r\n        \r\n        var _txt1 = document.createTextNode(' Hide Keyboard');    \r\n        var _txt2 = document.createTextNode(' Show Keyboard');\r\n        var _sp1 = util['createElement']('span');\r\n        _sp1.id = 'KMW_KbdVisibleMsg';\r\n        _sp1.appendChild(_txt1);\r\n        _a.appendChild(_sp1);\r\n        \r\n        var _sp2 = util['createElement']('span');\r\n        _sp2.id = 'KMW_KbdHiddenMsg';\r\n        _sp2.appendChild(_txt2);\r\n        _a.appendChild(_sp2);\r\n        _a.onmousedown = ui._ShowKeymanWebKeyboard;\r\n        _a.href = '#';\r\n        _a.id = 'KMW_Keyboard';\r\n        _li.id = 'KMW_ButtonUI_KbdIcon';\r\n        _li.appendChild(_a);\r\n        ui._KMWSel = _a;\r\n        ui._KeymanWeb_KbdList.appendChild(_li);\r\n      }\r\n\r\n      var _li1 = util['createElement']('li'); \r\n      _li1.id = 'KMW_ButtonUI_KbdList'; \r\n      var _a1 = util['createElement']('a');\r\n      _a1.appendChild(document.createTextNode('English'));\r\n\r\n      _a1.onclick = ui._SelectKeyboard;\r\n      _a1.href = '#'; \r\n      _a1.id='KMWSel_$';\r\n      _a1.className='selected';\r\n      _li1.appendChild(_a1);\r\n      ui._KMWSel = _a1;\r\n      ui._KeymanWeb_KbdList.appendChild(_li1);\r\n\r\n      var _kbds = keymanweb['getKeyboards'](), _added = []; \r\n\r\n      ui.updateKeyboardList();\r\n          \r\n      document.getElementById('kmwico_li').appendChild(ui._KeymanWeb_KbdList);\r\n\r\n      var _sfEl = document.getElementById(\"kmwico_li\");\r\n      util['attachDOMEvent'](_sfEl,'mousedown',ui._SelectorMouseDown);\r\n      util['attachDOMEvent'](_sfEl,'mouseover',ui._SelectorMouseOver);\r\n      util['attachDOMEvent'](_sfEl,'mouseout',ui._SelectorMouseOut);    \r\n      util['attachDOMEvent'](_sfEl,'mouseup',ui._SelectorMouseUp);\r\n      \r\n      keymanweb['focusLastActiveElement']();  \t//TODO: this needs to be extended - if no element is active, try and identify an enabled input element\r\n    }\r\n\r\n    ui.shutdown = function() {\r\n      var root = ui._insertedElem;\r\n      if(root) {\r\n        root.parentNode.removeChild(root);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Keyboard registration event handler\r\n     *    \r\n     * Set a timer to update the UI keyboard list on timeout after each keyboard is registered, \r\n     * thus updating only once when only if multiple keyboards are registered together\r\n     */   \r\n    keymanweb['addEventListener']('keyboardregistered', \r\n      function(p)\r\n      {   \r\n          ui.updateList = true;\r\n          if(ui.updateTimer) clearTimeout(ui.updateTimer);\r\n          ui.updateTimer = setTimeout(ui.updateKeyboardList,20);\r\n      });       \r\n\r\n\r\n    /**\r\n     * Update the entire menu when keyboards are registered or deregistered\r\n     **/   \r\n    ui.updateKeyboardList = function()\r\n    {  \r\n      ui.updateList = false;\r\n      \r\n      if(!ui.init) return;\r\n  \r\n      // Clear existing list first (first two nodes must be preserved)\r\n      for(var i:number=ui._KeymanWeb_KbdList.childNodes.length; i>2; i--)\r\n        ui._KeymanWeb_KbdList.removeChild(ui._KeymanWeb_KbdList.childNodes[i-1]);\r\n      \r\n      var kbds=keymanweb['getKeyboards']();\r\n      if(kbds.length > 0)\r\n      {\r\n        for(var i:number=0; i<kbds.length; i++)\r\n          ui.registerKeyboard(kbds[i]['InternalName'],kbds[i]['LanguageName'],kbds[i]['Name'],kbds[i]['LanguageCode'],kbds[i]['RegionCode']);\r\n      }\r\n    } \r\n\r\n    /**\r\n     * As each keyboard stub is registered, append it to the list\r\n     * \r\n     * @param       {string}    Lki     internal name\r\n     * @param       {string}    Lkl     language name\r\n     * @param       {string}    Lkn     keyboard name\r\n     * @param       {string}    Lklc    language code\r\n     * @param       {string}    Lkrc    region code\r\n     **/   \r\n    ui.registerKeyboard = function(Lki,Lkl,Lkn,Lklc,Lkrc)\r\n    {    \r\n      var _li2 = util['createElement']('li'),\r\n        _a2 = util['createElement']('a'),\r\n        _t = Lkn.replace(/\\s?keyboard/i,''); \r\n  \r\n      if(Lkl)\r\n      {\r\n        var lg=Lkl.split(',')[0];\r\n        if(Lkn.search(lg) == -1)\r\n          _t = lg+' ('+_t+')';\r\n      }   \r\n      if(_t.length > 26) _t=_t.substr(0,24)+'\\u2026';\r\n      _a2.appendChild(document.createTextNode(_t));      \r\n      _a2.onclick = ui._SelectKeyboard;\r\n      _a2.href = '#';\r\n      _a2.id='KMWSel_'+Lki+'$'+Lklc;\r\n      _li2.appendChild(_a2);\r\n      ui._KeymanWeb_KbdList.appendChild(_li2);\r\n    }\r\n    \r\n    // Define appearance of this interface\r\n    ui._Appearance = \r\n      \"#kmwico, #kmwkbd {\"+\r\n        \"vertical-align: middle;\"+\r\n      \"} \"+\r\n\r\n      \"#KeymanWebControl {float:left;} \"+\r\n      \r\n      \"#KeymanWebControl * \"+\r\n      \"{\"+\r\n        \"letter-spacing: 0px !important;\"+\r\n        \"line-height: 1li !important;\"+\r\n        \"white-space: nowrap !important;\"+\r\n      \"} \"+\r\n                \r\n      \"#KeymanWebControl #kmwico img {\"+\r\n        \"vertical-align: top;\"+\r\n        \"padding: 0;\"+\r\n        \"margin: 0;\"+\r\n        \"border: none;\"+\r\n      \"} \"+\r\n              \r\n      \"#KeymanWebControl #kmwico, #kmwico ul {\"+\r\n        \"padding: 0;\"+\r\n        \"margin: 0;\"+\r\n        \"list-style: none;\"+\r\n      \"} \"+\r\n              \r\n      \"#KeymanWebControl #kmwico_a {\"+\r\n        \"display: block;\"+\r\n      //\"border: none !important;\"+\r\n        \"width: 22px; height: 23px; \"+                                 /* sizes needed for kmw_button.gif */\r\n      \"} \"+\r\n              \r\n      \"#KeymanWebControl #kmwico li { \"+\r\n        \"text-align: left;\"+\r\n      \"} \"+\r\n    \r\n      \"#KeymanWebControl #kmwico li ul {\"+\r\n        \"display: block;\"+\r\n        \"position: absolute;\"+\r\n        \"left: -5999px;\"+\r\n        \"border: solid 2px #ad4a28;\"+\r\n        \"background: white;\"+\r\n        \"border-radius: 4px;\"+\r\n        \"box-shadow: 4px 4px 2px #666;\"+\r\n        \"z-index: 10011;\"+ /* above the osk */\r\n      \"} \"+\r\n              \r\n      \"#KeymanWebControl #kmwico li.sfunhover ul {\"+\r\n        \"display: none; left: -5999px;\"+\r\n      \"} \"+\r\n              \r\n      \"#KeymanWebControl #kmwico li:hover ul, #kmwico li.sfhover ul {\"+\r\n        \"display: block;\"+\r\n        \"left: auto;\"+\r\n      \"} \"+\r\n    \r\n      \"#KeymanWebControl #kmwico ul li {\"+\r\n        \"float: none;\"+\r\n        \"padding: 0 !important;\"+\r\n        \"margin: 0 !important;\"+\r\n        \"width: 136px !important;\"+\r\n      \"} \"+\r\n    \r\n      \"#KeymanWebControl #KMW_LanguageName {\"+\r\n        \"font-weight: bold;\"+\r\n      \"} \"+\r\n    \r\n      \"#KeymanWebControl #kmwico ul li a, #kmwico ul li a:visited {\"+\r\n        \"display: block;\"+\r\n        \"padding: 2px 4px !important;\"+\r\n        \"border: none !important;\"+\r\n      //  \"width: auto;\"+\r\n        \"color: #404040;\"+\r\n        \"font-family: Tahoma,Verdana,Arial,sans-serif;\"+\r\n        \"font-size: 8pt;\"+\r\n        \"text-decoration: none;\"+\r\n      \"} \"+\r\n    \r\n      \"#KeymanWebControl #kmwico ul li a.selected {\"+\r\n        \"font-weight: bold;\"+\r\n        \"color: black;\"+\r\n      \"} \"+\r\n    \r\n      \"#KeymanWebControl #kmwico ul li a:hover {\"+\r\n        \"color: white;\"+\r\n        \"background-color: #ad4a28;\"+\r\n      \"} \"+\r\n              \r\n      \"#KeymanWebControl #kmwico ul li a.kmw_disabled, #KeymanWebControl #kmwico ul li a.kmw_disabled:hover {\"+\r\n        \"color: #c0c0c0; cursor: default;\"+\r\n        \"background-color: white;\"+\r\n      \"} \"+\r\n\r\n      \"#KeymanWebControl #kmwico ul li a.kmw_show span#KMW_KbdHiddenMsg, #KeymanWebControl #kmwico ul li a.kmw_disabled span#KMW_KbdVisibleMsg {\"+\r\n        \"display: none;\"+\r\n      \"} \"+\r\n\r\n      \"#KeymanWebControl #kmwico ul li a.kmw_show span#KMW_KbdVisibleMsg {\"+\r\n        \"display: inline;\"+\r\n      \"} \"+\r\n\r\n      \"#KeymanWebControl #kmwico ul li a.kmw_hide span#KMW_KbdHiddenMsg {\"+\r\n        \"display: inline;\"+\r\n      \"} \"+\r\n\r\n      \"#KeymanWebControl #kmwico ul li a.kmw_hide span#KMW_KbdVisibleMsg {\"+\r\n        \"display: none;\"+\r\n      \"} \"+\r\n\r\n      \"#KeymanWebControl #kmwico ul li#KMW_ButtonUI_KbdIcon {\"+\r\n        \"border-bottom: solid 1px #ad4a28;\"+\r\n      \"} \";   \r\n\r\n    // Initialize after KMW is fully initialized, if UI already loaded\r\n    keymanweb['addEventListener']('loaduserinterface',ui.Initialize);\r\n    \r\n    // but also call initialization when script loaded, which is after KMW initialization for asynchronous script loading\r\n    ui.Initialize();\r\n      \r\n  } catch(err){}\r\n}"]}