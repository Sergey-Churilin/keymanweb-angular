{"version":3,"file":"kmwuifloat.js","sourceRoot":"","sources":["../source/kmwuifloat.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"kmwexthtml.ts\" />  // Includes KMW-added property declaration extensions for HTML elements.\r\n\r\n/***\r\n   KeymanWeb 11.0\r\n   Copyright 2019 SIL International\r\n***/\r\n\r\n// If a UI module has been loaded, we can rely on the publically-published 'name' property\r\n// having been set as a way to short-out a UI reload.  Its parent object always exists by\r\n// this point in the build process.\r\nif(!window['keyman']['ui']['name']) { \r\n  /********************************/\r\n  /*                              */\r\n  /* Floating User Interface      */\r\n  /*                              */\r\n  /********************************/\r\n\r\n  /**\r\n   * Do not enclose in an anonymous function, as the compiler may create\r\n   * global scope variables to replace true, false, null, which can collide\r\n   * with other variables.\r\n   * Instead, use the --output-wrapper command during optimization, which will\r\n   * add the anonymous function to enclose all code, including those optimized\r\n   * variables which would otherwise have global scope.\r\n   **/  \r\n\r\n  try {\r\n\r\n    // Declare KeymanWeb, OnScreen keyboard and Util objects\r\n    var keymanweb=window['keyman'];\r\n    var util=keymanweb['util'];\r\n    var osk=keymanweb['osk'];\r\n    var dbg=keymanweb['debug'];\r\n\r\n    // Disable UI for touch devices\r\n    if(util['isTouchDevice']()) throw '';\r\n    \r\n    // User interface global and local variables\r\n    keymanweb['ui'] = {};\r\n    var ui=keymanweb['ui'];\r\n    ui['name'] = 'float';\r\n    \r\n    ui.KeyboardSelector = null; \r\n    \r\n    ui.outerDiv = null;     // replaces DivKeymanWeb\r\n    ui.innerDiv = null;     // replaces Lkdiv\r\n    ui.oskButton = null;    // toggles OSK on or off  \r\n    ui.kbdIcon = null;      // keyboard icon within OSK button\r\n    ui.selecting = false;   // control focus behaviour during selection\r\n    ui.updateList = true;   // control keyboard list updating\r\n    ui.updateTimer = null;  // prevent unnecessary list refreshing\r\n    ui.floatRight = false;  // align left by default\r\n    ui.initialized = false; // initialization flag \r\n\r\n    /**\r\n     * Display or hide the OSK from the OSK icon link\r\n     */     \r\n    ui.toggleOSK = function()\r\n    {\r\n      keymanweb['focusLastActiveElement']();\r\n      if(osk['show']) \r\n      {\r\n        if(osk['isEnabled']()) osk['hide'](); else osk['show'](true);\r\n      }\r\n      if(window.event) window.event.returnValue=false;\r\n      return false;\r\n    }\r\n    \r\n    /**\r\n     * Function     Initialize\r\n     * Scope        Private   \r\n     * Description  UI Initialization\r\n     **/\r\n    ui.Initialize = function()\r\n    { \r\n      // Must always initialize after keymanWeb itself, otherwise options are undefined\r\n      if(!keymanweb['initialized'])\r\n      {\r\n        window.setTimeout(ui.Initialize,50); return;\r\n      }\r\n      \r\n      if(ui.initialized || util['isTouchDevice']()) return;\r\n          \r\n      var imgPath=util['getOption']('resources')+\"ui/float/\";\r\n      \r\n      ui.outerDiv = util['createElement']('DIV');         // Container for UI (visible when KeymanWeb is active)\r\n      ui.innerDiv = util['createElement']('DIV');         // inner div for UI\r\n      ui.kbdIcon = util['createElement']('IMG');  \r\n      ui.outerDiv.innerHTML = \"<a href='http://keyman.com/web/' target='KeymanWebHelp'>\"\r\n        + \"<img src='\"+imgPath+\"kmicon.gif' border='0' style='padding: 0px 2px 0 1px; margin:0px;' title='KeymanWeb' alt='KeymanWeb' /></a>\"; /* I2081 */\r\n\r\n      var s=ui.outerDiv.style;                                                                              \r\n      s.backgroundColor='white'; s.border='solid 1px black'; s.position='absolute'; s.height='18px';\r\n      s.font='bold 8pt sans-serif'; s.display='none'; s.textAlign='left';s.overflow='hidden'; \r\n      \r\n      util['attachDOMEvent'](ui.outerDiv,'mousedown',ui._SelectorMouseDown);\r\n      util['attachDOMEvent'](ui.outerDiv,'mouseover',ui._SelectorMouseOver);\r\n      util['attachDOMEvent'](ui.outerDiv,'mouseout',ui._SelectorMouseOut);\r\n          \r\n      // Register keymanweb events\r\n      ui.registerEvents();        \r\n\r\n      ui.kbdIcon.src = imgPath+'kbdicon.gif';\r\n      ui.kbdIcon.title = 'Display visual keyboard';\r\n\r\n      // Set initial OSK button style (off by default)\r\n      ui.oskButtonState(false);\r\n      \r\n      var Lhdiv = util['createElement']('DIV'); \r\n      ui.oskButton = Lhdiv;\r\n      Lhdiv.onclick = ui.toggleOSK;    \r\n      Lhdiv.appendChild(ui.kbdIcon);\r\n      ui.innerDiv.appendChild(Lhdiv);\r\n      ui.outerDiv.appendChild(ui.innerDiv);\r\n      document.body.appendChild(ui.outerDiv);\r\n\r\n      ui.KeyboardSelector =  util['createElement']('SELECT'); // ControlSelector - KeymanWeb keyboard selector\r\n      \r\n      s=ui.KeyboardSelector.style;\r\n      s.font='8pt sans-serif'; s.backgroundColor='#f3e5de'; s.border='solid 1px #7B9EBD'; s.height='16px';s.margin='1px 2px 0px 2px';\r\n      s.left='20px'; s.top='0px'; s.position='absolute'; s.maxWidth='150px';\r\n\r\n      util['attachDOMEvent'](ui.KeyboardSelector,'change',ui.SelectKeyboardChange);\r\n      util['attachDOMEvent'](ui.KeyboardSelector,'blur',ui.SelectBlur);\r\n      \r\n      ui.innerDiv.appendChild(ui.KeyboardSelector);  //this may need to be moved up.... \r\n\r\n      // Check required interface alignment and default keyboard\r\n      var opt=util['getOption']('ui'),dfltKeyboard='English';\r\n      if(typeof(opt) == 'object')\r\n      {\r\n        if(typeof(opt['position']) == 'string' && opt['position'] == 'right') \r\n          ui.floatRight = true;\r\n        if(typeof(opt['default']) == 'string') \r\n          dfltKeyboard = opt['default']; \r\n      }\r\n\r\n      var Lopt = util['createElement']('OPTION');\r\n      Lopt.value = '-';\r\n      Lopt.innerHTML = dfltKeyboard;\r\n      ui.KeyboardSelector.appendChild(Lopt);  \r\n      Lopt = null;\r\n\r\n      // This must be set before updating the keyboard list to prevent recursion!\r\n      ui.initialized = true;\r\n\r\n      // Update the keyboard list if required\r\n      ui.updateKeyboardList();\r\n      \r\n      //may also want to initialize style sheet here ??\r\n    }\r\n\r\n    ui._UnloadUserInterface = function() {\r\n      ui.KeyboardSelector = ui.innerDiv = ui.outerDiv = ui.kbdIcon = null; \r\n    };\r\n    /**\r\n     * UI removal - resource cleanup\r\n     */    \r\n    keymanweb['addEventListener']('unloaduserinterface', ui._UnloadUserInterface);\r\n        \r\n\r\n    ui.shutdown = function() {\r\n      var root = ui.outerDiv;\r\n      if(root) {\r\n        root.parentNode.removeChild(root);\r\n      }\r\n\r\n      ui._UnloadUserInterface();\r\n\r\n      if(window.removeEventListener) {\r\n        window.removeEventListener('resize', ui._Resize, false);\r\n      }\r\n    }\r\n  \r\n    /**\r\n     * Update list of keyboards shown by UI\r\n     */     \r\n    ui.updateKeyboardList = function()\r\n    {\r\n      // Do nothing unless list requires updating\r\n      if(ui.updateList) \r\n      { \r\n        if(!ui.initialized) ui.Initialize();\r\n                                                      \r\n        // Remove current list (except for default element)\r\n        var i,opts=ui.KeyboardSelector.getElementsByTagName('OPTION');\r\n        for(i=opts.length; i>1; i--)\r\n        {\r\n          ui.KeyboardSelector.removeChild(opts[i-1]);\r\n        }    \r\n        \r\n        // Loop over installed keyboards and add to selection list     \r\n        var Ln,Lopt,Lkbds=keymanweb['getKeyboards']();  \r\n            \r\n        for(Ln=0; Ln<Lkbds.length; Ln++) \r\n        {\r\n          Lopt = util['createElement']('OPTION');\r\n          Lopt.value = Lkbds[Ln]['InternalName']+':'+Lkbds[Ln]['LanguageCode'];;        \r\n          Lopt.innerHTML = Lkbds[Ln]['Name'].replace(/\\s?keyboard/i,'');      \r\n          if(Lkbds[Ln]['LanguageName'])\r\n          {\r\n            var lg=Lkbds[Ln]['LanguageName'];\r\n            // Only show the main language name if variants indicated (this is tentative)\r\n            // e.g. Chinese rather than Chinese, Mandarin, which is in the keyboard name\r\n            lg = lg.split(',')[0];\r\n            if(Lkbds[Ln]['Name'].search(lg) == -1)        \r\n              Lopt.innerHTML = lg+' ('+Lopt.innerHTML+')';  // I1300 - Language support\r\n          }\r\n          \r\n          ui.KeyboardSelector.appendChild(Lopt);\r\n          Lopt = null;\r\n        }\r\n      }\r\n      ui.updateList = false;    \r\n      \r\n      // Set the menu selector to the currently saved keyboard\r\n      var sk = keymanweb['getSavedKeyboard']().split(':');\r\n      if(sk.length < 2) sk[1] = ''; \r\n      ui.updateMenu(sk[0],sk[1]); \r\n      \r\n      // Redisplay the UI to correct width for any new language entries\r\n      if(keymanweb['getLastActiveElement']())\r\n      {\r\n        ui.HideInterface();\r\n        ui.ShowInterface();\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Function     updateMenu\r\n     * Scope        Private   \r\n     * @param       {string}     kbd\r\n     * @param       {string}     lg \r\n     * Description  Update the UI menu selection\r\n     *              Separate arguments passed to allow better control of selection when a keyboard \r\n     *              is listed more than once for different language codes       \r\n     */   \r\n    ui.updateMenu = function(kbd,lg)\r\n    {\r\n      var i=0,value='English';\r\n      \r\n      // This can be called during startup before fully initialized - ignore if so\r\n      if(!ui.initialized) return;  \r\n      \r\n      var match = kbd;\r\n      if(lg != '') match += ':' + lg;\r\n      \r\n      if(kbd == '')\r\n        ui.KeyboardSelector.selectedIndex=0;\r\n      else\r\n      {  \r\n        var opt=ui.KeyboardSelector.getElementsByTagName('OPTION');\r\n        for(i=0; i<opt.length; i++)\r\n        {\r\n          var t=opt[i].value; \r\n          if(lg == '') t = t.split(':')[0];\r\n          if(t == match) \r\n          {\r\n            ui.KeyboardSelector.selectedIndex=i;\r\n            break; \r\n          }   \r\n        }\r\n      }\r\n    }  \r\n\r\n    /**\r\n     * Function     oskButtonState\r\n     * Scope        Private   \r\n     * @param       {boolean}     oskEnabled\r\n     * Description  Update kbd icon border style to indicate whether OSK is enabled for display or not\r\n     **/   \r\n    ui.oskButtonState = function(oskEnabled)\r\n    {\r\n      var s = ui.kbdIcon.style;\r\n      s.width='24px'; s.height='13px'; s.top='1px'; \r\n      s.verticalAlign='bottom'; s.padding='2px 2px 1px 2px'; s.position='absolute';\r\n      s.border=oskEnabled ? 'inset 1px #808080' : 'none'; \r\n      s.background=oskEnabled ? '#f7e7de' : 'white';\r\n      s.display = 'block';     \r\n      if(ui.initialized) ui.oskButton.style.display = 'block';\r\n    }\r\n    \r\n    /**\r\n     * Register all keymanweb and OSK events only after keymanweb is fully initialized\r\n     *    \r\n     **/      \r\n    ui.registerEvents = function()\r\n    {\r\n      /**\r\n       * Keyboard registration event handler\r\n       *    \r\n       * Set a timer to update the UI keyboard list on timeout after each keyboard is registered, \r\n       * thus updating only once when only if multiple keyboards are registered together\r\n       */   \r\n      keymanweb['addEventListener']('keyboardregistered', \r\n        function(p)\r\n        {  \r\n            ui.updateList = true;\r\n            if(ui.updateTimer) clearTimeout(ui.updateTimer);\r\n            ui.updateTimer = setTimeout(ui.updateKeyboardList,200);\r\n        });       \r\n      \r\n      /**\r\n       * Keyboard load event handler\r\n       * \r\n       * Set the menu selector to the currently saved keyboard when a keyboard is loaded\r\n       *    \r\n       * Note: Cannot simply set it to the loaded keyboard, \r\n       *       as more than one language may be supported by that keyboard.\r\n       */   \r\n      keymanweb['addEventListener']('keyboardloaded',\r\n        function(p) {\r\n          var sk = keymanweb['getSavedKeyboard']().split(':');\r\n          if(sk.length > 1) ui.updateMenu(sk[0],sk[1]);\r\n        });\r\n        \r\n      /**\r\n       * Keyboard change event handler\r\n       *        \r\n       * Update menu selection and control OSK display appropriately\r\n       */\r\n      keymanweb['addEventListener']('keyboardchange',  \r\n        function(p)\r\n        {\r\n          // Update the keyboard selector whenever a keyboard is loaded  \r\n          ui.updateMenu(p['internalName'],p['languageCode']);    \r\n      \r\n          // (Conditionally) display the OSK button, and set the style \r\n          ui.addButtonOSK();        \r\n        });\r\n                      \r\n      /**\r\n       * Show OSK event handler: show or hide the OSK button (never display if a CJK keyboard)\r\n       */                \r\n      osk['addEventListener']('show',\r\n        function(oskPosition)\r\n        {          \r\n          ui.addButtonOSK();    \r\n          return oskPosition; \r\n        }); \r\n\r\n      /**\r\n       * Hide OSK event handler\r\n       */ \r\n      \r\n      osk['addEventListener']('hide',\r\n        function(hiddenByUser)\r\n        {\r\n          if(ui.initialized) ui.oskButtonState(false);\r\n        }); \r\n    }\r\n      \r\n    /**\r\n     * Function     _SelectorMouseDown\r\n     * Scope        Private   \r\n     * @param       {Object}     e      event\r\n     * Description  Set KMW UI activation state on mouse click\r\n     */    \r\n    ui._SelectorMouseDown = function(e)\r\n    { \r\n      if(keymanweb['activatingUI']) keymanweb['activatingUI'](1);\r\n    }\r\n\r\n    /**\r\n     * Function     _SelectorMouseOver\r\n     * Scope        Private\r\n     * @param       {Object}    e       event\r\n     * Description  Set KMW UI activation state on mouse over\r\n     */    \r\n    ui._SelectorMouseOver = function(e)\r\n    {\r\n      if(keymanweb['activatingUI']) keymanweb['activatingUI'](1);\r\n    }\r\n\r\n    /**\r\n     * Function     _SelectorMouseOut\r\n     * Scope        Private\r\n     * @param       {Object}    e       event\r\n     * Description Clear KMW UI activation state on mouse out\r\n     */    \r\n    ui._SelectorMouseOut = function(e)\r\n    {\r\n      if(keymanweb['activatingUI']) keymanweb['activatingUI'](0);\r\n    }\r\n\r\n    /**\r\n     * Function     _SelectKeyboardChange\r\n     * Scope        Private\r\n     * @param       {Object}    e       event\r\n     * Description  Change active keyboard in response to user selection event\r\n     */    \r\n    ui.SelectKeyboardChange = function(e)\r\n    { \r\n      if(ui.KeyboardSelector.value != '-')\r\n      {\r\n        var i=ui.KeyboardSelector.selectedIndex;\r\n        var t=ui.KeyboardSelector.options[i].value.split(':');\r\n        keymanweb['setActiveKeyboard'](t[0],t[1]);\r\n      }\r\n      else\r\n        keymanweb['setActiveKeyboard'](''); \r\n      \r\n      //if(osk['show']) osk['show'](osk['isEnabled']()); handled by keyboard change event???\r\n      keymanweb['focusLastActiveElement']();\r\n      ui.selecting = true;\r\n    }\r\n\r\n    /**\r\n     * Function     _SelectBlur\r\n     * Scope        Private\r\n     * @param       {Object}    e       event\r\n     * Description  Ensure OSK is hidden when moving focus after reselecting a keyboard\r\n     */    \r\n    ui.SelectBlur = function(e)\r\n    {\r\n      if(!ui.selecting) keymanweb['focusLastActiveElement']();\r\n      ui.selecting = false;                                   \r\n    }\r\n    \r\n    /**\r\n     * Function     ShowInterface\r\n     * Scope        Private\r\n     * @param       {number=}    Px    x-position for KMW window\r\n     * @param       {number=}    Py    y-position for KMW window\r\n     * Description  Display KMW window at specified position\r\n     */    \r\n    ui.ShowInterface = function(Px, Py)\r\n    {\r\n      if(!ui.initialized) return;\r\n    \r\n      var Ls = ui.outerDiv.style;   \r\n\r\n      if(Px  &&  Py) {\r\n        Ls.left = Px + 'px';\r\n        Ls.top = Py + 'px';\r\n      }\r\n      Ls.display = 'block';\r\n      \r\n      ui.kbdIcon.style.left = ui.KeyboardSelector.offsetWidth + 24 + 'px';\r\n      \r\n      // (Conditionally) display the OSK button\r\n      ui.addButtonOSK();\r\n          \r\n      // Set the language selection to the currently active keyboard, if listed\r\n      ui.updateMenu(keymanweb['getActiveKeyboard'](),keymanweb['getActiveLanguage']());\r\n    }\r\n      \r\n    /**\r\n     * Function     HideInterface\r\n     * Scope        Private\r\n     * Description  Completely hide KMW window \r\n     */    \r\n    ui.HideInterface = function()\r\n    {\r\n      if(!ui.initialized) return;\r\n      \r\n      ui.outerDiv.style.display = 'none';\r\n    }\r\n\r\n\r\n    /**\r\n     * Function     addButtonOSK\r\n     * Scope        Private\r\n     * Description  Display the OSK button unless a CJK keyboard (or English)\r\n     */            \r\n    ui.addButtonOSK = function()\r\n    {\r\n      if(ui.oskButton != null)\r\n      {\r\n        if(keymanweb['isCJK']() || (ui.KeyboardSelector.selectedIndex==0)) \r\n        {\r\n          ui.oskButton.style.display = 'none';\r\n          ui.outerDiv.style.width = ui.KeyboardSelector.offsetWidth+30+'px';    \r\n        } \r\n        else \r\n        {\r\n          ui.oskButton.style.display = 'block';\r\n          ui.oskButtonState(osk['isEnabled']());\r\n          ui.outerDiv.style.width = ui.KeyboardSelector.offsetWidth+56+'px';\r\n        }      \r\n      }\r\n    }\r\n    //TODO:  had to expose properties of params - what does that do? (focus event doesn't normally include these properties?)  \r\n    keymanweb['addEventListener']('controlfocused',\r\n      function(params)\r\n      {\r\n        if(params['activeControl'] == null || params['activeControl']['LEnabled'])\r\n        {\r\n          /*if(keymanweb._IsIEEditableIframe(Ltarg))\r\n            Ltarg = Ltarg.ownerDocument.parentWindow.frameElement;\r\n          else if(keymanweb.domManager._IsMozillaEditableIframe(Ltarg))\r\n            Ltarg = Ltarg.defaultView.frameElement;*/\r\n          if(ui.floatRight)   // I1296\r\n            ui.ShowInterface(util['getAbsoluteX'](params.target) + params.target.offsetWidth + 1, util['getAbsoluteY'](params.target) + 1);\r\n          else\r\n            ui.ShowInterface(util['getAbsoluteX'](params.target), util['getAbsoluteY'](params.target) \r\n              - parseInt(util['getStyleValue'](ui.outerDiv,'height'),10) - 2);\r\n        }\r\n        return true;\r\n      });               \r\n\r\n    keymanweb['addEventListener']('controlblurred',\r\n      function(params)\r\n      {  \r\n        if(!params['event']) return true;   // I2404 - Manage IE events in IFRAMEs\r\n    \r\n        if(!params['isActivating']) ui.HideInterface();\r\n\r\n        return true;\r\n      });\r\n    \r\n    /**\r\n     * Function     _Resize\r\n     * Scope        Private   \r\n     * @param       {Object}     e      event object\r\n     * @return      {boolean}      \r\n     * Description  Display KMW OSK at specified position (returns nothing) \r\n     */    \r\n    ui._Resize = function(e)\r\n    {\r\n      if(ui.outerDiv.style.display =='block') \r\n      {\r\n        var elem = keymanweb['getLastActiveElement']();\r\n        if(ui.floatRight)   // I1296\r\n          ui.ShowInterface(util['getAbsoluteX'](elem) + elem.offsetWidth + 1, util['getAbsoluteY'](elem) + 1);\r\n        else\r\n          ui.ShowInterface(util['getAbsoluteX'](elem) + 1, util['getAbsoluteY'](elem) + elem.offsetHeight + 1);\r\n      }\r\n      return true;\r\n    }  \r\n    \r\n    if(window.addEventListener)\r\n      window.addEventListener('resize', ui._Resize, false);\r\n\r\n    // Initialize after KMW is fully initialized, if UI already loaded\r\n    keymanweb['addEventListener']('loaduserinterface',ui.Initialize);\r\n    \r\n    // but also call initialization when script loaded, which is after KMW initialization for asynchronous script loading\r\n    ui.Initialize();\r\n    \r\n  } catch(err){}\r\n\r\n  // Do not wrap in an anonymous function - let the closure compiler do that, but\r\n  // use try...catch to avoid script errors and only execute if a desktop browser\r\n}"]}